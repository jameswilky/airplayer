{"version":3,"sources":["theme.js","pages/Agnostic/Landing/styles.js","pages/Agnostic/Landing/Landing.js","pages/Agnostic/Callback.js","components/List.js","components/ListItem.js","components/Modal/styles.js","components/Modal/Modal.js","components/CreateRoomForm/styles.js","components/Carousel/styles.js","components/Carousel/Carousel.js","modules/Spotify/index.js","hooks/useInterval.js","hooks/useDebounce.js","helpers/ObjectUtils.js","modules/SpotifyHelper/SpotifyHelper.js","hooks/useSearch/useSearch.js","components/CreateRoomForm/CreateRoomForm.js","hooks/useProfile.js","styles/StyledListItem.js","pages/Agnostic/RoomSearch/styles.js","pages/Agnostic/RoomSearch/RoomSearch.js","styles/Chevron.js","pages/Desktop/Home/styles.js","pages/Desktop/Home/Home.js","components/Results/styles.js","components/Result/styles.js","components/Result/Result.js","components/Results/Results.js","components/SongList.js","pages/Agnostic/Search/styles.js","pages/Agnostic/Search/Search.js","pages/Agnostic/Library/styles.js","pages/Agnostic/Library/Library.js","pages/Desktop/RoomView/styles.js","hooks/useWebplayer/reducer.js","hooks/useTimeout.js","hooks/useWebplayer/index.js","hooks/useWebplayer/useQue.js","hooks/useWebplayer/useSetup.js","hooks/useWebplayer/useVolume.js","hooks/useWebplayer/useSeek.js","hooks/useWebplayer/usePlay.js","hooks/useWebplayer/useTogglePause.js","components/VolumeSlider.js","components/AudioSlider/styles.js","components/AudioSlider/AudioSlider.js","components/SpotifyWebplayer/styles.js","components/MusicController.js","components/SpotifyWebplayer/SpotifyWebplayer.js","components/SearchFilter/styles.js","components/SearchFilter/SeachFilter.js","components/DesktopHeader/styles.js","components/DesktopHeader/DesktopHeader.js","components/Sidebar/styles.js","components/Sidebar/Sidebar.js","components/Message/styles.js","components/Message/Message.js","pages/Desktop/RoomView/RoomView.js","components/CurrentTrack/styles.js","components/CurrentTrack/CurrentTrack.js","components/AudioVisualizer.js","pages/Mobile/Home/styles.js","pages/Mobile/Home/Home.js","styles/Container.js","components/Input/Input.js","components/SearchBar/styles.js","components/SearchBar/SearchBar.js","pages/Mobile/Search/Search.js","components/MobileMenu.js","pages/Mobile/RoomView/RoomView.js","pages/Agnostic/Room/Room.js","hooks/useRoom.js","hooks/useRoomTracks.js","hooks/useLibrary.js","hooks/useFind.js","hooks/useBreakpoint.js","hooks/useAuth.js","App.js","serviceWorker.js","index.js","images/spotifyLogo.png"],"names":["theme","primary","secondary","black","gradient","blackFadeGradient","whiteFadeGradient","darkestGray","darkerGray","darkGray","gray","lightGray","lighterGray","green","red","transparent5","transparent4","transparent3","transparent2","transparent","transparentBlack","transparentBlack2","transparentBlack3","transparentBlack4","transparentBlack5","white","breakpoints","mobile","laptop","desktop","unit","mode","shadow","Background","styled","div","_templateObject","props","Head","_templateObject2","Body","_templateObject3","Submit","button","_templateObject4","Input","input","_templateObject5","ShadowWrapper","_templateObject6","Button","_templateObject7","Landing","logout","isAuthenticated","react_default","a","createElement","Fragment","type","placeholder","react_router_dom","to","onClick","styles_Button","src","spotifyLogo","alt","href","getHashParams","e","hashParams","r","q","window","location","hash","substring","exec","decodeURIComponent","Callback","setAuthData","useEffect","nextAuthData","accessToken","access_token","refreshToken","refresh_token","accessTokenCreationTime","Date","now","localStorage","setItem","JSON","stringify","Object","objectSpread","List","_props$items","items","_props$Style","Style","ul","List_templateObject","_props$limit","limit","length","children","slice","map","item","i","React","cloneElement","childProps","fromEntries","entries","filter","_ref","slicedToArray","_ref3","_ref4","propName","callback","handler","ItemProps","key","ListItem","name","labels","_ref$Style","li","ListItem_templateObject","_ref$filter","_ref$onClick","_ref$button","label","Container","styles_templateObject","show","Title","p","styles_templateObject2","styles_templateObject3","Modal","setShow","title","index_esm","styles_Body","CreateRoomForm_styles_templateObject","SearchForm","CreateRoomForm_styles_templateObject2","CreateForm","form","CreateRoomForm_styles_templateObject3","CreateButton","styles_templateObject4","TickIcon","IoIosCheckmark","Carousel_styles_templateObject","AddIcon","IoIosAdd","Carousel_styles_templateObject2","IconUnderlay","Carousel_styles_templateObject3","StyledList","Carousel_styles_templateObject4","StyledContainer","styles_templateObject5","StyledItem","styles_templateObject6","StyledItemContainer","span","styles_templateObject7","StyledOverlay","_templateObject8","_templateObject9","Carousel","height","addItem","removeItem","selectedItems","uri","selected","getImages","default","url","getArtists","artist","some","obj","String","prototype","replaceAll","search","replacement","this","split","join","undefined","arr","assign","apply","concat","toConsumableArray","Array","from","_ref2","k","v","defineProperty","Spotify","token","send","arguments","api","request","query","body","options","headers","Authorization","Content-type","method","fetch","encodeURI","then","res","json","string","put","get","remove","merge","template","_ref5","appendOptions","pluralize","str","hyphenize","replace","m","toLowerCase","depthOf","object","level","hasOwnProperty","depth","Math","max","innerKeys","o","keys","reduce","findQuery","conditionBased","target","condition","where","id","option","parseOptions","isEmpty","singleSearch","multiSearch","ids","values","_ref6","_ref6$query","_ref6$type","_ref6$offset","offset","_ref6$limit","_ref6$market","market","_ref6$wildcard","wildcard","queryString","find","user","userQuery","_ref7","_ref7$id","_ref7$ids","_ref7$suffix","suffix","_ref7$prefix","prefix","follows","params","follow","unfollow","getFollowed","library","libraryQuery","libraryBody","_ref8","contains","_ref9","delete","add","top","me","playlists","artists","player","useInterval","delay","savedCallback","useRef","current","setInterval","clearInterval","useDebounce","dependencies","_useState","useState","_useState2","updated","setUpdated","getKey","getNestedProperty","prop","results","entry","arrayToObject","array","names","fallbackImages","large","width","medium","small","ItemPrototype","album","images","getLabels","owner","display_name","useSearch","setQuery","_useState3","tracks","albums","_useState4","queryResults","setQueryResults","spotify","getQueries","useCallback","asyncToGenerator","regenerator_default","mark","_callee","queries","wrap","_context","prev","next","Promise","all","sent","abrupt","stop","_x","nextResults","getItems","itemsByType","forEach","Reflect","setPrototypeOf","CreateRoomForm","initialData","password","userId","playlist","data","setData","created","tracksSelected","done","roomState","setRoomState","_useSearch","room","react_router","styles_Container","value","onChange","track","required","go_index_esm","useProfile","setUser","StyledListItem_templateObject","RoomSearch_styles_templateObject","RoomSearch_styles_templateObject2","RoomSearch_styles_templateObject3","RoomSearch_styles_templateObject4","ExtendedStyledListItem","StyledListItem","RoomSearch_styles_templateObject5","RoomSearch_styles_templateObject6","RoomSearch_styles_templateObject7","RoomSearch","rooms","setRooms","showModal","setShowModal","getTimeSince","start","minutesSince","round","getTime","styles_Background","RoomSearch_styles_Container","styles_Head","RoomSearch_styles_Body","createdAt","RoomSearch_styles_Button","JoinButton","styles_CreateButton","Chevron","Chevron_templateObject","visibility","Home_styles_templateObject","Home_styles_templateObject2","Home","roomTracks","topTracks","setStartAudio","Home_styles_Container","controller","addTrack","removeTrack","currentSong","play","stopPropagation","Results_styles_templateObject","NoQuery","Results_styles_templateObject2","Result_styles_templateObject","Result_styles_templateObject2","StyledChevron","Result_styles_templateObject3","direction","Result","actions","_ref$handleItemClick","handleItemClick","_ref$handleHeaderClic","handleHeaderClick","action","func","icon","Result_styles_Container","styles_StyledChevron","Results","setFilter","_props$results","Results_styles_Container","result","bool","path","onItemClick","onHeaderClick","SongList","foundTracks","setFindQuery","foundTracksName","console","log","Search_styles_templateObject","Icon","css","Search_styles_templateObject2","Search_styles_templateObject3","Search_styles_templateObject4","Search","Search_styles_Container","Library_styles_templateObject","Library_styles_templateObject2","Library","selectedTracks","Library_styles_Container","RoomView_styles_templateObject","Spinner","Loader","RoomView_styles_templateObject2","RoomView_styles_templateObject3","Main","main","RoomView_styles_templateObject4","Footer","footer","RoomView_styles_templateObject5","reducer","state","payload","device_id","ready","paused","playing","lastSeek","useTimeout","setTimeout","clearTimeout","useWebplayer","duration","_useReducer","useReducer","_useReducer2","deviceState","dispatch","loadScript","setLoadScript","_useQue","skipAttempts","trackFinished","setTrackFinished","remaining","setRemaining","queTrack","pos","nextSongIndex","indexOf","nextSong","useQue","setPlayer","onSpotifyWebPlaybackSDKReady","Player","getOAuthToken","cb","connect","success","error","addListener","message","handleStateChange","position","removeListener","useSetup","_useVolume","volume","setVolume","useVolume","seek","useSeek","uris","Content-Type","pause","usePlay","resume","useTogglePause","HoverArea","VolumeSlider_templateObject","SliderBackground","VolumeSlider_templateObject2","VolumeSlider","onMouseEnter","onMouseLeave","style","cursor","dist_index_esm","axis","y","styles","thumb","backgroundColor","borderRadius","opacity","transition","boxShadow","Slider","AudioSlider_styles_templateObject","ProgressBar","attrs","AudioSlider_styles_templateObject2","AudioSlider","trackPosition","setTrackPosition","prevSeek","min","className","seekDestinationMs","parseInt","SpotifyWebplayer_styles_templateObject","SpotifyWebplayer_styles_templateObject2","Left","SpotifyWebplayer_styles_templateObject3","Right","SpotifyWebplayer_styles_templateObject4","SpotifyWebplayer_styles_templateObject5","MusicController_templateObject","MusicController","setStart","isFirstTrack","isLastTrack","MusicController_Container","SpotifyWebplayer","scriptState","setScriptState","duration_ms","_useWebplayer","lib_default","onError","onLoad","loaded","SpotifyWebplayer_styles_Container","SpotifyWebplayer_styles_Body","styles_Spinner","color","SearchFilter_styles_templateObject","SearchFilter_styles_templateObject2","active","SeachFilter","RadioButton","text","SearchFilter_styles_Button","SearchFilter_styles_Container","ProfileIcon","IoIosPerson","DesktopHeader_styles_templateObject","header","DesktopHeader_styles_templateObject2","Wrapper","DesktopHeader_styles_templateObject3","SearchBar","DesktopHeader_styles_templateObject4","DesktopHeader","DesktopHeader_styles_Container","StyledLink","Link","Sidebar_styles_templateObject","nav","Sidebar_styles_templateObject2","Sidebar_styles_templateObject3","HomeIcon","IoIosHome","Sidebar_styles_templateObject4","SearchIcon","IoIosSearch","Sidebar_styles_templateObject5","LibraryIcon","IoIosList","Sidebar_styles_templateObject6","Sidebar","toggleTheme","pathname","Sidebar_styles_Container","getItem","Message_styles_templateObject","Error","Message_styles_templateObject2","Success","Message_styles_templateObject3","Message","_useState5","_useState6","setMessage","generateSuccessMessage","generateErrorMessage","Message_styles_Container","RoomView","startAudio","libraryResults","findResult","playerReady","match","roomSuccess","roomError","RoomView_styles_Background","RoomView_styles_Container","exact","component","isHost","CurrentTrack_styles_templateObject","ImageContainer","CurrentTrack_styles_templateObject2","ImageWrapper","CurrentTrack_styles_templateObject3","Image","img","CurrentTrack_styles_templateObject4","Overlay","CurrentTrack_styles_templateObject5","SongInfoContainer","CurrentTrack_styles_templateObject6","CurrentTrack_styles_templateObject7","CurrentTrack","AudioVisualizer","nextTrack","image","CurrentTrack_styles_Container","CurrentTrack_styles_StyledChevron","Mobile_Home_styles_templateObject","Mobile_Home_styles_templateObject2","Home_styles_templateObject3","Home_styles_templateObject4","_props$roomTracks","Mobile_Home_styles_Container","styles_StyledItem","Home_styles_Spinner","Container_templateObject","setValue","SearchBar_styles_templateObject","SearchBar_styles_templateObject2","styles_Wrapper","SearchBar_styles_Container","Input_Input","Container_Container","SearchBar_SearchBar","Row","MobileMenu_templateObject","MobileMenu_templateObject2","Underlay","MobileMenu_templateObject3","MobileMenu_templateObject4","MobileMenu","MobileMenu_Container","MobileMenu_Body","RoomView_templateObject","RoomView_Container","Home_Home","Search_Search","Room","_useRoom","socket","io","setError","setSuccess","Controller","joinRoom","emit","updatePlaylist","destination","setRoom","on","nextRoomState","host","code","useRoom","setRoomTracks","currentSongPromise","playlistPromise","useRoomTracks","nextQueryResults","useLibrary","_useFind","setFindResult","getTracks","t0","getAlbumTracks","getArtistTracks","getPlaylistTracks","_x2","_findQuery$uri$split$","_findQuery$uri$split$2","_callee2","collection","_context2","_x3","_callee3","_context3","_x4","_callee4","_context4","_x5","useFind","_useFind2","breakpoint","setBreakpoint","handleResize","innerWidth","addEventListener","removeEventListener","useBreakpoint","viewProps","RoomView_RoomView","useAuth","auth","initialState","authData","spotifyWindow","open","close","reload","prevAuthData","parse","App","_useAuth","activeTheme","styled_components_browser_esm","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.0eb8d2c7.chunk.js","sourcesContent":["export default {\r\n  primary: \"rgba(242, 162, 176)\",\r\n  secondary: \"rgba(242,182,147)\",\r\n  black: `rgba(20, 20, 20, 1)`,\r\n\r\n  gradient: `linear-gradient(to top left, rgba(242, 182, 147), rgba(242, 162, 176))`,\r\n  blackFadeGradient: `linear-gradient(\r\n    to top,\r\n    rgba(20, 20, 20, 1),\r\n    rgba(20, 20, 20, 0)\r\n  )`,\r\n  whiteFadeGradient: `linear-gradient(\r\n    to top,\r\n    rgba(245, 245, 245, 1),\r\n    rgba(242, 182, 147, 0 )\r\n  )`,\r\n  darkestGray: `rgba(30, 30, 30, 1)`,\r\n  darkerGray: `rgba(50, 50, 50, 1)`,\r\n  darkGray: `rgba(120, 120, 120, 1)`,\r\n  gray: `rgba(175, 175, 175, 1)`,\r\n  lightGray: `rgba(200, 200, 200, 1)`,\r\n  lighterGray: `rgba(225, 225, 225, 1)`,\r\n\r\n  green: `rgba(20, 215, 20, 0.7)`,\r\n  red: `rgba(242, 20, 20, 0.7)`,\r\n\r\n  transparent5: `rgba(245, 245, 245, 0.8)`,\r\n  transparent4: `rgba(245, 245, 245, 0.6)`,\r\n  transparent3: `rgba(245, 245, 245, 0.3)`,\r\n  transparent2: `rgba(245, 245, 245, 0.15)`,\r\n  transparent: `rgba(245, 245, 245, 0.07)`,\r\n\r\n  transparentBlack: `rgba(20,20,20,0.8)`,\r\n  transparentBlack2: `rgba(20,20,20,0.7)`,\r\n  transparentBlack3: `rgba(20,20,20,0.6)`,\r\n  transparentBlack4: `rgba(20,20,20,0.5)`,\r\n  transparentBlack5: `rgba(20,20,20,0.3)`,\r\n\r\n  white: `rgba(245, 245, 245, 1)`,\r\n\r\n  breakpoints: {\r\n    mobile: \"667px\",\r\n    laptop: \"768px\",\r\n    desktop: \"1080px\"\r\n  },\r\n\r\n  unit: \"8\",\r\n\r\n  mode: \"light\",\r\n\r\n  shadow: \"1px 1px 3px 1px rgba(0, 0, 0, 0.5)\"\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nexport const Background = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.gradient};\r\n  height: 100vh;\r\n  justify-content: center;\r\n  justify-items: center;\r\n  display: grid;\r\n  grid-gap: ${props => 2 * props.theme.unit + \"px\"};\r\n  padding-top: 15vh;\r\n  grid-template-rows: ${props => 12 * props.theme.unit + \"px\"} 1fr;\r\n  color: ${props => props.theme.white};\r\n`;\r\n\r\nexport const Head = styled.div`\r\n  text-align: center;\r\n  & > h1 {\r\n    font-size: 3.9rem;\r\n    text-shadow: 3px 3px\r\n      ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent\r\n          : props.theme.transparentBlack5};\r\n    background: ${props =>\r\n      props.theme.mode === \"dark\" ? props.theme.gradient : \"none\"};\r\n    -webkit-background-clip: ${props =>\r\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\r\n    background-clip: ${props =>\r\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\r\n    -webkit-text-fill-color: ${props =>\r\n      props.theme.mode === \"dark\" ? \"transparent\" : \"none\"};\r\n  }\r\n\r\n  & > p {\r\n    font-size: 1rem;\r\n    padding-top: ${props => 1 * props.theme.unit + \"px\"};\r\n    color: ${props => props.theme.transparent5};\r\n  }\r\n  animation: fadeIn 1s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n`;\r\nexport const Body = styled.div`\r\n  animation: fadeIn 1s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  text-align: center;\r\n\r\n  & > p {\r\n    margin-top: ${props => 4 * props.theme.unit + \"px\"};\r\n    color: ${props => props.theme.transparent5};\r\n    cursor: pointer;\r\n  }\r\n\r\n  & > p:hover {\r\n    color: ${props =>\r\n      props.theme.mode === \"dark\" ? props.theme.primary : props.theme.black};\r\n  }\r\n`;\r\nexport const Submit = styled.button`\r\n  border: none;\r\n  padding: ${props => 2 * props.theme.unit + \"px\"};\r\n  font-size: 1rem;\r\n  color: ${props => props.theme.white};\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.transparent\r\n      : props.theme.transparent3};\r\n  & > * {\r\n    text-decoration: none;\r\n  }\r\n\r\n  & > a:visited {\r\n    color: inherit;\r\n  }\r\n`;\r\n\r\nexport const Input = styled.input`\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.primary : props.theme.white};\r\n  margin: 0px;\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.transparent2\r\n      : props.theme.transparent4};\r\n  padding: ${props => 2 * props.theme.unit + \"px\"};\r\n  border: none;\r\n  font-size: 0.8rem;\r\n  text-align: center;\r\n  width: ${props => 26 * props.theme.unit + \"px\"};\r\n  height: 50px;\r\n`;\r\nexport const ShadowWrapper = styled.div`\r\n  box-shadow: 4px 4px\r\n    ${props =>\r\n      props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.gray};\r\n`;\r\n\r\nexport const Button = styled.button`\r\n  background: ${props => props.theme.transparent3};\r\n  margin: 0px;\r\n  padding: ${props => 1 * props.theme.unit + \"px\"};\r\n\r\n  border-radius: 90px;\r\n  border: none;\r\n  font-size: 0.9rem;\r\n  display: flex;\r\n  cursor: pointer;\r\n  color: ${props => props.theme.black};\r\n\r\n  &:hover {\r\n    background-color: ${props => props.theme.white};\r\n  }\r\n  & > * {\r\n    text-decoration: none;\r\n  }\r\n\r\n  & > a:visited {\r\n    color: inherit;\r\n  }\r\n\r\n  & > a {\r\n    margin-top: ${props => 1 * props.theme.unit + \"px\"};\r\n  }\r\n\r\n  &:focus {\r\n    outline: 0;\r\n  }\r\n\r\n  text-justify: center;\r\n  & > img {\r\n    width: 35px;\r\n    margin-right: 10px;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport spotifyLogo from \"../../../images/spotifyLogo.png\";\r\n\r\nimport {\r\n  Background,\r\n  Head,\r\n  Body,\r\n  ShadowWrapper,\r\n  Submit,\r\n  Input,\r\n  Button\r\n} from \"./styles\";\r\n\r\n// process.env.NODE_ENV === \"production\"\r\n//         ? \"https://airplayer.herokuapp.com/auth/login\"\r\n//         : \"http://localhost:8888/auth/login\";\r\n\r\nexport default function Landing(props) {\r\n  const { logout, isAuthenticated } = props;\r\n  return (\r\n    <Background>\r\n      <Head>\r\n        {\" \"}\r\n        <h1>Airplayer</h1>\r\n        <p>Connect to parties in your area</p>\r\n      </Head>\r\n      <Body>\r\n        {isAuthenticated ? (\r\n          <>\r\n            <ShadowWrapper>\r\n              <Input type=\"text\" placeholder=\"Enter your location...\"></Input>\r\n              <Submit>\r\n                <Link to=\"/roomsearch\">Go</Link>\r\n              </Submit>\r\n            </ShadowWrapper>\r\n\r\n            <p onClick={logout}>or click here to logout</p>\r\n          </>\r\n        ) : (\r\n          <Button>\r\n            <img src={spotifyLogo} alt=\"\" />\r\n            <a\r\n              href={\r\n                process.env.NODE_ENV === \"production\"\r\n                  ? \"https://airplayer.herokuapp.com/auth/login\"\r\n                  : \"http://localhost:8888/auth/login\"\r\n              }\r\n            >\r\n              Login With Spotify\r\n            </a>\r\n          </Button>\r\n        )}\r\n      </Body>\r\n    </Background>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst getHashParams = () => {\r\n  let hashParams = {};\r\n  let e,\r\n    r = /([^&;=]+)=?([^&;]*)/g,\r\n    q = window.location.hash.substring(1);\r\n  e = r.exec(q);\r\n  while (e) {\r\n    hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    e = r.exec(q);\r\n  }\r\n  return hashParams;\r\n};\r\n\r\nexport default function Callback(props) {\r\n  const { setAuthData } = props;\r\n\r\n  useEffect(() => {\r\n    const nextAuthData = {\r\n      accessToken: getHashParams().access_token,\r\n      refreshToken: getHashParams().refresh_token,\r\n      accessTokenCreationTime: Date.now()\r\n    };\r\n\r\n    localStorage.setItem(\"authData\", JSON.stringify(nextAuthData));\r\n\r\n    setAuthData({ ...nextAuthData, isAuthenticated: true });\r\n    window.location.href = \"/\";\r\n  }, []);\r\n  return <div></div>;\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport default function List(props) {\r\n  const {\r\n    items = [],\r\n    Style = styled.ul``,\r\n    limit = items ? items.length : 1\r\n  } = props;\r\n\r\n  const ItemProps = function(item, childProps) {\r\n    return Object.fromEntries(\r\n      Object.entries(childProps)\r\n        .filter(([propName]) => propName !== \"Style\")\r\n        .map(([propName, callback]) => {\r\n          // onClick and later other events will pass an evnet and not be fired immediately\r\n          // callbacks are ran immediately\r\n          if (callback) {\r\n            const handler = callback;\r\n            const isEvent = propName.slice(0, 2) === \"on\";\r\n            return isEvent\r\n              ? [propName, (callback = e => handler(e, item))]\r\n              : [propName, (callback = handler(item))];\r\n          } else {\r\n            return [propName, null];\r\n          }\r\n        })\r\n    );\r\n  };\r\n\r\n  const Items = () => (\r\n    <Style>\r\n      {items.length > 0 &&\r\n        props.children &&\r\n        items.slice(0, limit).map((item, i) => {\r\n          return React.cloneElement(props.children, {\r\n            ...ItemProps(item, props.children.props),\r\n            key: i\r\n          });\r\n        })}\r\n    </Style>\r\n  );\r\n\r\n  return <Items></Items>;\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nexport default function ListItem({\r\n  src,\r\n  name,\r\n  labels,\r\n  Style = styled.li``,\r\n  filter = \"\",\r\n  onClick = () => {},\r\n  button = <></>\r\n}) {\r\n  const Labels = () => (\r\n    <ul>\r\n      {labels.map((label, i) => (\r\n        <p key={i}>{label}</p>\r\n      ))}\r\n    </ul>\r\n  );\r\n\r\n  return (\r\n    <Style filter={filter} onClick={(e, item) => onClick(e, item)}>\r\n      {src && <img src={src}></img>}\r\n      <div>\r\n        <h3>{name}</h3>\r\n        {labels && <Labels></Labels>}\r\n      </div>\r\n      {button}\r\n    </Style>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.gradient : props.theme.white};\r\n  border-radius: ${props => (props.show ? \"0\" : \"2rem\")};\r\n  width: ${props => (props.show ? \"100%\" : \"0%\")};\r\n  height: ${props => (props.show ? \"100%\" : \"0%\")};\r\n  bottom: ${props => (props.show ? \"0\" : \"2.5rem\")};\r\n  right: ${props => (props.show ? \"0\" : \"2.5rem\")};\r\n  position: absolute;\r\n  overflow: hidden;\r\n  box-shadow: 2px 3px ${props => props.theme.transparentBlack5};\r\n\r\n  transition: width 0.5s, height 0.5s, bottom 0.5s, right 0.5s;\r\n  & > * {\r\n    opacity: ${props => (props.show ? \"1\" : \"0\")};\r\n\r\n    transition: opacity 0.5s;\r\n    color: ${props => props.theme.black};\r\n  }\r\n\r\n  & > [type=\"icon\"] {\r\n    color: ${props => props.theme.transparentBlack5};\r\n\r\n    font-size: 3rem;\r\n    position: absolute;\r\n    right: 0.5rem;\r\n    top: 0.5rem;\r\n    & :hover {\r\n      color: ${props => props.theme.black};\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Title = styled.p`\r\n  text-align: center;\r\n  padding: 1rem;\r\n  font-size: 2rem;\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.white\r\n      : props.theme.transparentBlack};\r\n`;\r\nexport const Body = styled.div`\r\n  width: 90%;\r\n  height: 75%;\r\n  margin: 0 5%;\r\n`;\r\n","import React from \"react\";\r\nimport { Container, Title, Body } from \"./styles\";\r\nimport { IoIosClose } from \"react-icons/io\";\r\nexport default function Modal(props) {\r\n  const { show, setShow, title, children } = props;\r\n  return (\r\n    <Container show={show}>\r\n      <IoIosClose onClick={() => setShow(false)} type=\"icon\"></IoIosClose>\r\n      <Title>{title}</Title>\r\n      <Body>{children}</Body>\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  text-align: center;\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\r\n`;\r\n\r\nexport const SearchForm = styled.div`\r\n  overflow: hidden !important;\r\n  display: grid;\r\n  grid-gap: 24px;\r\n  height: 100%;\r\n\r\n  & [type=\"container\"] {\r\n    position: relative;\r\n\r\n    & input {\r\n      justify-self: center;\r\n      width: 70%;\r\n      max-width: 500px;\r\n      padding: ${props => 2 * props.theme.unit + \"px\"};\r\n    }\r\n\r\n    & [type=\"icon\"] {\r\n      position: absolute;\r\n      font-size: 2rem;\r\n      top: 8px;\r\n      margin-left: -40px;\r\n\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\r\n    }\r\n  }\r\n`;\r\nexport const CreateForm = styled.form`\r\n  & > p {\r\n    color: ${props =>\r\n      props.theme.mode === \"dark\"\r\n        ? props.theme.white\r\n        : props.theme.transparentBlack};\r\n  }\r\n\r\n  & > input {\r\n    margin: ${props => 1.5 * props.theme.unit + \"px\"} 0;\r\n    width: 300px;\r\n    border: none;\r\n    padding: ${props => 1.5 * props.theme.unit + \"px\"};\r\n    box-shadow: 2px 2px\r\n      ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent\r\n          : props.theme.transparentBlack5};\r\n  }\r\n\r\n  & > [type=\"icon\"] {\r\n    position: absolute;\r\n    font-size: 2rem;\r\n    margin-left: -340px;\r\n    margin-top: 16px;\r\n    color: ${props =>\r\n      props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\r\n  }\r\n`;\r\nexport const CreateButton = styled.button`\r\n  display: block;\r\n  margin: ${props => 2 * props.theme.unit + \"px\"} auto;\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.white};\r\n  padding: 8px 32px;\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.transparent3\r\n      : props.theme.primary};\r\n  border-radius: 1rem;\r\n  font-size: 1.5rem;\r\n  box-shadow: 2px 2px\r\n    ${props =>\r\n      props.theme.mode === \"dark\"\r\n        ? props.theme.transparent\r\n        : props.theme.transparentBlack5};\r\n\r\n  border: none;\r\n  cursor: pointer;\r\n`;\r\n","import styled, { css } from \"styled-components\";\r\nimport { IoIosAdd, IoIosCheckmark } from \"react-icons/io\";\r\n\r\nexport const TickIcon = styled(IoIosCheckmark)`\r\n  position: absolute;\r\n  font-size: 2.5rem;\r\n  transition: none;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.transparent4};\r\n  }\r\n  color: ${props => props.theme.green};\r\n`;\r\nexport const AddIcon = styled(IoIosAdd)`\r\n  position: absolute;\r\n  font-size: 2.5rem;\r\n  transition: none;\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.transparent4};\r\n  }\r\n  color: ${props => props.theme.white};\r\n`;\r\n\r\nexport const IconUnderlay = styled.div`\r\n  border: 1px solid transparent;\r\n  border-radius: 90px;\r\n  background-color: ${props => props.theme.transparentBlack};\r\n\r\n  height: ${props => 6 * props.theme.unit + \"px\"};\r\n  width: ${props => 6 * props.theme.unit + \"px\"};\r\n  position: relative;\r\n`;\r\n\r\nexport const StyledList = styled.ul`\r\n  display: flex;\r\n  overflow-y: hidden;\r\n\r\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\r\n`;\r\n\r\nexport const StyledContainer = styled.div`\r\n  height: ${props => 28 * props.theme.unit + \"px\"};\r\n  overflow-x: scroll;\r\n  overflow-y: hidden;\r\n  scrollbar-width: none;\r\n  ::-webkit-scrollbar {\r\n    width: 0px; /* Remove scrollbar space */\r\n    background: transparent; /* Optional: just make scrollbar invisible */\r\n  }\r\n`;\r\nexport const StyledItem = styled.li`\r\n  list-style: none;\r\n  padding-right: ${props => 2 * props.theme.unit + \"px\"};\r\n  & * {\r\n    padding: ${props => 0.25 * props.theme.unit + \"px\"};\r\n  }\r\n  & img {\r\n    width: ${props => 16 * props.theme.unit + \"px\"};\r\n    height: ${props => 16 * props.theme.unit + \"px\"};\r\n  }\r\n  font-size: 0.8rem;\r\n  & p {\r\n    display: inline;\r\n    text-transform: capitalize;\r\n    color: ${props => props.theme.transparent4};\r\n\r\n    @media (max-width: 667px) {\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent4\r\n          : props.theme.transparentBlack};\r\n    }\r\n  }\r\n`;\r\n\r\nexport const StyledItemContainer = styled.span`\r\n  position: relative;\r\n`;\r\n\r\nexport const StyledPlayButton = styled.div`\r\n  border: 1px solid transparent;\r\n  border-radius: 90px;\r\n  background-color: ${props => props.theme.transparentBlack};\r\n\r\n  height: ${props => 6 * props.theme.unit + \"px\"};\r\n  width: ${props => 6 * props.theme.unit + \"px\"};\r\n  position: relative;\r\n  &::after {\r\n    content: \"\";\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    margin-left: -6px;\r\n    margin-top: -12px;\r\n    width: 0;\r\n    height: 0;\r\n    border-top: 12px solid transparent;\r\n    border-bottom: 12px solid transparent;\r\n    border-left: 16px solid white;\r\n  }\r\n`;\r\nexport const StyledOverlay = styled.div`\r\n  position: absolute;\r\n  top: 0px;\r\n  height: ${props => 16 * props.theme.unit + \"px\"};\r\n  width: ${props => 16 * props.theme.unit + \"px\"};\r\n  align-items: center;\r\n  justify-content: center;\r\n  display: flex;\r\n\r\n  &:hover {\r\n    content: \"\";\r\n    cursor: pointer;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport {\r\n  StyledContainer,\r\n  StyledItem,\r\n  StyledOverlay,\r\n  StyledItemContainer,\r\n  StyledList,\r\n  AddIcon,\r\n  TickIcon,\r\n  IconUnderlay\r\n} from \"./styles\";\r\nimport List from \"../List\";\r\n\r\nexport default function Carousel(props) {\r\n  const { items, height, addItem, removeItem, selectedItems } = props;\r\n\r\n  const ItemTemplate = ({ src, name, labels, uri, selected }) => {\r\n    return (\r\n      <StyledItemContainer>\r\n        {\" \"}\r\n        <StyledItem>\r\n          <img src={src}></img>\r\n          <h4>{name}</h4>\r\n          {labels && labels.map((label, i) => <p key={i}>{label}</p>)}\r\n        </StyledItem>{\" \"}\r\n        <StyledOverlay>\r\n          <IconUnderlay></IconUnderlay>\r\n          {selected ? (\r\n            <TickIcon onClick={() => removeItem(uri)}></TickIcon>\r\n          ) : (\r\n            <AddIcon onClick={() => addItem(uri)}></AddIcon>\r\n          )}\r\n        </StyledOverlay>\r\n      </StyledItemContainer>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <StyledContainer height={height}>\r\n      <List items={items} Style={StyledList}>\r\n        <ItemTemplate\r\n          src={item => item.getImages().default.url}\r\n          name={item => item.name}\r\n          labels={item => item.getArtists().map(artist => artist.name)}\r\n          uri={item => item.uri}\r\n          selected={item =>\r\n            selectedItems && selectedItems.some(obj => obj.uri === item.uri)\r\n          }\r\n        ></ItemTemplate>\r\n      </List>\r\n    </StyledContainer>\r\n  );\r\n}\r\n","String.prototype.replaceAll = function(search, replacement) {\r\n  const target = this;\r\n  return target.split(search).join(replacement);\r\n};\r\n\r\nif (Object.fromEntries === undefined) {\r\n  Object.fromEntries = arr =>\r\n    Object.assign({}, ...Array.from(arr, ([k, v]) => ({ [k]: v })));\r\n}\r\n\r\nfunction isEmpty(obj) {\r\n  for (var key in obj) {\r\n    if (obj.hasOwnProperty(key)) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nconst Spotify = (token, send = true) => {\r\n  const api = \"https://api.spotify.com/v1/\";\r\n\r\n  const request = (query, type, body = \"\") => {\r\n    const options = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-type\": \"application/json\"\r\n      },\r\n      method: type\r\n    };\r\n\r\n    if (type !== \"GET\") {\r\n      options.body = JSON.stringify(body);\r\n    }\r\n    if (send) {\r\n      return fetch(encodeURI(`${api}${query}`), options).then(res =>\r\n        res.json()\r\n      );\r\n    } else {\r\n      options.api = api;\r\n      options.string = encodeURI(query);\r\n      return options;\r\n    }\r\n  };\r\n\r\n  const put = (q, body) => request(q, \"PUT\", body);\r\n  const get = q => request(q, \"GET\");\r\n  const remove = (q, body) => request(q, \"DELETE\", body);\r\n\r\n  const merge = (obj, template) => {\r\n    return Object.entries(obj)\r\n      .map(([k, v]) => template(k, v))\r\n      .join(\",\");\r\n  };\r\n\r\n  const appendOptions = options =>\r\n    merge(options, (k, v) => (v === \"\" ? \"\" : `&${k}=${v}`)).replaceAll(\r\n      \",\",\r\n      \"\"\r\n    );\r\n  const appendConditions = condititions =>\r\n    merge(condititions, (k, v) => `${k}:${v}`).replaceAll(\",\", \" \");\r\n\r\n  const pluralize = str => (str.slice(-1) === \"s\" ? str : `${str}s`);\r\n  const dePluralize = str =>\r\n    str.slice(-1) === \"s\" ? str.slice(0, str.length - 1) : str;\r\n\r\n  const hyphenize = str => str.replace(/[A-Z]/g, m => \"-\" + m.toLowerCase());\r\n  const depthOf = function(object) {\r\n    var level = 1;\r\n    var key;\r\n    for (key in object) {\r\n      if (!object.hasOwnProperty(key)) continue;\r\n\r\n      if (typeof object[key] == \"object\") {\r\n        var depth = depthOf(object[key]) + 1;\r\n        level = Math.max(depth, level);\r\n      }\r\n    }\r\n    return level;\r\n  };\r\n\r\n  const innerKeys = function(o) {\r\n    return Object.keys(o).reduce(function(r, k) {\r\n      return typeof o[k] === \"object\" ? innerKeys(o[k]) : ((r[k] = o[k]), r);\r\n    }, {});\r\n  };\r\n\r\n  const multiSearch = query =>\r\n    Object.keys(innerKeys(query))[0] === \"0\" && depthOf(query) === 4;\r\n\r\n  const singleSearch = query =>\r\n    Object.keys(innerKeys(query))[0] === \"id\" && depthOf(query) === 3;\r\n\r\n  const conditionBased = query =>\r\n    Object.keys(innerKeys(query))[0] === \"id\" && depthOf(query) === 4;\r\n\r\n  const parseOptions = (query, target) =>\r\n    Object.fromEntries(\r\n      Object.entries(query[target]).filter(option => option[0] !== \"where\")\r\n    );\r\n  const findQuery = query => {\r\n    if (conditionBased(query)) {\r\n      const target = Object.keys(query)[0];\r\n      const condition = Object.keys(query[target].where)[0];\r\n      const id = query[target].where[condition].id;\r\n\r\n      const options = parseOptions(query, target);\r\n      return `${pluralize(condition)}/${id}/${hyphenize(target)}${\r\n        isEmpty(options) ? \"\" : `?${appendOptions(options).substring(1)}`\r\n      }`;\r\n    }\r\n    if (singleSearch(query)) {\r\n      const target = Object.keys(query)[0];\r\n      const id = query[target].where.id;\r\n      return `${pluralize(hyphenize(target))}/${id}`;\r\n    }\r\n    if (multiSearch(query)) {\r\n      const target = Object.keys(query)[0];\r\n      const ids = Object.values(innerKeys(query));\r\n      return `${pluralize(hyphenize(target))}?ids=${ids}`;\r\n    }\r\n  };\r\n  return {\r\n    search: ({\r\n      query = \"\",\r\n      type = \"\",\r\n      offset = \"\",\r\n      limit = \"\",\r\n      market = \"\",\r\n      wildcard = false\r\n    }) => {\r\n      const buildQuery = () =>\r\n        typeof query === \"string\"\r\n          ? wildcard\r\n            ? `${query}*`\r\n            : `${query}`\r\n          : typeof query === \"object\"\r\n          ? appendConditions(query)\r\n          : \"\";\r\n\r\n      const queryString = `search?q=${buildQuery()}${appendOptions({\r\n        type: dePluralize(type),\r\n        limit,\r\n        offset,\r\n        market\r\n      })}`;\r\n\r\n      return get(queryString);\r\n    },\r\n\r\n    // browse: query => (send ? get(findQuery) : findQuery(query)),\r\n\r\n    // albums,artists, tracks\r\n    find: query => get(findQuery(query)),\r\n\r\n    // library, follow , personalization , users profile\r\n    user: () => {\r\n      const userQuery = ({\r\n        id = \"\",\r\n        ids = \"\",\r\n        type,\r\n        suffix = \"\",\r\n        prefix = \"\"\r\n      }) =>\r\n        type === \"playlist\"\r\n          ? `playlists/${id ? id : ids}${suffix}`\r\n          : `${prefix}?type=${type}${id || ids ? `&ids=${id ? id : ids}` : \"\"}`;\r\n\r\n      return {\r\n        follows: params =>\r\n          get(userQuery({ ...params, prefix: \"me/following/contains\" })),\r\n\r\n        follow: params =>\r\n          put(\r\n            userQuery({\r\n              ...params,\r\n              suffix: \"/followers\",\r\n              prefix: \"me/following\"\r\n            })\r\n          ),\r\n\r\n        unfollow: params =>\r\n          remove(\r\n            userQuery({\r\n              ...params,\r\n              suffix: \"/followers\",\r\n              prefix: \"me/following\"\r\n            })\r\n          ),\r\n\r\n        getFollowed: params =>\r\n          get(userQuery({ ...params, prefix: \"me/following\" })),\r\n\r\n        library: () => {\r\n          const libraryQuery = query =>\r\n            `me/${typeof query === `string` ? pluralize(query) : query.type}`;\r\n\r\n          const libraryBody = ({ id, ids }) => (ids ? ids : [id]);\r\n\r\n          return {\r\n            contains: ({ id, type, ids }) =>\r\n              get(`me/${pluralize(type)}/contains?ids=${id ? id : ids}`),\r\n            get: query => get(libraryQuery(query)), // not libary.get, refers to function in Spotify() closure\r\n            delete: query => remove(libraryQuery(query), libraryBody(query)),\r\n            add: query => put(libraryQuery(query), libraryBody(query))\r\n          };\r\n        },\r\n        top: type => get(`me/top/${pluralize(type)}`),\r\n        me: () => get(\"me\"),\r\n        playlists: () => get(\"me/playlists\"),\r\n        artists: () => get(\"me/following?type=artist\")\r\n      };\r\n    },\r\n\r\n    playlists: () => {},\r\n    player: () => {}\r\n  };\r\n};\r\n\r\nexport default Spotify;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nexport default function useInterval(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n","import { useEffect, useState } from \"react\";\r\nimport useInterval from \"./useInterval\";\r\n\r\nexport default function useDebounce(callback, delay, dependencies) {\r\n  const [updated, setUpdated] = useState(false);\r\n\r\n  useInterval(\r\n    () => {\r\n      callback();\r\n      setUpdated(false);\r\n    },\r\n    updated ? delay : null\r\n  );\r\n  useEffect(() => {\r\n    setUpdated(true);\r\n  }, dependencies);\r\n}\r\n","const getKey = obj =>\r\n  Object.keys(obj)[0] === undefined ? {} : Object.keys(obj)[0];\r\n\r\nconst getNestedProperty = (prop, results) =>\r\n  Object.assign(\r\n    {},\r\n    ...Object.entries(results).map(entry => {\r\n      return entry[1] === null\r\n        ? { [entry[0]]: [] }\r\n        : {\r\n            [entry[0]]: Object.values({ ...entry[1][prop] })\r\n          };\r\n    })\r\n  );\r\n\r\nconst arrayToObject = (array, names) =>\r\n  names\r\n    ? names.length === array.length\r\n      ? Object.assign(...names.map((k, i) => ({ [k]: array[i] })), {\r\n          [\"default\"]: array[0]\r\n        })\r\n      : Object.assign({}, { [\"default\"]: array[0] })\r\n    : Object.assign({}, { ...array });\r\nexport { getKey, getNestedProperty, arrayToObject };\r\n","import {\r\n  getNestedProperty,\r\n  getKey,\r\n  arrayToObject\r\n} from \"../../helpers/ObjectUtils\";\r\n\r\nimport { msToMinutes } from \"../../helpers/TimeUtils\";\r\n\r\nconst fallbackImages = {\r\n  large: {\r\n    height: 500,\r\n    width: 500,\r\n    url: \"https://i.ibb.co/Hh9dXJQ/medium-removebg-preview.png\"\r\n  },\r\n  medium: {\r\n    height: 300,\r\n    width: 300,\r\n    url: \"https://i.ibb.co/vjZVL4p/large-removebg-preview.png\"\r\n  },\r\n  small: {\r\n    height: 64,\r\n    width: 64,\r\n    url: \"https://i.ibb.co/608nyr6/small-removebg-preview.png\"\r\n  },\r\n  default: {\r\n    height: 500,\r\n    width: 500,\r\n    url: \"https://i.ibb.co/Hh9dXJQ/medium-removebg-preview.png\"\r\n  }\r\n};\r\n\r\nconst ItemPrototype = () => {\r\n  return {\r\n    getArtists: function() {\r\n      switch (this.type) {\r\n        case \"track\":\r\n          return this.album ? this.album.artists : this.artists;\r\n        case \"album\":\r\n          return this.artists;\r\n        case \"artists\":\r\n          return this;\r\n        default:\r\n          return null;\r\n      }\r\n    },\r\n    getImages: function() {\r\n      switch (this.type) {\r\n        case \"track\":\r\n          return this.album\r\n            ? this.album.images.length < 1\r\n              ? arrayToObject(fallbackImages)\r\n              : arrayToObject(this.album.images, [\"large\", \"medium\", \"small\"])\r\n            : this.images\r\n            ? arrayToObject(this.images, [\"large\", \"medium\", \"small\"])\r\n            : arrayToObject(fallbackImages);\r\n        default:\r\n          return this.images.length < 1\r\n            ? arrayToObject(fallbackImages)\r\n            : arrayToObject(this.images, [\"large\", \"medium\", \"small\"]);\r\n      }\r\n    },\r\n    getLabels: function() {\r\n      return [\r\n        this.type,\r\n        this.type === \"playlist\"\r\n          ? this.owner.display_name\r\n          : this.getArtists()\r\n          ? this.getArtists()[0].name\r\n          : null //add duration\r\n      ];\r\n    }\r\n  };\r\n};\r\nexport default function SpotifyHelper(obj) {\r\n  return Object.assign({}, obj, {\r\n    getItems: function() {\r\n      const itemsByType = getNestedProperty(\"items\", obj);\r\n      Object.keys(itemsByType).forEach(type => {\r\n        itemsByType[type].map(item =>\r\n          Reflect.setPrototypeOf(item, ItemPrototype())\r\n        );\r\n      });\r\n      return itemsByType;\r\n    }\r\n  });\r\n}\r\n\r\nexport { ItemPrototype };\r\n","import { useState, useEffect, useCallback } from \"react\";\r\nimport Spotify from \"../../modules/Spotify\";\r\nimport useDebounce from \"../useDebounce\";\r\nimport { getKey } from \"../../helpers/ObjectUtils\";\r\nimport SpotifyHelper from \"../../modules/SpotifyHelper/SpotifyHelper\";\r\n\r\nexport default function useSearch(accessToken) {\r\n  // Store Access\r\n  // Local State\r\n  const [query, setQuery] = useState(\"\");\r\n  const [queryResults, setQueryResults] = useState({\r\n    tracks: {},\r\n    artists: {},\r\n    playlists: {},\r\n    albums: {}\r\n  });\r\n\r\n  // Local Variables\r\n  const spotify = Spotify(accessToken);\r\n\r\n  const getQueries = useCallback(\r\n    async query => {\r\n      const queries = Object.keys(queryResults).map(type =>\r\n        spotify.search({ query, type })\r\n      );\r\n      const results = await Promise.all(queries);\r\n      return Object.assign(\r\n        {},\r\n        ...Object.keys(queryResults).map((query, i) => {\r\n          return {\r\n            [query]:\r\n              getKey(results[i]) === \"error\" ? results[i] : results[i][query]\r\n          };\r\n        })\r\n      );\r\n    },\r\n    [query, queryResults]\r\n  );\r\n\r\n  // Search handler, triggers when query updates, with 200 millisecond delay, and using the latest query to send\r\n  useDebounce(\r\n    () => {\r\n      if (query !== \"\" && accessToken) {\r\n        getQueries(query).then(nextResults => {\r\n          setQueryResults(nextResults);\r\n        });\r\n      }\r\n    },\r\n    200,\r\n    [query, accessToken]\r\n  );\r\n\r\n  return {\r\n    query,\r\n    setQuery,\r\n    queryResults: SpotifyHelper(queryResults).getItems()\r\n  };\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Container, CreateForm, SearchForm, CreateButton } from \"./styles\";\r\nimport { IoIosKey, IoIosPeople, IoIosSearch } from \"react-icons/io\";\r\nimport { GoLocation } from \"react-icons/go\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Carousel from \"../Carousel/Carousel\";\r\nimport useSearch from \"../../hooks/useSearch/useSearch\";\r\n\r\nexport default function CreateRoomForm(props) {\r\n  const initialData = {\r\n    name: \"\",\r\n    password: \"\",\r\n    location: \"\",\r\n    userId: props.user.uri,\r\n    playlist: []\r\n  };\r\n\r\n  const [data, setData] = useState(initialData);\r\n  const [roomState, setRoomState] = useState({\r\n    created: false,\r\n    tracksSelected: false,\r\n    done: false,\r\n    id: null\r\n  });\r\n\r\n  const { query, setQuery, queryResults } = useSearch(props.accessToken);\r\n\r\n  //                stage 1   =>   stage 2        stage 3                  stage 4\r\n  // Form Stages : Enter data =>   created   =>   tracksSelected    =>     done\r\n\r\n  useEffect(() => {\r\n    // Stage 3\r\n    if (roomState.tracksSelected) {\r\n      fetch(\"/api/rooms\", { method: \"POST\", body: JSON.stringify(data) })\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          localStorage.setItem(\"token\", json.token);\r\n          setRoomState({\r\n            done: true,\r\n            id: json.room.id\r\n          });\r\n        });\r\n    }\r\n  }, [roomState.tracksSelected, data]);\r\n\r\n  const addTrack = uri =>\r\n    setData({ ...data, playlist: [...data.playlist, { uri }] });\r\n\r\n  const removeTrack = uri =>\r\n    setData({\r\n      ...data,\r\n      playlist: data.playlist.filter(track => track.uri !== uri)\r\n    });\r\n\r\n  return (\r\n    <>\r\n      {roomState.done ? (\r\n        // Stage 4\r\n        <Redirect to={`room/${roomState.id}`}></Redirect>\r\n      ) : (\r\n        <Container>\r\n          {roomState.created ? (\r\n            //Stage 2\r\n            <SearchForm>\r\n              <div>\r\n                <p>Choose at least 3 tracks to get started</p>\r\n              </div>\r\n\r\n              <div type=\"container\">\r\n                <IoIosSearch type=\"icon\"></IoIosSearch>\r\n                <input\r\n                  type=\"text\"\r\n                  value={query}\r\n                  onChange={e => setQuery(e.target.value)}\r\n                  placeholder=\"Enter a track or artist name...\"\r\n                />\r\n              </div>\r\n\r\n              {queryResults.tracks.length > 0 ? (\r\n                <Carousel\r\n                  addItem={addTrack}\r\n                  removeItem={removeTrack}\r\n                  items={queryResults.tracks}\r\n                  selectedItems={data.playlist}\r\n                ></Carousel>\r\n              ) : query === \"\" ? (\r\n                <></>\r\n              ) : (\r\n                <p>No tracks matching \"{query}\"</p>\r\n              )}\r\n\r\n              {data.playlist.length > 2 ? (\r\n                <CreateButton\r\n                  onClick={() =>\r\n                    setRoomState({ ...roomState, tracksSelected: true })\r\n                  }\r\n                >\r\n                  Enter Room\r\n                </CreateButton>\r\n              ) : null}\r\n            </SearchForm>\r\n          ) : (\r\n            <CreateForm>\r\n              {/* Stage 1 */}\r\n              <p>Name</p>\r\n              <input\r\n                type=\"text\"\r\n                value={data.name}\r\n                placeholder=\"Enter a room name\"\r\n                onChange={e => setData({ ...data, name: e.target.value })}\r\n                required\r\n              />\r\n              <IoIosPeople type=\"icon\"></IoIosPeople>\r\n              <p>Password</p>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Enter a room password\"\r\n                value={data.password}\r\n                onChange={e => setData({ ...data, password: e.target.value })}\r\n              />\r\n              <IoIosKey type=\"icon\"></IoIosKey>\r\n              <p>Location</p>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Enter your location\"\r\n                required\r\n                value={data.location}\r\n                onChange={e => setData({ ...data, location: e.target.value })}\r\n              />\r\n              <GoLocation type=\"icon\"></GoLocation>\r\n              <CreateButton\r\n                type=\"submit\"\r\n                onClick={() => setRoomState({ ...roomState, created: true })}\r\n              >\r\n                Create\r\n              </CreateButton>\r\n            </CreateForm>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Spotify from \"../modules/Spotify\";\r\n\r\nexport default function useProfile(accessToken) {\r\n  const [user, setUser] = useState(null);\r\n\r\n  const spotify = Spotify(accessToken);\r\n\r\n  useEffect(() => {\r\n    if (accessToken)\r\n      spotify\r\n        .user()\r\n        .me()\r\n        .then(data => setUser(data));\r\n  }, [accessToken]);\r\n\r\n  return user;\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport default styled.li`\r\n  background-color: ${props => (props.filter ? props.theme.transparent2 : \"\")};\r\n  font-size: 0.8rem;\r\n  display: grid;\r\n  grid-template-columns: 48px 1fr ${props => (props.button ? \"100px\" : \"96px\")};\r\n  margin-bottom: 15px;\r\n  align-items: center;\r\n  width: 100%;\r\n\r\n  & img {\r\n    height: 48px;\r\n    width: 48px;\r\n  }\r\n  & div {\r\n    padding: 0 0 0 10px;\r\n    overflow: hidden;\r\n    & h3 {\r\n      font-size: 0.8rem;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n    & p {\r\n      display: inline;\r\n      color: ${props => props.theme.transparent4};\r\n      font-weight: 100;\r\n    }\r\n  }\r\n\r\n  & button {\r\n    height: 48px;\r\n    width: 48px;\r\n    background: none;\r\n    border: none;\r\n    color: whitesmoke;\r\n    font-size: 2rem;\r\n    text-align: center;\r\n    text-justify: center;\r\n  }\r\n\r\n  & li {\r\n    display: inline;\r\n    text-transform: capitalize;\r\n  }\r\n  & li:first-child::after {\r\n    content: \"\";\r\n    color: white;\r\n    padding: 0 3px;\r\n  }\r\n`;\r\n","import StyledListItem from \"../../../styles/StyledListItem\";\r\nimport styled from \"styled-components\";\r\nimport List from \"../../../components/List\";\r\n\r\nexport const Background = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode == \"dark\" ? props.theme.black : props.theme.gradient};\r\n  height: 100vh;\r\n  justify-items: center;\r\n  display: grid;\r\n  grid-template-rows: 5rem 2rem 1fr;\r\n  color: ${props => props.theme.white};\r\n\r\n  & > h1 {\r\n    font-size: 3.9rem;\r\n    text-shadow: 3px 3px\r\n      ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent\r\n          : props.theme.transparentBlack5};\r\n    background: ${props =>\r\n      props.theme.mode === \"dark\" ? props.theme.gradient : \"none\"};\r\n    -webkit-background-clip: ${props =>\r\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\r\n    background-clip: ${props =>\r\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\r\n    -webkit-text-fill-color: ${props =>\r\n      props.theme.mode === \"dark\" ? \"transparent\" : \"none\"};\r\n    padding: 8px 0;\r\n  }\r\n  & > p {\r\n    color: ${props => props.theme.transparent5};\r\n    padding-bottom: 16px;\r\n  }\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  display: grid;\r\n  position: relative;\r\n  justify-content: center;\r\n  align-content: center;\r\n  min-width: ${props => 24 * props.theme.unit + \"px\"};\r\n  width: 85vw;\r\n  min-height: ${props => 50 * props.theme.unit + \"px\"};\r\n  /* height: 70vh; */\r\n  margin-bottom: 8vh;\r\n  background-color: ${props => props.theme.transparent2};\r\n  grid-template-rows: ${props => 6 * props.theme.unit + \"px\"} 1fr;\r\n  grid-template-columns: 1fr;\r\n  animation: fadeIn 1s;\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n\r\n  @media (max-width: 440px) {\r\n    width: 98vw;\r\n  }\r\n`;\r\nexport const Head = styled.div`\r\n  display: grid;\r\n  width: 100%;\r\n\r\n  grid-template-columns: 2fr 1fr 1fr;\r\n\r\n  & > input {\r\n    &::placeholder {\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent4\r\n          : props.theme.transparentBlack};\r\n    }\r\n    padding: ${props => 2 * props.theme.unit + \"px\"};\r\n    border: none;\r\n    border-right: 1px solid ${props => props.theme.transparentBlack4};\r\n    background-color: ${props => props.theme.transparent4};\r\n  }\r\n\r\n  & > div {\r\n    display: grid;\r\n    cursor: pointer;\r\n\r\n    grid-template-columns: 1fr 3fr;\r\n    align-items: center;\r\n    background-color: ${props => props.theme.transparentBlack4};\r\n\r\n    & :first-child {\r\n      justify-self: flex-end;\r\n      font-size: 2.3rem;\r\n    }\r\n    & :nth-child(2) {\r\n      justify-self: flex-start;\r\n      font-size: 1.2rem;\r\n    }\r\n  }\r\n\r\n  @media (max-width: 667px) {\r\n    grid-template-columns: 2fr 1fr;\r\n\r\n    & > div {\r\n      display: none;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Body = styled.div`\r\n  & ${List} {\r\n    width: 100%;\r\n\r\n    & li:nth-child(even) {\r\n      background: ${props => props.theme.transparent2};\r\n      height: ${props => 8 * props.theme.unit + \"px\"};\r\n    }\r\n  }\r\n  overflow-x: hidden;\r\n  overflow-y: scroll;\r\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\r\n`;\r\n\r\nexport const ExtendedStyledListItem = styled(StyledListItem)`\r\n  & button {\r\n    background: ${props => props.theme.white};\r\n    color: ${props => props.theme.black};\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    font-size: 0.8rem;\r\n    width: ${props => 10 * props.theme.unit + \"px\"};\r\n    height: ${props => 5 * props.theme.unit + \"px\"};\r\n  }\r\n\r\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\r\n  @media (max-width: 320px) {\r\n    width: 90%;\r\n  }\r\n`;\r\n\r\nexport const Button = styled.div`\r\n  & * {\r\n    text-decoration: none;\r\n    color: ${props => props.theme.transparent4};\r\n    margin-top: 8px;\r\n  }\r\n  font-size: 2.5rem;\r\n  width: 100%;\r\n  & :hover {\r\n    & * {\r\n      color: ${props => props.theme.transparentBlack3};\r\n    }\r\n  }\r\n`;\r\n\r\nexport const CreateButton = styled.div`\r\n  opacity: ${props => (props.show ? 1 : 0)};\r\n  transition: opacity 0.5s;\r\n  position: absolute;\r\n  bottom: 5rem;\r\n  right: 5rem;\r\n\r\n  & :hover {\r\n    color: ${props => props.theme.primary};\r\n  }\r\n  & > [type=\"circle\"] {\r\n    background-color: ${props => props.theme.transparentBlack3};\r\n    width: 5rem;\r\n    height: 5rem;\r\n    position: absolute;\r\n    border-radius: 100%;\r\n  }\r\n  & > [type=\"icon\"] {\r\n    font-size: 5rem;\r\n    position: absolute;\r\n  }\r\n  @media (min-width: 668px) {\r\n    display: none;\r\n  }\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport List from \"../../../components/List\";\r\nimport ListItem from \"../../../components/ListItem\";\r\nimport { IoIosAdd, IoIosLogIn } from \"react-icons/io\";\r\nimport Modal from \"../../../components/Modal/Modal\";\r\nimport CreateRoomForm from \"../../../components/CreateRoomForm/CreateRoomForm\";\r\n\r\nimport useProfile from \"../../../hooks/useProfile\";\r\nimport {\r\n  Background,\r\n  Container,\r\n  Head,\r\n  Body,\r\n  ExtendedStyledListItem,\r\n  Button,\r\n  CreateButton\r\n} from \"./styles\";\r\n\r\nexport default function RoomSearch(props) {\r\n  const [rooms, setRooms] = useState([]);\r\n\r\n  const { accessToken } = props;\r\n  const user = useProfile(accessToken);\r\n\r\n  useEffect(() => {\r\n    fetch(\"/api/rooms\")\r\n      .then(res => res.json())\r\n      .then(data => setRooms(data));\r\n  }, []);\r\n\r\n  const JoinButton = item => (\r\n    <Button>\r\n      <Link to={`/room/${item.id}`}>\r\n        <IoIosLogIn></IoIosLogIn>\r\n      </Link>\r\n    </Button>\r\n  );\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const getTimeSince = start => {\r\n    const minutesSince = Math.round(\r\n      (Date.now() - new Date(start).getTime()) / 1000 / 60\r\n    );\r\n\r\n    if (minutesSince < 2) {\r\n      return \"a few seconds ago\";\r\n    }\r\n    if (minutesSince > 2 && minutesSince < 60) {\r\n      return `${minutesSince} minutes ago`;\r\n    } else {\r\n      return `${Math.round(minutesSince / 60)} hours ago`;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Background>\r\n      <h1>Airplayer</h1>\r\n      <p>Join a room or create your own</p>\r\n      <Container>\r\n        <Head>\r\n          <input placeholder=\"Enter a party Name\" type=\"text\" />\r\n          <input placeholder=\"Change your location\" type=\"text\" />{\" \"}\r\n          {/* Desktop only */}\r\n          <div onClick={() => setShowModal(true)}>\r\n            <IoIosAdd></IoIosAdd>\r\n            <p>Create</p>\r\n          </div>\r\n        </Head>\r\n        <Body>\r\n          <List items={rooms}>\r\n            <ListItem\r\n              Style={ExtendedStyledListItem}\r\n              name={item => item.name}\r\n              src={item =>\r\n                \"https://i.scdn.co/image/f5990a4c6059df42ae7b39b8524cd6ecce334995\"\r\n              }\r\n              labels={item => [\r\n                `Created ${getTimeSince(item.createdAt)} in `,\r\n                item.location\r\n              ]}\r\n              button={item => JoinButton(item)}\r\n            ></ListItem>\r\n          </List>\r\n        </Body>\r\n        {/* Mobile only */}\r\n        <CreateButton show={!showModal} onClick={() => setShowModal(true)}>\r\n          <div type=\"circle\"></div>\r\n          <IoIosAdd type=\"icon\"></IoIosAdd>\r\n        </CreateButton>\r\n\r\n        <Modal show={showModal} title=\"Create a Room\" setShow={setShowModal}>\r\n          {user && (\r\n            <CreateRoomForm\r\n              user={user}\r\n              accessToken={accessToken}\r\n            ></CreateRoomForm>\r\n          )}\r\n        </Modal>\r\n      </Container>\r\n    </Background>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Chevron = styled.span`\r\n  position: absolute;\r\n  &:before {\r\n    border-style: solid;\r\n    border-width: 2px 2px 0 0;\r\n    content: \"\";\r\n    display: inline-block;\r\n    height: 12px;\r\n    left: 0;\r\n    position: relative;\r\n    vertical-align: top;\r\n    width: 12px;\r\n    transform: rotate(45deg);\r\n    visibility: ${props => props.visibility};\r\n  }\r\n`;\r\n","import styled from \"styled-components\";\r\nimport { Chevron } from \"../../../styles/Chevron\";\r\n\r\nexport const Container = styled.div`\r\n  height: calc(100vh - 50px);\r\n  position: relative;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n\r\n  & > * {\r\n    padding: ${props => 2 * props.theme.unit + \"px\"} 0;\r\n  }\r\n  & > h2 {\r\n    font-size: 1.5rem;\r\n    padding-left: ${props => 2 * props.theme.unit + \"px\"};\r\n  }\r\n\r\n  & > ul {\r\n    padding: 0 ${props => 2 * props.theme.unit + \"px\"};\r\n  }\r\n`;\r\n\r\nexport const StyledChevron = styled(Chevron)`\r\n  left: 15px;\r\n  margin-top: 15px;\r\n  &:before {\r\n    transform: rotate(-135deg);\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Container } from \"./styles\";\r\n\r\n// Components\r\nimport Carousel from \"../../../components/Carousel/Carousel\";\r\nimport List from \"../../../components/List\";\r\nimport ListItem from \"../../../components/ListItem\";\r\n\r\nimport StyledListItem from \"../../../styles/StyledListItem\";\r\n\r\nexport default function Home({ room, roomTracks, topTracks, setStartAudio }) {\r\n  const play = (e, item) => {\r\n    room.controller.play(item.uri);\r\n    setStartAudio(true);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <h2>Recommended Tracks</h2>\r\n      <Carousel\r\n        items={topTracks}\r\n        addItem={room.controller.addTrack}\r\n        removeItem={room.controller.removeTrack}\r\n        selectedItems={roomTracks.playlist}\r\n      ></Carousel>\r\n\r\n      <h2>What's up Next</h2>\r\n      {roomTracks.playlist && (\r\n        <List items={roomTracks.playlist}>\r\n          <ListItem\r\n            Style={StyledListItem}\r\n            src={item => item.getImages().default.url}\r\n            name={item => item.name}\r\n            labels={item => item.getArtists().map(artist => artist.name)}\r\n            filter={item =>\r\n              item.uri === roomTracks.currentSong.uri ? \"1\" : \"\"\r\n            }\r\n            onClick={play}\r\n            button={item => (\r\n              <button\r\n                onClick={e => {\r\n                  e.stopPropagation();\r\n                  room.controller.removeTrack(item.uri);\r\n                }}\r\n              >\r\n                {\" \"}\r\n                x\r\n              </button>\r\n            )}\r\n          ></ListItem>\r\n        </List>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\n// TODO add theme to manage colors and padding\r\nexport const Container = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nexport const NoQuery = styled.div`\r\n  display: grid;\r\n  justify-items: center;\r\n  position: relative;\r\n  margin-top: 200px;\r\n`;\r\n","import styled from \"styled-components\";\r\nimport { Chevron } from \"../../styles/Chevron\";\r\n\r\nexport const Container = styled.div`\r\n  font-size: 1rem;\r\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\r\n\r\n  & h2 {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const StyledList = styled.ul`\r\n  font-size: 1rem;\r\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\r\n  & li {\r\n    & button {\r\n      cursor: pointer;\r\n    }\r\n    list-style: none;\r\n    & p {\r\n      text-transform: capitalize;\r\n      color: ${props => props.theme.transparent4};\r\n\r\n      @media (max-width: 667px) {\r\n        color: ${props =>\r\n          props.theme.mode === \"dark\"\r\n            ? props.theme.transparent4\r\n            : props.theme.transparentBlack};\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const StyledChevron = styled(Chevron)`\r\n  right: ${props => 3 * props.theme.unit + \"px\"};\r\n  margin-top: ${props =>\r\n    props.direction === \"right\"\r\n      ? -2.5 * props.theme.unit + \"px\"\r\n      : -3 * props.theme.unit + \"px\"};\r\n  transform: ${props =>\r\n    props.direction === \"right\" ? \"rotate(0deg)\" : \"rotate(180deg)\"};\r\n\r\n  transition: transform 0.2s, margin-top 0.2s;\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\r\n`;\r\n","import React from \"react\";\r\nimport List from \"../List\";\r\nimport ListItem from \"../ListItem\";\r\nimport StyledListItem from \"../../styles/StyledListItem\";\r\nimport { Container, StyledChevron, StyledList } from \"./styles\";\r\n\r\nexport default function Result({\r\n  title,\r\n  items,\r\n  filter,\r\n  limit,\r\n  actions,\r\n  handleItemClick = () => {},\r\n  handleHeaderClick = () => {}\r\n}) {\r\n  const Button = ({ item }) => {\r\n    const action = actions.filter(action => action.type === \"ADD\")[0];\r\n    return action ? (\r\n      <button onClick={() => action.func(item.uri)}>{action.icon}</button>\r\n    ) : null;\r\n  };\r\n  return (\r\n    <Container>\r\n      <h2 onClick={e => handleHeaderClick(e, { title })}>\r\n        {filter !== \"\" && filter !== title ? \"\" : title}\r\n      </h2>\r\n      <StyledChevron\r\n        direction={filter !== \"\" ? \"left\" : \"right\"}\r\n        onClick={e => handleHeaderClick(e, { title })}\r\n      ></StyledChevron>\r\n      <List\r\n        items={items}\r\n        Style={StyledList}\r\n        limit={filter !== title ? limit : items.length}\r\n      >\r\n        <ListItem\r\n          src={item => item.getImages().default.url}\r\n          name={item => item.name}\r\n          labels={item =>\r\n            item.getLabels().map(label => (label ? `${label} ` : \"\"))\r\n          }\r\n          Style={StyledListItem}\r\n          button={actions ? item => <Button item={item}></Button> : null}\r\n          onClick={handleItemClick ? handleItemClick : () => {}}\r\n        ></ListItem>\r\n      </List>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Container, NoQuery } from \"./styles\";\r\nimport Result from \"../Result/Result\";\r\n\r\nfunction isEmpty(obj) {\r\n  for (var key in obj) {\r\n    if (obj.hasOwnProperty(key)) return false;\r\n  }\r\n  return true;\r\n}\r\nexport default function Results(props) {\r\n  const { query, filter, setFilter, limit = 4, results = [] } = props;\r\n\r\n  const noResults = () =>\r\n    results.map(result => isEmpty(result)).filter(bool => bool === false)\r\n      .length < 1;\r\n\r\n  return (\r\n    <Container>\r\n      {query === \"\" ? (\r\n        <NoQuery>\r\n          <p>Please enter a query</p>\r\n        </NoQuery>\r\n      ) : noResults() ? (\r\n        `No results matching ${query}`\r\n      ) : (\r\n        results &&\r\n        results.map(\r\n          (result, i) =>\r\n            (filter == \"\" || filter === result.title) &&\r\n            result.items.length > 1 && (\r\n              <Result\r\n                title={result.title}\r\n                items={result.items}\r\n                filter={filter}\r\n                limit={limit}\r\n                key={i}\r\n                actions={result.actions}\r\n                path={props.path}\r\n                handleItemClick={\r\n                  result.onItemClick ? result.onItemClick : () => {}\r\n                }\r\n                handleHeaderClick={\r\n                  result.onHeaderClick ? result.onHeaderClick : () => {}\r\n                }\r\n              ></Result>\r\n            )\r\n        )\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\n//TODO remove non tracks from room\r\n","import React from \"react\";\r\n\r\n// Components\r\nimport Results from \"./Results/Results\";\r\nimport Result from \"./Result/Result\";\r\n\r\nexport default function SongList(props) {\r\n  const { albums, tracks, artists, playlists } = props.results;\r\n  const {\r\n    foundTracks,\r\n    setFindQuery,\r\n    foundTracksName,\r\n    addTrack,\r\n    removeTrack,\r\n    filter,\r\n    setFilter,\r\n    query\r\n  } = props;\r\n\r\n  const FoundTracks = () => (\r\n    <Result\r\n      {...{\r\n        title: foundTracksName,\r\n        items: foundTracks,\r\n        filter,\r\n        actions: [\r\n          { icon: <>+</>, func: addTrack, type: \"ADD\" },\r\n          { icon: <>-</>, func: removeTrack, type: \"REMOVE\" }\r\n        ],\r\n        handleHeaderClick: function(e) {\r\n          setFindQuery({ name: \"\", uri: \"\" });\r\n        }\r\n      }}\r\n    ></Result>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {foundTracks ? (\r\n        <FoundTracks></FoundTracks>\r\n      ) : (\r\n        <Results\r\n          {...{\r\n            query,\r\n            filter,\r\n            results: [\r\n              {\r\n                title: \"Tracks\",\r\n                items: tracks,\r\n                actions: [\r\n                  { icon: <>+</>, func: addTrack, type: \"ADD\" },\r\n                  { icon: <>-</>, func: removeTrack, type: \"REMOVE\" }\r\n                ],\r\n                onItemClick: (e, item) => console.log(item.id),\r\n                onHeaderClick: function(e, { title }) {\r\n                  setFilter(filter === title ? \"\" : title);\r\n                }\r\n              },\r\n              {\r\n                title: \"Albums\",\r\n                items: albums,\r\n                onItemClick: (e, item) =>\r\n                  setFindQuery({ uri: item.uri, name: item.name }),\r\n                onHeaderClick: function(e, { title }) {\r\n                  setFilter(filter === title ? \"\" : title);\r\n                }\r\n              },\r\n              {\r\n                title: \"Artists\",\r\n                items: artists,\r\n                onItemClick: (e, item) =>\r\n                  setFindQuery({ uri: item.uri, name: item.name }),\r\n\r\n                onHeaderClick: function(e, { title }) {\r\n                  setFilter(filter === title ? \"\" : title);\r\n                }\r\n              },\r\n              {\r\n                title: \"Playlists\",\r\n                items: playlists,\r\n                onItemClick: (e, item) =>\r\n                  setFindQuery({ uri: item.uri, name: item.name }),\r\n                onHeaderClick: function(e, { title }) {\r\n                  setFilter(filter === title ? \"\" : title);\r\n                }\r\n              }\r\n            ]\r\n          }}\r\n        ></Results>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import styled, { css } from \"styled-components\";\r\nimport { IoIosAdd, IoIosCheckmark } from \"react-icons/io\";\r\n\r\nexport const Container = styled.div`\r\n  padding: ${props => 2 * props.theme.unit + \"px\"};\r\n`;\r\n\r\nexport const Icon = css`\r\n  font-size: 3rem;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: ${props => props.theme.transparent3};\r\n  }\r\n  transition: color 0.5s;\r\n`;\r\n\r\nexport const AddIcon = styled(IoIosAdd)`\r\n  ${Icon}\r\n`;\r\n\r\nexport const TickIcon = styled(IoIosCheckmark)`\r\n  ${Icon}\r\n`;\r\n","import React from \"react\";\r\nimport SongList from \"../../../components/SongList\";\r\nimport { Container } from \"./styles\";\r\nexport default function Search(props) {\r\n  return (\r\n    <Container>\r\n      <SongList {...props}></SongList>\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { Chevron } from \"../../../styles/Chevron\";\r\n\r\nexport const Container = styled.div`\r\n  height: calc(100vh - 50px);\r\n  position: relative;\r\n  display: grid;\r\n  align-content: flex-start;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\r\n\r\n  & > h2 {\r\n    font-size: 1.5rem;\r\n    padding-left: ${props => 2 * props.theme.unit + \"px\"};\r\n  }\r\n`;\r\n\r\nexport const StyledChevron = styled(Chevron)`\r\n  left: 15px;\r\n  margin-top: 15px;\r\n  &:before {\r\n    transform: rotate(-135deg);\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { Container } from \"./styles\";\r\n\r\n// Components\r\n\r\nimport Carousel from \"../../../components/Carousel/Carousel\";\r\nimport SongList from \"../../../components/SongList\";\r\n\r\nexport default function Library(props) {\r\n  const { topTracks } = props.results;\r\n  const { selectedTracks, addTrack, removeTrack } = props;\r\n\r\n  return (\r\n    <Container>\r\n      <h2>Last Played</h2>\r\n      <Carousel\r\n        items={topTracks}\r\n        addItem={addTrack}\r\n        removeItem={removeTrack}\r\n        selectedItems={selectedTracks}\r\n      ></Carousel>\r\n      <SongList {...props}></SongList>\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport const Background = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.gradient};\r\n`;\r\n\r\nexport const Spinner = styled(Loader)`\r\n  justify-self: center;\r\n  align-self: center;\r\n  animation: fadeIn 0.5s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  animation: fadeOut 0.5s;\r\n\r\n  @keyframes fadeOut {\r\n    from {\r\n      opacity: 1;\r\n    }\r\n    to {\r\n      opacity: 0;\r\n    }\r\n  }\r\n`;\r\nexport const Container = styled.div`\r\n  animation: fadeIn 1s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  display: grid;\r\n  width: 100%;\r\n  color: ${props => props.theme.white};\r\n  grid-template-columns: minmax(96px, 160px) 1fr;\r\n  grid-template-rows:\r\n    ${props => 6 * props.theme.unit + \"px\"} calc(100vh - 128px)\r\n    ${props => 10 * props.theme.unit + \"px\"};\r\n`;\r\n\r\nexport const Main = styled.main`\r\n  animation: fadeIn 1s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  max-height: calc(100vh - 128px);\r\n  overflow: auto;\r\n`;\r\n\r\nexport const Footer = styled.footer`\r\n  grid-column: span 2;\r\n  color: ${props => props.theme.white};\r\n  height: 100%;\r\n`;\r\n","export default (state, action) => {\r\n  switch (action.type) {\r\n    case \"SET_DEVICE\":\r\n      return {\r\n        ...state,\r\n        id: action.payload.device_id,\r\n        ready: action.payload.ready\r\n      };\r\n\r\n    case \"UPDATE_PLAYER\": {\r\n      const roomState = action.payload.roomState;\r\n      return {\r\n        ...state,\r\n        currentSong: roomState.currentSong.uri,\r\n        paused: !roomState.currentSong.playing,\r\n        playlist: roomState.playlist.map(track => track.uri),\r\n        lastSeek: roomState.currentSong.lastSeek\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nfunction useTimeout(callback, delay) {\r\n  const savedCallback = useRef();\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      let id = setTimeout(tick, delay);\r\n\r\n      return () => clearTimeout(id);\r\n    }\r\n  }, [delay]);\r\n}\r\n\r\nexport default useTimeout;\r\n","import { useEffect, useState, useReducer } from \"react\";\r\n\r\nimport reducer from \"./reducer\";\r\nimport usePlay from \"./usePlay\";\r\nimport useQue from \"./useQue\";\r\nimport useSeek from \"./useSeek\";\r\nimport useSetup from \"./useSetup\";\r\nimport useTogglePause from \"./useTogglePause\";\r\nimport useVolume from \"./useVolume\";\r\n\r\n// This webplayer will control the player by reading state from the room\r\nexport default function useWebplayer(token, room, start, duration) {\r\n  const [deviceState, dispatch] = useReducer(reducer, {\r\n    id: null,\r\n    currentSong: null,\r\n    paused: false,\r\n    ready: false,\r\n    playlist: [],\r\n    lastSeek: 0\r\n  });\r\n\r\n  const [loadScript, setLoadScript] = useState(false);\r\n\r\n  //When a track finishes, que the next track and play\r\n  const { setRemaining, queTrack } = useQue(deviceState, room.controller);\r\n\r\n  // connect player and set up events\r\n  const { player } = useSetup(token, setLoadScript, setRemaining, dispatch);\r\n\r\n  // Change volume\r\n  const { volume, setVolume } = useVolume(player);\r\n\r\n  // When seek position changes update player to seek to that position\r\n  useSeek(deviceState, duration, player);\r\n\r\n  // Play loaded track\r\n  usePlay(deviceState, start, room, token);\r\n\r\n  // Pause/Resume loaded Track\r\n  useTogglePause(deviceState, player);\r\n\r\n  // on room state change, reflect that state in the webplayer\r\n  useEffect(() => {\r\n    dispatch({ type: \"UPDATE_PLAYER\", payload: { roomState: room.state } });\r\n  }, [room.state]);\r\n\r\n  return { deviceState, loadScript, queTrack, volume, setVolume };\r\n}\r\n","import { useCallback, useState, useRef, useEffect } from \"react\";\r\nimport useTimeout from \"../useTimeout\";\r\n\r\nexport default function useQue(deviceState, controller) {\r\n  const skipAttempts = useRef(0);\r\n  const [trackFinished, setTrackFinished] = useState(false);\r\n  const [remaining, setRemaining] = useState(null);\r\n\r\n  const queTrack = useCallback(\r\n    pos => {\r\n      const nextSongIndex = deviceState.playlist.indexOf(\r\n        deviceState.currentSong\r\n      );\r\n      const nextSong = deviceState.playlist[nextSongIndex + pos];\r\n\r\n      if (nextSong) {\r\n        controller.play(nextSong);\r\n        setTimeout(() => (skipAttempts.current = 0), 5000);\r\n      }\r\n    },\r\n    [deviceState]\r\n  );\r\n\r\n  // 1 Second before track finishes, que the next track\r\n  // Workaround for spotify sdk bug\r\n  useTimeout(() => {\r\n    skipAttempts.current += 1;\r\n    setTrackFinished(true);\r\n  }, remaining);\r\n\r\n  //When a track ends, que the next track\r\n  useEffect(() => {\r\n    if (trackFinished == true && skipAttempts.current === 1) {\r\n      queTrack(1);\r\n      setTrackFinished(false);\r\n    }\r\n  });\r\n\r\n  return { setRemaining, queTrack };\r\n}\r\n","import { useState, useEffect } from \"react\";\r\n\r\nexport default function useSetup(token, setLoadScript, setRemaining, dispatch) {\r\n  const [player, setPlayer] = useState();\r\n  // Set up webplayer\r\n  useEffect(() => {\r\n    // Assign event to listen for script to load\r\n    if (!window.onSpotifyWebPlaybackSDKReady) {\r\n      window.onSpotifyWebPlaybackSDKReady = () => {\r\n        const player = new window.Spotify.Player({\r\n          name: \"Web Playback SDK Quick Start Player\",\r\n          getOAuthToken: cb => {\r\n            cb(token);\r\n          }\r\n        });\r\n        player.connect().then(success => {\r\n          success\r\n            ? setPlayer(player)\r\n            : setPlayer({ error: \"Failed to connect\" });\r\n        });\r\n      };\r\n      // Start loading script\r\n      setLoadScript(true);\r\n    }\r\n  }, [player, window.Spotify]);\r\n\r\n  useEffect(() => {\r\n    if (!player) {\r\n    }\r\n  }, [player]);\r\n\r\n  //Player Events\r\n  useEffect(() => {\r\n    if (player) {\r\n      // Error handling\r\n      player.addListener(\"initialization_error\", ({ message }) => {\r\n        console.error(message);\r\n      });\r\n      player.addListener(\"authentication_error\", ({ message }) => {\r\n        console.error(message);\r\n      });\r\n      player.addListener(\"account_error\", ({ message }) => {\r\n        console.error(message);\r\n      });\r\n      player.addListener(\"playback_error\", ({ message }) => {\r\n        console.error(message);\r\n      });\r\n\r\n      // Ready\r\n      player.addListener(\"ready\", ({ device_id }) => {\r\n        console.log(\"Ready with Device ID\", device_id);\r\n        dispatch({ type: \"SET_DEVICE\", payload: { device_id, ready: true } });\r\n      });\r\n\r\n      // Not Ready\r\n      player.addListener(\"not_ready\", ({ device_id }) => {\r\n        dispatch({\r\n          type: \"SET_DEVICE\",\r\n          payload: { device_id, ready: false }\r\n        });\r\n        console.log(\"Device ID has gone offline\", device_id);\r\n      });\r\n    }\r\n  }, [player]);\r\n\r\n  // When device state updates, get current position of track\r\n  useEffect(() => {\r\n    if (player) {\r\n      const handleStateChange = state => {\r\n        setRemaining(state.duration - state.position - 1000);\r\n      };\r\n      player.addListener(\"player_state_changed\", handleStateChange);\r\n      return () =>\r\n        player.removeListener(\"player_state_changed\", handleStateChange);\r\n    }\r\n  }, [player]);\r\n  return { player };\r\n}\r\n","import { useState } from \"react\";\r\nimport useDebounce from \"../useDebounce\";\r\n\r\nexport default function useVolume(player) {\r\n  const [volume, setVolume] = useState(80);\r\n\r\n  useDebounce(\r\n    () => {\r\n      if (player) player.setVolume(volume / 100);\r\n    },\r\n    200,\r\n    [volume]\r\n  );\r\n\r\n  return { volume, setVolume };\r\n}\r\n","import { useEffect } from \"react\";\r\n\r\nexport default function useSeek(deviceState, duration, player) {\r\n  useEffect(() => {\r\n    if (\r\n      deviceState.ready &&\r\n      deviceState.currentSong &&\r\n      duration &&\r\n      deviceState.lastSeek &&\r\n      player\r\n    ) {\r\n      player.seek(deviceState.lastSeek);\r\n    }\r\n  }, [\r\n    deviceState.ready,\r\n    deviceState.currentSong,\r\n    deviceState.lastSeek,\r\n    duration\r\n  ]);\r\n}\r\n","import { useEffect, useCallback } from \"react\";\r\n\r\nexport default function usePlay(deviceState, start, room, token) {\r\n  const play = useCallback(\r\n    async track =>\r\n      fetch(\r\n        `https://api.spotify.com/v1/me/player/play?device_id=${deviceState.id}`,\r\n        {\r\n          method: \"PUT\",\r\n          body: JSON.stringify({\r\n            uris: [track]\r\n          }),\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      ),\r\n    [deviceState.id, token]\r\n  );\r\n\r\n  // Load the first track in the roomstate\r\n  useEffect(() => {\r\n    if (room.state.playlist.length > 0) {\r\n      room.controller.play(room.state.playlist[0].uri);\r\n    }\r\n  }, []);\r\n\r\n  // Play loaded track\r\n  useEffect(() => {\r\n    // start variable is used for toggling autoplay\r\n    if (start) {\r\n      if (deviceState.ready && deviceState.currentSong) {\r\n        play(deviceState.currentSong);\r\n      }\r\n    } else {\r\n      room.controller.pause();\r\n    }\r\n  }, [deviceState.ready, deviceState.currentSong, start]);\r\n}\r\n","import React, { useEffect } from \"react\";\r\n\r\nexport default function useTogglePause(deviceState, player) {\r\n  // Pause/Resume loaded Track\r\n  useEffect(() => {\r\n    if (deviceState.ready && deviceState.currentSong) {\r\n      if (deviceState.paused) {\r\n        player.pause();\r\n      } else {\r\n        player.resume();\r\n      }\r\n    }\r\n  }, [deviceState.ready, deviceState.currentSong, deviceState.paused]);\r\n}\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { IoIosVolumeHigh } from \"react-icons/io\";\r\n\r\nimport Slider from \"react-input-slider\";\r\n\r\nimport \"../global.css\";\r\nimport theme from \"../theme\";\r\n\r\nconst HoverArea = styled.div`\r\n  align-items: center;\r\n  display: grid;\r\n  justify-items: center;\r\n  width: 40px;\r\n  height: 80px;\r\n  z-index: 99999;\r\n`;\r\n\r\nconst SliderBackground = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.transparentBlack\r\n      : props.theme.white};\r\n  opacity: ${props => (props.show ? 1 : 0)};\r\n  height: ${props => (props.show ? \"160px\" : 0)};\r\n  width: 40px;\r\n  border-top-right-radius: 15px;\r\n  border-top-left-radius: 15px;\r\n  position: absolute;\r\n  bottom: 70px;\r\n  right: 0;\r\n  padding: 15px;\r\n  transition: height 0.4s, opacity 0.4s;\r\n  /* hacky way of changing background color for slider*/\r\n  & > div {\r\n    & > div:first-child {\r\n      background: #ffd5e3 !important;\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function VolumeSlider({ volume, setVolume }) {\r\n  const [show, setShow] = useState(false);\r\n\r\n  return (\r\n    <HoverArea\r\n      onMouseEnter={() => setShow(true)}\r\n      onMouseLeave={() => setShow(false)}\r\n    >\r\n      <IoIosVolumeHigh style={{ cursor: \"pointer\" }}></IoIosVolumeHigh>\r\n\r\n      <SliderBackground show={show}>\r\n        <Slider\r\n          axis=\"y\"\r\n          y={100 - volume}\r\n          onChange={({ y }) => setVolume(100 - y)}\r\n          styles={{\r\n            thumb: {\r\n              width: 30,\r\n              height: 6,\r\n              backgroundColor: theme.white,\r\n              borderRadius: \"5px\",\r\n              opacity: show ? 1 : 0,\r\n              transition: \"opacity 0.4s\",\r\n              cursor: \"pointer\",\r\n              boxShadow: \"1px 1px 2px 1px rgba(0, 0, 0, 0.5)\"\r\n            },\r\n            track: {\r\n              backgroundColor: theme.primary,\r\n              height: show ? \"130px\" : \"0px\",\r\n              transition: \"height 0.4s\",\r\n              cursor: \"pointer\"\r\n            }\r\n          }}\r\n        ></Slider>\r\n      </SliderBackground>\r\n    </HoverArea>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Slider = styled.div`\r\n  background: ${props =>\r\n    props.theme.mode === \"dark\"\r\n      ? props.theme.transparent2\r\n      : props.theme.transparentBlack5};\r\n  position: absolute;\r\n  bottom: 80px;\r\n  width: 100%;\r\n  height: 15px;\r\n\r\n  & > input {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 15px;\r\n    z-index: 99;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nexport const ProgressBar = styled.div.attrs(({ width }) => ({\r\n  style: {\r\n    width\r\n  }\r\n}))`\r\n  position: absolute;\r\n  height: 15px;\r\n  background: ${props => props.theme.gradient};\r\n`;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { ProgressBar, Slider } from \"./styles\";\r\nimport \"../../global.css\";\r\n\r\nimport useInterval from \"../../hooks/useInterval\";\r\n\r\nexport default function AudioSlider({\r\n  playing,\r\n  currentSong,\r\n  lastSeek,\r\n  duration,\r\n  seek\r\n}) {\r\n  const [trackPosition, setTrackPosition] = useState();\r\n\r\n  const prevSeek = lastSeek;\r\n  // TODO create new hook that takes in previous state as an argument\r\n  useInterval(\r\n    () => {\r\n      // Necassary due to stale closure\r\n\r\n      // If we have seeked, we move 100ms from last seek\r\n      // if we havent seeked we move 100ms from last trackposition\r\n      setTrackPosition(lastSeek =>\r\n        lastSeek !== prevSeek ? trackPosition + 100 : prevSeek + 100\r\n      );\r\n    },\r\n    playing ? 100 : null\r\n  );\r\n\r\n  useEffect(() => {}, [lastSeek]);\r\n\r\n  useEffect(() => {\r\n    setTrackPosition(lastSeek);\r\n  }, [lastSeek, currentSong]);\r\n\r\n  return (\r\n    <Slider>\r\n      <ProgressBar\r\n        width={\r\n          trackPosition && duration ? (trackPosition / duration) * 100 + \"%\" : 0\r\n        }\r\n      ></ProgressBar>\r\n      <input\r\n        type=\"range\"\r\n        min=\"0\"\r\n        max=\"300\"\r\n        className=\"slider\"\r\n        value={trackPosition && duration ? (trackPosition / duration) * 300 : 0}\r\n        onChange={e => {\r\n          if (duration) {\r\n            const seekDestinationMs = Math.round(\r\n              (parseInt(e.target.value) / 300) * duration\r\n            );\r\n            seek(seekDestinationMs);\r\n          }\r\n        }}\r\n      />\r\n    </Slider>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport const Container = styled.div`\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.white};\r\n\r\n  height: 100%;\r\n  color: ${props => props.theme.black};\r\n  display: grid;\r\n  width: 100%;\r\n  grid-template-rows: 1fr;\r\n`;\r\n\r\nexport const Body = styled.div`\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n`;\r\n\r\nexport const Left = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 80px 1fr;\r\n  align-items: center;\r\n\r\n  & > img {\r\n    width: 80px;\r\n  }\r\n\r\n  & > div {\r\n    padding-left: 15px;\r\n    font-size: 0.8rem;\r\n\r\n    & > h3 {\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.white\r\n          : props.theme.darkestGray};\r\n    }\r\n\r\n    & > p {\r\n      color: ${props => props.theme.gray};\r\n      text-transform: capitalize;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Right = styled.div`\r\n  color: ${props => props.theme.primary};\r\n  font-size: 2rem;\r\n  margin-right: 3rem;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  justify-items: flex-end;\r\n`;\r\n\r\nexport const Spinner = styled(Loader)`\r\n  padding-top: 5px;\r\n  text-align: center;\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.white};\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  IoIosSkipBackward,\r\n  IoIosPlay,\r\n  IoIosSkipForward,\r\n  IoIosPause\r\n} from \"react-icons/io\";\r\n\r\nconst Container = styled.div`\r\n  color: ${props => props.theme.primary};\r\n  font-size: 1.75rem;\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  align-content: space-between;\r\n  justify-items: center;\r\n  width: 240px;\r\n  align-self: center;\r\n  justify-self: center;\r\n  text-align: center;\r\n  text-justify: center;\r\n  & > * {\r\n    cursor: pointer;\r\n  }\r\n\r\n  & > :nth-child(odd) {\r\n    margin-top: 0.625rem;\r\n  }\r\n  & > :nth-child(2) {\r\n    font-size: 3rem;\r\n  }\r\n`;\r\n\r\nexport default function MusicController({\r\n  room,\r\n  queTrack,\r\n  setStart,\r\n  deviceState\r\n}) {\r\n  const isFirstTrack =\r\n    room.state.playlist\r\n      .map(track => track.uri)\r\n      .indexOf(room.state.currentSong.uri) === 0;\r\n\r\n  const isLastTrack =\r\n    room.state.playlist\r\n      .map(track => track.uri)\r\n      .indexOf(room.state.currentSong.uri) ===\r\n    room.state.playlist.length - 1;\r\n\r\n  return (\r\n    <Container>\r\n      {isFirstTrack ? (\r\n        <div></div>\r\n      ) : (\r\n        <IoIosSkipBackward onClick={() => queTrack(-1)}></IoIosSkipBackward>\r\n      )}\r\n\r\n      {deviceState.paused ? (\r\n        <IoIosPlay\r\n          onClick={() => {\r\n            room.controller.resume();\r\n            setStart(true);\r\n          }}\r\n        ></IoIosPlay>\r\n      ) : (\r\n        <IoIosPause\r\n          onClick={() => {\r\n            room.controller.pause();\r\n          }}\r\n        ></IoIosPause>\r\n      )}\r\n      {isLastTrack ? (\r\n        <div></div>\r\n      ) : (\r\n        <IoIosSkipForward onClick={() => queTrack(1)}></IoIosSkipForward>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport Script from \"react-load-script\";\r\nimport useWebplayer from \"../../hooks/useWebplayer/\";\r\nimport theme from \"../../theme\";\r\nimport VolumeSlider from \"../VolumeSlider\";\r\nimport AudioSlider from \"../AudioSlider/AudioSlider\";\r\n\r\nimport { Container, Body, Left, Right, Spinner } from \"./styles\";\r\n\r\nimport MusicController from \"../MusicController\";\r\n\r\nexport default function SpotifyWebplayer({\r\n  token,\r\n  room,\r\n  roomTracks,\r\n  start,\r\n  setStart\r\n}) {\r\n  const [scriptState, setScriptState] = useState({\r\n    error: false\r\n  });\r\n\r\n  const duration = roomTracks.currentSong.duration_ms;\r\n\r\n  const { loadScript, deviceState, queTrack, volume, setVolume } = useWebplayer(\r\n    token,\r\n    room,\r\n    start,\r\n    duration\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {loadScript && (\r\n        <Script\r\n          url=\"https://sdk.scdn.co/spotify-player.js\"\r\n          onError={() => setScriptState({ ...scriptState, error: true })}\r\n          onLoad={() => {\r\n            setScriptState({ ...scriptState, loaded: true });\r\n          }}\r\n        ></Script>\r\n      )}\r\n\r\n      {deviceState.ready ? (\r\n        <Container>\r\n          <AudioSlider\r\n            duration={duration}\r\n            playing={!deviceState.paused}\r\n            lastSeek={deviceState.lastSeek}\r\n            currentSong={deviceState.currentSong}\r\n            seek={room.controller.seek}\r\n          ></AudioSlider>\r\n          <Body>\r\n            <Left>\r\n              <img\r\n                src={roomTracks.currentSong.getImages().default.url}\r\n                alt=\"\"\r\n              />\r\n              <div>\r\n                <h3>{roomTracks.currentSong.name}</h3>\r\n                <p>\r\n                  {roomTracks.currentSong\r\n                    .getArtists()\r\n                    .map(artist => artist.name)}\r\n                </p>\r\n              </div>\r\n            </Left>\r\n            <MusicController\r\n              setStart={setStart}\r\n              room={room}\r\n              queTrack={queTrack}\r\n              deviceState={deviceState}\r\n            ></MusicController>\r\n            <Right>\r\n              <VolumeSlider\r\n                volume={volume}\r\n                setVolume={setVolume}\r\n              ></VolumeSlider>\r\n            </Right>\r\n          </Body>\r\n        </Container>\r\n      ) : (\r\n        <Spinner type=\"Bars\" color={theme.primary} height={70} width={50} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  font-size: 0.6em;\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr 1fr;\r\n  align-content: center;\r\n  align-self: center;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n`;\r\nexport const Button = styled.div`\r\n  cursor: pointer;\r\n  border: 1px solid ${props => props.theme.white};\r\n  border-radius: 90px;\r\n  text-align: center;\r\n  padding: ${props => 1 * props.theme.unit + \"px\"};\r\n  color: ${props => (props.active ? props.theme.black : props.theme.white)};\r\n  background-color: ${props =>\r\n    props.active ? props.theme.white : props.theme.transparent2};\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n    color: ${props => props.theme.black};\r\n    background-color: ${props =>\r\n      props.active ? props.theme.white : props.theme.transparent4};\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { Container, Button } from \"./styles\";\r\n\r\nexport default function SeachFilter({ filter, setFilter }) {\r\n  const RadioButton = ({ text }) => {\r\n    return (\r\n      <Button\r\n        active={filter === text}\r\n        onClick={() => {\r\n          setFilter(filter === text ? \"\" : text);\r\n        }}\r\n      >\r\n        {text}\r\n      </Button>\r\n    );\r\n  };\r\n  return (\r\n    <Container>\r\n      <RadioButton text={\"Tracks\"}></RadioButton>\r\n      <RadioButton text={\"Playlists\"}></RadioButton>\r\n      <RadioButton text={\"Artists\"}></RadioButton>\r\n      <RadioButton text={\"Albums\"}></RadioButton>\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { IoIosPerson } from \"react-icons/io\";\r\n\r\nexport const ProfileIcon = styled(IoIosPerson)`\r\n  border: 2px solid ${props => props.theme.transparent4};\r\n  border-radius: 90px;\r\n  width: ${props => 4 * props.theme.unit + \"px\"};\r\n  height: ${props => 4 * props.theme.unit + \"px\"};\r\n\r\n  cursor: pointer;\r\n  color: ${props => props.theme.transparent4};\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.white};\r\n  }\r\n`;\r\nexport const Container = styled.header`\r\n  padding: ${props => 2 * props.theme.unit + \"px\"};\r\n  grid-template-columns: 2fr 1fr;\r\n  display: grid;\r\n  justify-items: flex-end;\r\n  align-content: center;\r\n`;\r\n\r\nexport const Wrapper = styled.div`\r\n  grid-template-columns: 1fr 1fr;\r\n  display: grid;\r\n  justify-self: flex-start;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n`;\r\n\r\nexport const SearchBar = styled.input`\r\n  padding: ${props => 1 * props.theme.unit + \"px\"};\r\n\r\n  border-radius: 2px;\r\n  background-color: ${props => props.theme.transparent4};\r\n  border: none;\r\n  display: block;\r\n  justify-self: start;\r\n  width: ${props => 34 * props.theme.unit + \"px\"};\r\n`;\r\n","import React from \"react\";\r\nimport SearchFilter from \"../SearchFilter/SeachFilter\";\r\nimport { Container, Wrapper, SearchBar, ProfileIcon } from \"./styles\";\r\n\r\nexport default function DesktopHeader({ filter, setFilter, query, setQuery }) {\r\n  return (\r\n    <Container>\r\n      <Wrapper>\r\n        <SearchBar\r\n          value={query}\r\n          placeholder=\"Search\"\r\n          onChange={e => setQuery(e.target.value)}\r\n        ></SearchBar>\r\n        <SearchFilter filter={filter} setFilter={setFilter}></SearchFilter>\r\n      </Wrapper>\r\n      <ProfileIcon></ProfileIcon>\r\n    </Container>\r\n  );\r\n}\r\n","import styled, { css } from \"styled-components\";\r\nimport { IoIosHome, IoIosSearch, IoIosList } from \"react-icons/io\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const StyledLink = styled(Link)`\r\n  color: ${props => props.theme.white};\r\n  text-decoration: none;\r\n  display: grid;\r\n  justify-self: flex-start;\r\n  grid-template-columns: 2rem 1fr;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n  cursor: pointer;\r\n  color: ${props => props.theme.transparent4};\r\n\r\n  &:hover {\r\n    color: ${props => props.theme.white};\r\n  }\r\n  transition: color 0.4s;\r\n`;\r\nexport const Container = styled.nav`\r\n  grid-row: span 2;\r\n  background-color: ${props => props.theme.transparent};\r\n  display: grid;\r\n  justify-content: center;\r\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\r\n  padding: ${props => 4 * props.theme.unit + \"px\"};\r\n  grid-template-rows: 40px 40px 40px 1fr;\r\n\r\n  & p {\r\n    padding-top: 5px;\r\n    font-size: 1.2rem;\r\n  }\r\n\r\n  & div {\r\n    align-self: flex-end;\r\n\r\n    & button {\r\n      cursor: pointer;\r\n      padding: 8px;\r\n      border: none;\r\n      border-radius: 90px;\r\n      background: ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.gradient\r\n          : props.theme.transparentBlack4};\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\r\n    }\r\n  }\r\n`;\r\n\r\nconst Icon = css`\r\n  font-size: 2rem;\r\n`;\r\n\r\nexport const HomeIcon = styled(IoIosHome)`\r\n  ${Icon}\r\n`;\r\n\r\nexport const SearchIcon = styled(IoIosSearch)`\r\n  ${Icon}\r\n`;\r\n\r\nexport const LibraryIcon = styled(IoIosList)`\r\n  ${Icon}\r\n`;\r\n","import React from \"react\";\r\nimport {\r\n  Container,\r\n  HomeIcon,\r\n  SearchIcon,\r\n  LibraryIcon,\r\n  StyledLink\r\n} from \"./styles\";\r\nexport default function Sidebar({ path, toggleTheme }) {\r\n  const route = window.location.pathname.split(\"/\")[3];\r\n  return (\r\n    <Container>\r\n      <StyledLink to={path}>\r\n        <HomeIcon></HomeIcon>\r\n        <p>Home</p>\r\n      </StyledLink>\r\n      <StyledLink to={`${path}/search`}>\r\n        <SearchIcon></SearchIcon>\r\n        <p>Search</p>{\" \"}\r\n      </StyledLink>\r\n      <StyledLink to={`${path}/library`}>\r\n        <LibraryIcon></LibraryIcon>\r\n        <p>Library</p>\r\n      </StyledLink>\r\n      <div>\r\n        {\" \"}\r\n        <button onClick={toggleTheme}>\r\n          {localStorage.getItem(\"theme\") === \"dark\" ? \"Light\" : \"Dark\"} Mode\r\n        </button>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  & div {\r\n    position: absolute;\r\n    bottom: ${props => 12 * props.theme.unit + \"px\"};\r\n    height: ${props => 6 * props.theme.unit + \"px\"};\r\n    width: 100%;\r\n    transition: opacity 0.7s;\r\n    text-align: center;\r\n    padding: ${props => 1.5 * props.theme.unit + \"px\"};\r\n    pointer-events: none;\r\n  }\r\n`;\r\n\r\nexport const Error = styled.div`\r\n  background-color: ${props => props.theme.red};\r\n  opacity: ${props => (props.active ? 1 : 0)};\r\n`;\r\nexport const Success = styled.div`\r\n  background-color: ${props => props.theme.green};\r\n  opacity: ${props => (props.active ? 1 : 0)};\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Container, Success, Error } from \"./styles\";\r\nimport useTimeout from \"../../hooks/useTimeout\";\r\n\r\nexport default function Message({ success, error }) {\r\n  const [successMessage, setSuccessMessage] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [message, setMessage] = useState({ success: \"\", error: \"\" });\r\n\r\n  const generateSuccessMessage = success => {\r\n    switch (success.type) {\r\n      case \"ADD_TRACK\":\r\n        return \"Added track to playlist\";\r\n      case \"REMOVE_TRACK\":\r\n        return \"Removed Track from playlist\";\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n  const generateErrorMessage = error => {\r\n    switch (error.type) {\r\n      case \"ADD_TRACK\":\r\n        return \"Track already in playlist\";\r\n      case \"REMOVE_TRACK\":\r\n        return \"Track not in playlist\";\r\n    }\r\n  };\r\n\r\n  // set SUccess message when successful event occurs\r\n  useEffect(() => {\r\n    if (success) {\r\n      setMessage({ success: generateSuccessMessage(success), error: \"\" });\r\n    }\r\n  }, [success]);\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      setMessage({ success: \"\", error: generateErrorMessage(error) });\r\n    }\r\n  }, [error]);\r\n\r\n  // After 3 seconds remove success/error message\r\n  useTimeout(() => {\r\n    if (message.success || message.error) {\r\n      setMessage({ error: \"\", success: \"\" });\r\n    }\r\n  }, (message.success || message.error) && 3000);\r\n\r\n  return (\r\n    <Container>\r\n      <Error active={message.error}>{message.error}</Error>\r\n      <Success active={message.success}>{message.success}</Success>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\n// Pages\r\nimport Home from \"../../Desktop/Home/Home\";\r\nimport Search from \"../../Agnostic/Search/Search\";\r\nimport Library from \"../../Agnostic/Library/Library\";\r\n\r\n// Styles\r\nimport { Background, Container, Footer, Main, Spinner } from \"./styles\";\r\nimport theme from \"../../../theme\";\r\n\r\n// Components\r\nimport SpotifyWebplayer from \"../../../components/SpotifyWebplayer/SpotifyWebplayer\";\r\nimport DesktopHeader from \"../../../components/DesktopHeader/DesktopHeader\";\r\nimport Sidebar from \"../../../components/Sidebar/Sidebar.js\";\r\nimport Message from \"../../../components/Message/Message\";\r\n\r\nexport default function RoomView(props) {\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [startAudio, setStartAudio] = useState(false);\r\n\r\n  const {\r\n    query,\r\n    setQuery,\r\n    room,\r\n    roomTracks,\r\n    libraryResults,\r\n    queryResults,\r\n    findResult,\r\n    setFindQuery,\r\n    playerReady,\r\n    accessToken,\r\n    match,\r\n    roomSuccess,\r\n    roomError,\r\n    loaded,\r\n    toggleTheme\r\n  } = props;\r\n\r\n  return (\r\n    <Background>\r\n      <Container>\r\n        <Sidebar path={match.url} toggleTheme={toggleTheme}></Sidebar>\r\n        <DesktopHeader\r\n          filter={filter}\r\n          setFilter={setFilter}\r\n          query={query}\r\n          setQuery={setQuery}\r\n        ></DesktopHeader>\r\n        {loaded ? (\r\n          <Main>\r\n            <>\r\n              <Route\r\n                exact\r\n                path={`${match.path}`}\r\n                component={() => (\r\n                  <Home\r\n                    room={room}\r\n                    setStartAudio={setStartAudio}\r\n                    roomTracks={roomTracks}\r\n                    topTracks={libraryResults.topTracks}\r\n                  ></Home>\r\n                )}\r\n              ></Route>\r\n              <Route\r\n                path={`${match.path}/search`}\r\n                component={() => (\r\n                  <Search\r\n                    results={queryResults}\r\n                    filter={filter}\r\n                    setFilter={setFilter}\r\n                    addTrack={room.controller.addTrack}\r\n                    removeTrack={room.controller.removeTrack}\r\n                    query={query}\r\n                    foundTracksName={findResult.name}\r\n                    foundTracks={findResult.tracks}\r\n                    setFindQuery={setFindQuery}\r\n                  ></Search>\r\n                )}\r\n              ></Route>\r\n              <Route\r\n                path={`${match.path}/library`}\r\n                component={() => (\r\n                  <Library\r\n                    filter={filter}\r\n                    setFilter={setFilter}\r\n                    results={libraryResults}\r\n                    foundTracks={findResult.tracks}\r\n                    setFindQuery={setFindQuery}\r\n                    addTrack={room.controller.addTrack}\r\n                    removeTrack={room.controller.removeTrack}\r\n                    foundTracksName={findResult.name}\r\n                    selectedTracks={roomTracks.playlist}\r\n                  ></Library>\r\n                )}\r\n              ></Route>\r\n            </>\r\n          </Main>\r\n        ) : (\r\n          <Spinner type=\"Bars\" color={theme.white}></Spinner>\r\n        )}\r\n\r\n        <Footer>\r\n          <Message success={roomSuccess} error={roomError}></Message>\r\n          {playerReady && room && room.state.isHost && loaded && (\r\n            <SpotifyWebplayer\r\n              token={accessToken}\r\n              room={room}\r\n              roomTracks={roomTracks}\r\n              start={startAudio}\r\n              setStart={setStartAudio}\r\n            ></SpotifyWebplayer>\r\n          )}\r\n        </Footer>\r\n      </Container>\r\n    </Background>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { Chevron } from \"../../styles/Chevron\";\r\n\r\nexport const Container = styled.div`\r\n  /* background-color: \"black\"; */\r\n  height: calc(100vh - 48px);\r\n  position: relative;\r\n`;\r\nexport const ImageContainer = styled.div`\r\n  /* Used to position Image */\r\n  position: relative;\r\n  top: 0px;\r\n  height: ${props => props.height * 1.2 + \"px\"};\r\n  width: ${props => props.width + \"px\"};\r\n  margin: 0 auto;\r\n  padding: 32px 0;\r\n`;\r\n\r\nexport const ImageWrapper = styled.div`\r\n  /* Adds fade effect to bottom of image*/\r\n\r\n  height: 100%;\r\n  &::before {\r\n    content: \"\";\r\n    background-image: ${props =>\r\n      props.theme.mode === \"dark\"\r\n        ? props.theme.blackFadeGradient\r\n        : props.theme.whiteFadeGradient};\r\n    position: absolute;\r\n    height: 50%; /* based on image height*/\r\n\r\n    /* 1 less pixel than padding amount */\r\n    right: -1px;\r\n    bottom: 31px;\r\n    left: -1px;\r\n  }\r\n  &::after {\r\n    content: \"\";\r\n    display: block;\r\n    height: 100vh;\r\n  }\r\n`;\r\nexport const Image = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: \"contain\";\r\n`;\r\n\r\nexport const Overlay = styled.div`\r\n  /* Container to position Song info*/\r\n\r\n  position: absolute;\r\n  min-height: ${props => 12 * props.theme.unit + \"px\"};\r\n  height: ${props => `calc(100vh - 24px - ${props.height}px)`};\r\n  width: 100%;\r\n  bottom: 0px;\r\n  display: grid;\r\n`;\r\n\r\nexport const SongInfoContainer = styled.div`\r\n  text-align: center;\r\n  text-justify: center;\r\n  align-self: center;\r\n\r\n  & > h1 {\r\n    font-weight: 700;\r\n  }\r\n  & > h5 {\r\n    font-weight: 300;\r\n    font-size: 1.7rem;\r\n    color: ${props =>\r\n      props.theme.mode === \"dark\"\r\n        ? props.theme.transparent4\r\n        : props.theme.transparentBlack2};\r\n  }\r\n  & > p {\r\n    font-weight: 100;\r\n    padding-top: ${props => 1 * props.theme.unit + \"px\"};\r\n    font-size: 1rem;\r\n    color: ${props =>\r\n      props.theme.mode === \"dark\"\r\n        ? props.theme.transparent3\r\n        : props.theme.secondary};\r\n  }\r\n`;\r\n\r\nexport const StyledChevron = styled(Chevron)`\r\n  bottom: ${props => 1 * props.theme.unit + \"px\"};\r\n  left: calc(50% - 8px);\r\n  &:before {\r\n    border-style: solid;\r\n    border-width: 1px 1px 0 0;\r\n    content: \"\";\r\n    display: inline-block;\r\n    height: ${props => 2 * props.theme.unit + \"px\"};\r\n    left: 0;\r\n    position: relative;\r\n    vertical-align: top;\r\n    width: ${props => 2 * props.theme.unit + \"px\"};\r\n    transform: rotate(135deg);\r\n  }\r\n`;\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  Container,\r\n  ImageContainer,\r\n  ImageWrapper,\r\n  Image,\r\n  Overlay,\r\n  SongInfoContainer,\r\n  StyledChevron\r\n} from \"./styles\";\r\n\r\nexport default function CurrentTrack(props) {\r\n  const { AudioVisualizer, title, artist, nextTrack, image } = props;\r\n  return (\r\n    <Container>\r\n      <ImageContainer width={image.width} height={image.height}>\r\n        <ImageWrapper>\r\n          <Image src={image.url} />\r\n        </ImageWrapper>\r\n      </ImageContainer>\r\n      <Overlay height={image.height}>\r\n        <SongInfoContainer>\r\n          <AudioVisualizer />\r\n          <h1>{title}</h1>\r\n          <h5>{artist}</h5>\r\n          <p>\r\n            {\" \"}\r\n            Up next {nextTrack.artist} : {nextTrack.title}\r\n          </p>\r\n        </SongInfoContainer>\r\n      </Overlay>\r\n      <StyledChevron />\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function AudioVisualizer() {\r\n  return <div />;\r\n}\r\n","import styled from \"styled-components\";\r\nimport Loader from \"react-loader-spinner\";\r\nexport const Container = styled.div`\r\n  height: calc(100vh - 50px);\r\n  position: relative;\r\n  display: grid;\r\n`;\r\n\r\nexport const StyledList = styled.ul`\r\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\r\n`;\r\nexport const Spinner = styled(Loader)`\r\n  justify-self: center;\r\n  align-self: center;\r\n`;\r\nexport const StyledItem = styled.li`\r\n  font-size: 0.8rem;\r\n  display: grid;\r\n  grid-template-columns: 48px 1fr 48px;\r\n  margin-bottom: ${props => 2 * props.theme.unit + \"px\"};\r\n  align-items: center;\r\n  width: 100%;\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\" ? \"\" : props.theme.transparent3};\r\n\r\n  & img {\r\n    height: ${props => 6 * props.theme.unit + \"px\"};\r\n    width: ${props => 6 * props.theme.unit + \"px\"};\r\n  }\r\n  & div {\r\n    padding: 0 0 0 ${props => 1 * props.theme.unit + \"px\"};\r\n    overflow: hidden;\r\n    & h3 {\r\n      font-size: 0.8rem;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n    }\r\n    & p {\r\n      display: inline;\r\n      color: ${props =>\r\n        props.theme.mode === \"dark\"\r\n          ? props.theme.transparent4\r\n          : props.theme.transparentBlack};\r\n      font-weight: 100;\r\n      text-transform: capitalize;\r\n    }\r\n  }\r\n\r\n  & button {\r\n    height: ${props => 6 * props.theme.unit + \"px\"};\r\n    width: ${props => 6 * props.theme.unit + \"px\"};\r\n    background: none;\r\n    border: none;\r\n    color: whitesmoke;\r\n    font-size: 2rem;\r\n    text-align: center;\r\n    text-justify: center;\r\n  }\r\n  & li {\r\n    display: inline;\r\n    text-transform: capitalize;\r\n  }\r\n  & li:first-child::after {\r\n    content: \"\";\r\n    color: white;\r\n    padding: 0 3px;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport CurrentTrack from \"../../../components/CurrentTrack/CurrentTrack\";\r\nimport List from \"../../../components/List\";\r\nimport AudioVisualizer from \"../../../components/AudioVisualizer\";\r\nimport { Container, StyledItem, StyledList, Spinner } from \"./styles\";\r\nimport theme from \"../../../theme\";\r\n\r\n// TODO use paralax https://www.youtube.com/watch?v=P5zGTEGPpu4\r\nexport default function Home(props) {\r\n  const ItemTemplate = ({ src, name, labels }) => (\r\n    <StyledItem>\r\n      {src && <img src={src}></img>}\r\n      <div>\r\n        <h3>{name}</h3>\r\n        <ul>{labels && labels.map((label, i) => <p key={i}>{label}</p>)}</ul>\r\n      </div>\r\n\r\n      <button>{\"+\"}</button>\r\n    </StyledItem>\r\n  );\r\n\r\n  const { playlist, currentSong } = props.roomTracks;\r\n\r\n  const nextTrack = (playlist &&\r\n    playlist[\r\n      playlist.indexOf(\r\n        playlist.filter(track => track.uri === currentSong.uri)[0]\r\n      ) + 1\r\n    ]) || { artist: null, title: null };\r\n\r\n  return (\r\n    <Container>\r\n      {currentSong && playlist ? (\r\n        <>\r\n          {\" \"}\r\n          <CurrentTrack\r\n            AudioVisualizer={AudioVisualizer}\r\n            title={currentSong.name}\r\n            artist={currentSong.artists[0].name}\r\n            image={currentSong.getImages().medium}\r\n            nextTrack={{ artist: nextTrack.artist, title: nextTrack.name }}\r\n          ></CurrentTrack>{\" \"}\r\n          <List items={playlist} Style={StyledList}>\r\n            <ItemTemplate\r\n              src={item => item.getImages().default.url}\r\n              name={item => item.name}\r\n              labels={item =>\r\n                item\r\n                  .getLabels()\r\n                  .map(label => `${label} `)\r\n                  .slice(1, 3)\r\n              }\r\n            ></ItemTemplate>\r\n          </List>\r\n        </>\r\n      ) : (\r\n        <Spinner type=\"Bars\" color={theme.white}></Spinner>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Container = styled.div`\r\n  height: calc(100vh - 50px);\r\n  position: relative;\r\n`;\r\n","import React from \"react\";\r\n\r\nexport default function Input(props) {\r\n  return (\r\n    <input\r\n      name={props.name}\r\n      type={props.type}\r\n      placeholder={props.placeholder}\r\n      value={props.value}\r\n      onChange={e => props.setValue(e.target.value)}\r\n    ></input>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const Wrapper = styled.div`\r\n  padding-bottom: ${props => 20 * props.theme.unit + \"px\"};\r\n`;\r\nexport const Container = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-gap: ${props => 2 * props.theme.unit + \"px\"};\r\n  border-bottom: 1px solid ${props => props.theme.white};\r\n  padding: ${props => 2 * props.theme.unit + \"px\"};\r\n  position: fixed;\r\n  background-color: ${props => props.theme.darkestGray};\r\n  background-image: ${props =>\r\n    props.theme.mode === \"light\" && props.theme.gradient};\r\n  z-index: 10;\r\n  & input {\r\n    margin: 0px;\r\n    background-color: ${props => props.theme.transparent};\r\n    border: none;\r\n    border-bottom: 1px solid ${props => props.theme.white};\r\n    width: 100%;\r\n    height: ${props => 8 * props.theme.unit + \"px\"};\r\n    color: ${props => props.theme.white};\r\n    font-size: 2rem;\r\n    padding: ${props => 2 * props.theme.unit + \"px\"};\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport Input from \"../Input/Input\";\r\nimport { Wrapper, Container } from \"./styles\";\r\nimport SearchFilter from \"../SearchFilter/SeachFilter\";\r\n\r\nexport default function SearchBar({ query, setQuery, filter, setFilter }) {\r\n  return (\r\n    <Wrapper>\r\n      <Container>\r\n        <Input value={query} setValue={setQuery}></Input>\r\n        <SearchFilter filter={filter} setFilter={setFilter}></SearchFilter>\r\n      </Container>\r\n    </Wrapper>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\n\r\nimport Results from \"../../../components/Results/Results\";\r\n\r\nimport useSearch from \"../../../hooks/useSearch/useSearch\";\r\n\r\nimport { Container } from \"../../../styles/Container\";\r\nimport SearchBar from \"../../../components/SearchBar/SearchBar\";\r\nexport default function Search() {\r\n  // Local State\r\n  const { query, setQuery, queryResults } = useSearch(\"tobi\");\r\n  const { albums, tracks, artists, playlists } = queryResults;\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  return (\r\n    <Container>\r\n      <SearchBar\r\n        query={query}\r\n        setQuery={setQuery}\r\n        filter={filter}\r\n        setFilter={setFilter}\r\n      ></SearchBar>\r\n      <Results\r\n        {...{\r\n          query,\r\n          filter,\r\n          setFilter,\r\n\r\n          results: [\r\n            { title: \"Albums\", items: albums },\r\n            { title: \"Artists\", items: artists },\r\n            { title: \"Playlists\", items: playlists },\r\n            { title: \"Tracks\", items: tracks }\r\n          ]\r\n        }}\r\n      ></Results>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Row = css`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n  align-content: center;\r\n`;\r\n\r\nconst Body = styled.div`\r\n  ${Row}\r\n  border-top: 1px solid ${props => props.theme.white};\r\n  justify-items: center;\r\n`;\r\nconst Underlay = styled.div`\r\n  ${Row}\r\n  position:absolute;\r\n  top: 0px;\r\n  right: 5px;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  height: ${props => 7 * props.theme.unit + \"px\"};\r\n  width: 100%;\r\n  position: fixed;\r\n  background-color: ${props => props.theme.darkestGray};\r\n  background-image: ${props =>\r\n    props.theme.mode === \"light\" && props.theme.gradient};\r\n  & i {\r\n    color: ${props => props.theme.white};\r\n  }\r\n`;\r\n\r\nexport default function MobileMenu({ path }) {\r\n  return (\r\n    <Container>\r\n      <Body>\r\n        <Underlay>\r\n          <span>|</span>\r\n          <span>|</span>\r\n          <span>|</span>\r\n        </Underlay>\r\n        <Link to={path}>\r\n          <i className=\"fas fa-music\" />\r\n        </Link>\r\n        <Link to={`${path}/search`}>\r\n          <i className=\"fas fa-search\" />\r\n        </Link>\r\n        <Link to={`${path}/library`}>\r\n          <i className=\"fas fa-heart\" />\r\n        </Link>\r\n      </Body>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\nimport Home from \"../Home/Home\";\r\nimport Search from \"../Search/Search\";\r\nimport Library from \"../../Agnostic/Library/Library\";\r\nimport Footer from \"../../../components/MobileMenu\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  animation: fadeIn 1s;\r\n\r\n  @keyframes fadeIn {\r\n    from {\r\n      opacity: 0;\r\n    }\r\n    to {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\r\n\r\n  background-color: ${props =>\r\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.white};\r\n\r\n  font-size: 1.5rem;\r\n  overflow: scroll;\r\n`;\r\n\r\nexport default function RoomView(props) {\r\n  const [filter, setFilter] = useState(\"\");\r\n\r\n  const {\r\n    query,\r\n    setQuery,\r\n    room,\r\n    roomTracks,\r\n    libraryResults,\r\n    queryResults,\r\n    findResult,\r\n    setFindQuery,\r\n    playerReady,\r\n    accessToken,\r\n    match\r\n  } = props;\r\n\r\n  return (\r\n    <Container>\r\n      <Route\r\n        exact\r\n        path={`${match.path}`}\r\n        component={() => <Home roomTracks={roomTracks}></Home>}\r\n      ></Route>\r\n      <Route\r\n        path={`${match.path}/search`}\r\n        component={() => (\r\n          <Search\r\n            results={queryResults}\r\n            filter={filter}\r\n            setFilter={setFilter}\r\n            addTrack={room.controller.addTrack}\r\n            removeTrack={room.controller.removeTrack}\r\n            query={query}\r\n            foundTracksName={findResult.name}\r\n            foundTracks={findResult.tracks}\r\n            setFindQuery={setFindQuery}\r\n          ></Search>\r\n        )}\r\n      ></Route>\r\n      <Route\r\n        path={`${match.path}/library`}\r\n        component={() => (\r\n          <Library\r\n            filter={filter}\r\n            setFilter={setFilter}\r\n            results={libraryResults}\r\n            foundTracks={findResult.tracks}\r\n            setFindQuery={setFindQuery}\r\n            addTrack={room.controller.addTrack}\r\n            removeTrack={room.controller.removeTrack}\r\n            foundTracksName={findResult.name}\r\n            selectedTracks={roomTracks.playlist}\r\n          ></Library>\r\n        )}\r\n      ></Route>\r\n      <Footer path={match.url} />\r\n    </Container>\r\n  );\r\n}\r\n","// Deps\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport DesktopView from \"../../Desktop/RoomView/RoomView\";\r\nimport MobileView from \"../../Mobile/RoomView/RoomView\";\r\n\r\n// Hooks\r\nimport useRoomTracks from \"../../../hooks/useRoomTracks\";\r\nimport useSearch from \"../../../hooks/useSearch/useSearch\";\r\nimport useLibrary from \"../../../hooks/useLibrary\";\r\nimport useFind from \"../../../hooks/useFind\";\r\nimport useBreakpoint from \"../../../hooks/useBreakpoint\";\r\nimport useRoom from \"../../../hooks/useRoom\";\r\nimport useProfile from \"../../../hooks/useProfile\";\r\n\r\nexport default function Room(props) {\r\n  const accessToken = props.accessToken;\r\n  const { room, roomSuccess, roomError } = useRoom();\r\n  const { roomTracks } = useRoomTracks(accessToken, room);\r\n\r\n  const { libraryResults } = useLibrary(accessToken);\r\n  // TODO change to searchQuery\r\n  const { query, setQuery, queryResults } = useSearch(accessToken);\r\n  const [findResult, setFindQuery] = useFind(accessToken);\r\n  const user = useProfile(accessToken);\r\n\r\n  const playerReady =\r\n    accessToken &&\r\n    room.state &&\r\n    room.state.currentSong &&\r\n    roomTracks &&\r\n    roomTracks.currentSong &&\r\n    user;\r\n\r\n  const { breakpoint } = useBreakpoint();\r\n\r\n  // TODO pass user Id\r\n  useEffect(() => {\r\n    if (user) {\r\n      const token = localStorage.getItem(\"token\");\r\n      const id = window.location.pathname.split(\"/\")[2];\r\n      room.controller.joinRoom(id, user.uri, \"\", token ? token : null);\r\n    }\r\n  }, [user]);\r\n  const loaded =\r\n    room &&\r\n    room.state &&\r\n    room.state.currentSong &&\r\n    room.state.currentSong.uri &&\r\n    roomTracks &&\r\n    roomTracks.currentSong &&\r\n    roomTracks.currentSong.uri &&\r\n    libraryResults &&\r\n    (libraryResults.tracks ||\r\n      libraryResults.artists ||\r\n      libraryResults.albums ||\r\n      libraryResults.playlists);\r\n\r\n  const viewProps = {\r\n    loaded,\r\n    playerReady,\r\n    room,\r\n    roomTracks,\r\n    findResult,\r\n    setFindQuery,\r\n    query,\r\n    setQuery,\r\n    queryResults,\r\n    libraryResults,\r\n    accessToken,\r\n    roomSuccess,\r\n    roomError,\r\n    ...props\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {breakpoint === \"mobile\" ? (\r\n        <MobileView {...viewProps}></MobileView>\r\n      ) : (\r\n        <>\r\n          <DesktopView {...viewProps}></DesktopView>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nexport default function useRoom() {\r\n  const socket = io.connect(\r\n    process.env.NODE_ENV === \"production\"\r\n      ? \"https://airplayer.herokuapp.com\"\r\n      : \"http://localhost:8888\"\r\n  );\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccess] = useState({ type: \"\", payload: \"\" });\r\n\r\n  const Controller = socket => {\r\n    // This function is used to create a new controller to manage the room.\r\n    // It has to recreated to inherit the socket closure after a room as been joined\r\n    return {\r\n      joinRoom: (id, userId, password = null, token) =>\r\n        socket.emit(\"JOIN_ROOM\", { id, userId, password, token }),\r\n      addTrack: id => socket.emit(\"ADD_TRACK\", { uri: id }),\r\n      removeTrack: id => socket.emit(\"REMOVE_TRACK\", { uri: id }),\r\n      updatePlaylist: playlist => socket.emit(\"UPDATE_PLAYLIST\", playlist),\r\n      play: id => socket.emit(\"PLAY\", { uri: id }),\r\n      pause: () => socket.emit(\"PAUSE\", null),\r\n      resume: () => socket.emit(\"RESUME\", null),\r\n      seek: destination => socket.emit(\"SEEK\", destination)\r\n    };\r\n  };\r\n\r\n  const [room, setRoom] = useState({\r\n    state: {},\r\n    controller: Controller(socket),\r\n    error: \"\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    socket.on(\"ROOM_CREATED\", payload =>\r\n      setSuccess({ type: \"ROOM_CREATED\", payload, message: \"Room Created\" })\r\n    );\r\n    socket.on(\"ROOM_UPDATED\", nextRoomState => {\r\n      setRoom({\r\n        ...room,\r\n        state: { ...nextRoomState, isHost: socket.id === nextRoomState.host },\r\n        controller: Controller(socket)\r\n      });\r\n    });\r\n    socket.on(\"ERROR\", ({ type, payload, message, code }) =>\r\n      setError({ type, payload, message, code })\r\n    );\r\n    socket.on(\"SUCCESS\", ({ type, payload, message }) =>\r\n      setSuccess({ type, payload, message })\r\n    );\r\n  }, [room]);\r\n\r\n  return { room, roomError: error, roomSuccess: success };\r\n}\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport Spotify from \"../modules/Spotify\";\r\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\r\n\r\nexport default function useRoomTracks(accessToken, room) {\r\n  // Store Access\r\n  // Local State\r\n\r\n  // Local Variables\r\n  const [roomTracks, setRoomTracks] = useState({\r\n    currentSong: null,\r\n    playlist: null\r\n  });\r\n  const spotify = Spotify(accessToken);\r\n\r\n  useEffect(() => {\r\n    if (room && room.state && room.state.currentSong && room.state.playlist) {\r\n      const currentSongPromise = spotify.find({\r\n        track: { where: { id: room.state.currentSong.uri.split(\":\")[2] } }\r\n      });\r\n      const playlistPromise = Promise.all(\r\n        room.state.playlist.map(track =>\r\n          spotify.find({\r\n            track: { where: { id: track.uri.split(\":\")[2] } }\r\n          })\r\n        )\r\n      );\r\n      Promise.all([currentSongPromise, playlistPromise]).then(\r\n        ([currentSong, playlist]) => {\r\n          Reflect.setPrototypeOf(currentSong, ItemPrototype());\r\n\r\n          playlist.map(track => Reflect.setPrototypeOf(track, ItemPrototype()));\r\n          setRoomTracks({\r\n            currentSong,\r\n            playlist\r\n          });\r\n        }\r\n      );\r\n    }\r\n  }, [room.state]);\r\n\r\n  return { roomTracks };\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport Spotify from \"../modules/Spotify\";\r\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\r\n\r\nexport default function useLibrary(accessToken) {\r\n  // Store Access\r\n\r\n  const [libraryResults, setQueryResults] = useState({\r\n    tracks: {},\r\n    artists: {},\r\n    playlists: {},\r\n    albums: {},\r\n    topTracks: {}\r\n  });\r\n\r\n  // Local Variables\r\n  const spotify = Spotify(accessToken);\r\n\r\n  // Search Handler\r\n  useEffect(() => {\r\n    const getQueries = async () => {\r\n      const queries = Object.keys(libraryResults).map(type => {\r\n        switch (type) {\r\n          case \"tracks\":\r\n            return spotify\r\n              .user()\r\n              .library()\r\n              .get(type);\r\n          case \"albums\":\r\n            return spotify\r\n              .user()\r\n              .library()\r\n              .get(type);\r\n          case \"artists\":\r\n            return spotify.user().artists();\r\n          case \"playlists\":\r\n            return spotify.user().playlists();\r\n          case \"topTracks\":\r\n            return spotify.user().top(\"tracks\");\r\n        }\r\n      });\r\n\r\n      const results = await Promise.all(queries);\r\n\r\n      const tracks = results[0].error\r\n        ? []\r\n        : results[0].items.map(item => item.track);\r\n\r\n      const artists = results[1].error ? [] : results[1].artists.items;\r\n      const playlists = results[2].error ? [] : results[2].items;\r\n      const albums = results[3].error\r\n        ? []\r\n        : results[3].items.map(item => item.album);\r\n\r\n      const topTracks = results[4].error ? [] : results[4].items;\r\n\r\n      const nextQueryResults = [tracks, artists, playlists, albums, topTracks];\r\n      nextQueryResults.forEach(results =>\r\n        results.forEach(item => Reflect.setPrototypeOf(item, ItemPrototype()))\r\n      );\r\n      return Object.assign(\r\n        {},\r\n        ...Object.keys(libraryResults).map((query, i) => {\r\n          return {\r\n            [query]: nextQueryResults[i]\r\n          };\r\n        })\r\n      );\r\n    };\r\n    if (accessToken) {\r\n      getQueries().then(nextResults => {\r\n        setQueryResults(nextResults);\r\n      });\r\n    }\r\n  }, [accessToken]);\r\n\r\n  return {\r\n    libraryResults\r\n  };\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Spotify from \"../modules/Spotify\";\r\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\r\n\r\nexport default function useFind(accessToken) {\r\n  const [findQuery, setFindQuery] = useState({ uri: \"\", name: \"\" });\r\n  const [findResult, setFindResult] = useState({ tracks: [], name: \"\" });\r\n\r\n  const spotify = Spotify(accessToken);\r\n\r\n  useEffect(() => {\r\n    const getTracks = async (type, uri) => {\r\n      switch (type) {\r\n        case \"album\":\r\n          return getAlbumTracks(uri);\r\n\r\n        case \"artist\":\r\n          return getArtistTracks(uri);\r\n\r\n        case \"playlist\":\r\n          return getPlaylistTracks(uri);\r\n        default:\r\n          return null;\r\n      }\r\n    };\r\n\r\n    if (findQuery.uri !== \"\") {\r\n      // e.g spotify:albums:123abc => [albums, 123abc]\r\n      const [type, uri] = findQuery.uri.split(\":\").slice(-2);\r\n      getTracks(type, uri).then(tracks => {\r\n        setFindResult({ tracks: tracks, name: findQuery.name });\r\n      });\r\n    } else {\r\n      setFindResult({ tracks: null, name: null });\r\n    }\r\n  }, [findQuery]);\r\n\r\n  const getArtistTracks = async uri => {\r\n    const collection = await spotify.find({\r\n      topTracks: {\r\n        where: { artist: { id: uri } },\r\n        market: \"AU\"\r\n      }\r\n    });\r\n    collection.tracks.forEach(item => {\r\n      Reflect.setPrototypeOf(item, ItemPrototype());\r\n    });\r\n    return collection.tracks;\r\n  };\r\n\r\n  const getPlaylistTracks = async uri => {\r\n    const collection = await spotify.find({\r\n      tracks: { where: { playlist: { id: uri } } }\r\n    });\r\n\r\n    const tracks = collection.items.map(item => item.track);\r\n    tracks.forEach(track => {\r\n      Reflect.setPrototypeOf(track, ItemPrototype());\r\n    });\r\n\r\n    return tracks;\r\n  };\r\n  const getAlbumTracks = async uri => {\r\n    const [collection, album] = await Promise.all([\r\n      spotify.find({\r\n        tracks: {\r\n          where: { albums: { id: uri } }\r\n        }\r\n      }),\r\n      spotify.find({\r\n        album: { where: { id: uri } }\r\n      })\r\n    ]);\r\n\r\n    collection.items.forEach(item => {\r\n      item.images = album.images;\r\n      Reflect.setPrototypeOf(item, ItemPrototype());\r\n    });\r\n    return collection.items;\r\n  };\r\n  return [findResult, setFindQuery];\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport theme from \"../theme\";\r\n\r\nexport default function useBreakpoint() {\r\n  const [breakpoint, setBreakpoint] = useState(\"desktop\");\r\n\r\n  const handleResize = () => {\r\n    const mobile = theme.breakpoints.mobile.substring(\r\n      0,\r\n      theme.breakpoints.mobile.length - 2\r\n    );\r\n    if (window.innerWidth < mobile) {\r\n      setBreakpoint(\"mobile\");\r\n    } else {\r\n      setBreakpoint(\"tablet\");\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  });\r\n\r\n  useEffect(() => handleResize(), []);\r\n\r\n  return { breakpoint };\r\n}\r\n","import { useState } from \"react\";\r\nimport useInterval from \"./useInterval\";\r\n\r\nexport default function useAuth(auth) {\r\n  const anHour = 3600000; // in milliseconds\r\n\r\n  const initialState = {\r\n    accessToken: null,\r\n    refreshToken: null,\r\n    accessTokenCreationTime: null\r\n  };\r\n\r\n  const [authData, setAuthData] = useState(\r\n    auth\r\n      ? {\r\n          ...auth,\r\n          isAuthenticated: Date.now() - auth.accessTokenCreationTime < anHour\r\n        }\r\n      : initialState\r\n  );\r\n\r\n  // pushed into App.js, test later\r\n  //Check local storage for authentication data\r\n  // useEffect(() => {\r\n  //   const prevAuthData = JSON.parse(localStorage.getItem(\"authData\"));\r\n  //   if (prevAuthData) setAuthData(prevAuthData);\r\n  // }, []);\r\n\r\n  const refreshToken = () =>\r\n    fetch(`/auth/refreshToken?refresh_token=${authData.refreshToken}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const nextAuthData = {\r\n          ...authData,\r\n          accessToken: data.access_token,\r\n          accessTokenCreationTime: Date.now()\r\n        };\r\n        localStorage.setItem(\"authData\", JSON.stringify(nextAuthData));\r\n        setAuthData({ ...nextAuthData, isAuthenticated: true });\r\n      });\r\n\r\n  // Refresh token after an hour\r\n  useInterval(\r\n    () => refreshToken(),\r\n    authData.accessTokenCreationTime\r\n      ? authData.accessTokenCreationTime - Date.now() + anHour\r\n      : 5000\r\n  );\r\n\r\n  const logout = () => {\r\n    const url = \"https://www.spotify.com/logout/\";\r\n    const spotifyWindow = window.open(\r\n      url,\r\n      \"Spotify Logout\",\r\n      \"width=700,height=500,top=40,left=40\"\r\n    );\r\n\r\n    setTimeout(() => {\r\n      spotifyWindow.close();\r\n      localStorage.removeItem(\"authData\");\r\n      setAuthData(initialState);\r\n      window.location.reload();\r\n    }, 2000);\r\n  };\r\n  return {\r\n    logout,\r\n    authData,\r\n    setAuthData,\r\n    isAuthenticated: authData.isAuthenticated,\r\n    accessToken: authData.accessToken\r\n  };\r\n}\r\n","// Dependencies\r\nimport React, { useState } from \"react\";\r\nimport { hot } from \"react-hot-loader\"; // used to fix hot reload issues with styled components during development\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { ThemeProvider } from \"styled-components\";\r\nimport theme from \"./theme\";\r\n\r\n//Routes\r\nimport Landing from \"./pages/Agnostic/Landing/Landing\";\r\nimport Callback from \"./pages/Agnostic/Callback\";\r\nimport RoomSearch from \"./pages/Agnostic/RoomSearch/RoomSearch\";\r\n\r\n//Reducers\r\n\r\nimport Room from \"./pages/Agnostic/Room/Room\";\r\n\r\nimport useAuth from \"./hooks/useAuth\";\r\n//Styles\r\nimport \"./global.css\";\r\nconst prevAuthData = JSON.parse(localStorage.getItem(\"authData\"));\r\n\r\n// const App = hot(module)(() => { // For development, effects styled components\r\nconst App = () => {\r\n  const { accessToken, logout, setAuthData, isAuthenticated } = useAuth(\r\n    prevAuthData\r\n  );\r\n  const activeTheme = localStorage.getItem(\"theme\");\r\n  const toggleTheme = () => {\r\n    localStorage.setItem(\r\n      \"theme\",\r\n      activeTheme === \"light\" || activeTheme === null ? \"dark\" : \"light\"\r\n    );\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <ThemeProvider\r\n      theme={\r\n        activeTheme === \"light\" || activeTheme === null\r\n          ? theme\r\n          : { ...theme, mode: \"dark\" }\r\n      }\r\n    >\r\n      <Router>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          component={props => (\r\n            <Landing\r\n              {...props}\r\n              logout={logout}\r\n              accessToken={accessToken}\r\n              isAuthenticated={isAuthenticated}\r\n            ></Landing>\r\n          )}\r\n        />\r\n        <Route\r\n          path=\"/roomsearch\"\r\n          component={() => <RoomSearch accessToken={accessToken}></RoomSearch>}\r\n        />\r\n\r\n        <Route\r\n          path=\"/room/:roomid\"\r\n          component={props => (\r\n            <Room\r\n              {...props}\r\n              toggleTheme={toggleTheme}\r\n              accessToken={accessToken}\r\n            ></Room>\r\n          )}\r\n        />\r\n\r\n        <Route\r\n          path=\"/auth/callback\"\r\n          component={props => (\r\n            <Callback\r\n              {...props}\r\n              isAuthenticated={isAuthenticated}\r\n              setAuthData={setAuthData}\r\n            ></Callback>\r\n          )}\r\n        />\r\n      </Router>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n//   );\r\n// });\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/spotifyLogo.ddd851ef.png\";"],"sourceRoot":""}