{"version":3,"sources":["theme.js","modules/Auth.js","pages/Agnostic/Landing/styles.js","pages/Agnostic/Landing/Landing.js","pages/Agnostic/Callback.js","components/List.js","components/ListItem.js","components/Modal/styles.js","components/Modal/Modal.js","components/CreateRoomForm/styles.js","components/Carousel/styles.js","components/Carousel/Carousel.js","modules/Spotify/index.js","hooks/useInterval.js","hooks/useDebounce.js","helpers/ObjectUtils.js","modules/SpotifyHelper/SpotifyHelper.js","hooks/useSearch/useSearch.js","components/CreateRoomForm/CreateRoomForm.js","hooks/useProfile.js","styles/StyledListItem.js","pages/Agnostic/RoomSearch/styles.js","pages/Agnostic/RoomSearch/RoomSearch.js","styles/Chevron.js","pages/Desktop/Home/styles.js","pages/Desktop/Home/Home.js","components/Results/styles.js","components/Result/styles.js","components/Result/Result.js","components/Results/Results.js","components/SongList.js","pages/Agnostic/Search/styles.js","pages/Agnostic/Search/Search.js","modules/deviceHasHeader.js","pages/Agnostic/Library/styles.js","pages/Agnostic/Library/Library.js","pages/Desktop/RoomView/styles.js","hooks/useWebplayer/reducer.js","hooks/useTimeout.js","hooks/useWebplayer/index.js","hooks/useWebplayer/useQue.js","hooks/useWebplayer/useSetup.js","hooks/useWebplayer/useVolume.js","hooks/useWebplayer/useSeek.js","hooks/useWebplayer/usePlay.js","hooks/useWebplayer/useTogglePause.js","components/VolumeSlider.js","components/AudioSlider/styles.js","components/AudioSlider/AudioSlider.js","components/SpotifyWebplayer/styles.js","components/MusicController.js","components/SpotifyWebplayer/SpotifyWebplayer.js","components/SearchFilter/styles.js","components/SearchFilter/SeachFilter.js","components/DesktopHeader/styles.js","components/DesktopHeader/DesktopHeader.js","components/Sidebar/styles.js","components/Sidebar/Sidebar.js","components/Message/styles.js","components/Message/Message.js","pages/Desktop/RoomView/RoomView.js","components/CurrentTrack/styles.js","components/CurrentTrack/CurrentTrack.js","components/AudioVisualizer.js","pages/Mobile/Home/styles.js","pages/Mobile/Home/Home.js","components/SearchBar/styles.js","components/SearchBar/SearchBar.js","hooks/useFind.js","pages/Mobile/Search/Search.js","components/MobileMenu.js","pages/Mobile/RoomView/RoomView.js","pages/Agnostic/Room/Room.js","hooks/useRoom.js","hooks/useRoomTracks.js","hooks/useLibrary.js","hooks/useBreakpoint.js","App.js","serviceWorker.js","index.js","images/spotifyLogo.png"],"names":["theme","primary","secondary","black","gradient","blackFadeGradient","whiteFadeGradient","darkestGray","darkerGray","darkGray","gray","lightGray","lighterGray","green","red","transparent5","transparent4","transparent3","transparent2","transparent","transparentBlack","transparentBlack2","transparentBlack3","transparentBlack4","transparentBlack5","white","breakpoints","mobile","laptop","desktop","unit","mode","shadow","getHashParams","e","hashParams","r","q","window","location","hash","substring","exec","decodeURIComponent","Auth","accessToken","refreshToken","accessTokenCreationTime","refreshTimer","cacheAuthData","authData","localStorage","getItem","Object","assign","this","JSON","parse","refreshAccessToken","_this","fetch","concat","then","res","json","data","nextAuthData","access_token","Date","now","setItem","stringify","startRefreshTimer","_this2","clearInterval","setInterval","anHour","init","login","refresh_token","logout","spotifyWindow","open","setTimeout","close","removeItem","reload","Background","styled","div","_templateObject","props","Head","_templateObject2","Body","_templateObject3","Submit","button","_templateObject4","Button","input","_templateObject5","_templateObject6","_templateObject7","Landing","react_default","a","createElement","auth","Fragment","react_router_dom","to","onClick","styles_Button","src","spotifyLogo","alt","href","Callback","useEffect","console","log","List","_props$items","items","_props$Style","Style","ul","List_templateObject","_props$limit","limit","length","children","slice","map","item","i","React","cloneElement","objectSpread","childProps","fromEntries","entries","filter","_ref","slicedToArray","_ref3","_ref4","propName","callback","handler","ItemProps","key","ListItem","name","labels","_ref$Style","li","ListItem_templateObject","_ref$filter","_ref$onClick","_ref$button","label","Container","styles_templateObject","show","Title","p","styles_templateObject2","styles_templateObject3","Modal","setShow","title","index_esm","type","styles_Body","CreateRoomForm_styles_templateObject","SearchForm","CreateRoomForm_styles_templateObject2","CreateForm","form","CreateRoomForm_styles_templateObject3","CreateButton","styles_templateObject4","TickIcon","IoIosCheckmark","Carousel_styles_templateObject","AddIcon","IoIosAdd","Carousel_styles_templateObject2","IconUnderlay","Carousel_styles_templateObject3","StyledList","Carousel_styles_templateObject4","StyledContainer","styles_templateObject5","StyledItem","styles_templateObject6","StyledItemContainer","span","styles_templateObject7","StyledOverlay","_templateObject8","_templateObject9","Carousel","height","addItem","selectedItems","uri","selected","getImages","default","url","getArtists","artist","some","obj","String","prototype","replaceAll","search","replacement","split","join","undefined","arr","apply","toConsumableArray","Array","from","_ref2","k","v","defineProperty","Spotify","token","send","arguments","api","request","query","body","options","headers","Authorization","Content-type","method","encodeURI","string","put","get","remove","merge","template","_ref5","appendOptions","pluralize","str","hyphenize","replace","m","toLowerCase","depthOf","object","level","hasOwnProperty","depth","Math","max","innerKeys","o","keys","reduce","findQuery","conditionBased","target","condition","where","id","option","parseOptions","isEmpty","singleSearch","multiSearch","ids","values","_ref6","_ref6$query","_ref6$type","_ref6$offset","offset","_ref6$limit","_ref6$market","market","_ref6$wildcard","wildcard","queryString","find","user","userQuery","_ref7","_ref7$id","_ref7$ids","_ref7$suffix","suffix","_ref7$prefix","prefix","follows","params","follow","unfollow","getFollowed","library","libraryQuery","libraryBody","_ref8","contains","_ref9","delete","add","top","me","playlists","artists","player","useInterval","delay","savedCallback","useRef","current","useDebounce","cb","dependencies","_useState","useState","_useState2","updated","setUpdated","useCallback","getKey","getNestedProperty","prop","results","entry","arrayToObject","array","names","fallbackImages","large","width","medium","small","ItemPrototype","album","images","getLabels","owner","display_name","useSearch","setQuery","_useState3","tracks","albums","_useState4","queryResults","setQueryResults","spotify","getQueries","asyncToGenerator","regenerator_default","mark","_callee","queries","wrap","_context","prev","next","Promise","all","sent","abrupt","stop","_x","nextResults","document","activeElement","blur","addEventListener","removeEventListener","getItems","itemsByType","forEach","Reflect","setPrototypeOf","CreateRoomForm","initialData","password","userId","playlist","setData","created","tracksSelected","done","roomState","setRoomState","_useSearch","dataWithoutPassword","objectWithoutProperties","tokens","room","react_router","styles_Container","value","onChange","placeholder","track","required","useProfile","setUser","StyledListItem_templateObject","RoomSearch_styles_templateObject","RoomSearch_styles_templateObject2","RoomSearch_styles_templateObject3","RoomSearch_styles_templateObject4","ExtendedStyledListItem","StyledListItem","RoomSearch_styles_templateObject5","RoomSearch_styles_templateObject6","RoomSearch_styles_templateObject7","RoomSearch","rooms","setRooms","getMinutesSince","start","round","getTime","getTimeSince","minutesSince","reverse","createdAt","resultFilter","setResultFilter","_useState5","_useState6","showModal","setShowModal","styles_Background","RoomSearch_styles_Container","styles_Head","RoomSearch_styles_Body","includes","RoomSearch_styles_Button","JoinButton","Chevron","Chevron_templateObject","visibility","Home_styles_templateObject","Home_styles_templateObject2","Home","roomTracks","topTracks","setStartAudio","Home_styles_Container","controller","addTrack","removeTrack","currentSong","play","stopPropagation","Results_styles_templateObject","NoQuery","Results_styles_templateObject2","Result_styles_templateObject","Result_styles_templateObject2","StyledChevron","Result_styles_templateObject3","direction","Result","actions","_ref$handleItemClick","handleItemClick","_ref$handleHeaderClic","handleHeaderClick","action","func","icon","Result_styles_Container","styles_StyledChevron","Results","setFilter","_props$results","Results_styles_Container","result","bool","path","onItemClick","onHeaderClick","SongList","foundTracks","setFindQuery","foundTracksName","Search_styles_templateObject","Icon","css","Search_styles_templateObject2","Search_styles_templateObject3","Search_styles_templateObject4","Search","Search_styles_Container","deviceHasHeader","ua","navigator","userAgent","test","Library_styles_templateObject","Library_styles_templateObject2","Library","selectedTracks","Library_styles_Container","RoomView_styles_templateObject","Spinner","Loader","RoomView_styles_templateObject2","RoomView_styles_templateObject3","Main","main","RoomView_styles_templateObject4","Footer","footer","RoomView_styles_templateObject5","reducer","state","payload","device_id","ready","paused","playing","lastSeek","useTimeout","clearTimeout","useWebplayer","duration","_useReducer","useReducer","_useReducer2","deviceState","dispatch","loadScript","setLoadScript","_useQue","skipAttempts","trackFinished","setTrackFinished","remaining","setRemaining","queTrack","pos","nextSongIndex","indexOf","nextSong","useQue","setPlayer","onSpotifyWebPlaybackSDKReady","Player","getOAuthToken","connect","success","error","addListener","message","handleStateChange","position","removeListener","useSetup","_useVolume","volume","setVolume","useVolume","seek","useSeek","uris","Content-Type","pause","usePlay","resume","useTogglePause","HoverArea","VolumeSlider_templateObject","SliderBackground","VolumeSlider_templateObject2","VolumeSlider","onMouseEnter","onMouseLeave","style","cursor","dist_index_esm","axis","y","styles","thumb","backgroundColor","borderRadius","opacity","transition","boxShadow","Slider","AudioSlider_styles_templateObject","ProgressBar","attrs","AudioSlider_styles_templateObject2","AudioSlider","trackPosition","setTrackPosition","prevSeek","min","className","seekDestinationMs","parseInt","SpotifyWebplayer_styles_templateObject","SpotifyWebplayer_styles_templateObject2","Left","SpotifyWebplayer_styles_templateObject3","Right","SpotifyWebplayer_styles_templateObject4","SpotifyWebplayer_styles_templateObject5","MusicController_templateObject","MusicController","setStart","isFirstTrack","isLastTrack","MusicController_Container","SpotifyWebplayer","scriptState","setScriptState","duration_ms","_useWebplayer","lib_default","onError","onLoad","loaded","SpotifyWebplayer_styles_Container","SpotifyWebplayer_styles_Body","styles_Spinner","color","SearchFilter_styles_templateObject","SearchFilter_styles_templateObject2","active","SeachFilter","RadioButton","text","SearchFilter_styles_Button","SearchFilter_styles_Container","ProfileIcon","IoIosPerson","DesktopHeader_styles_templateObject","header","DesktopHeader_styles_templateObject2","Wrapper","DesktopHeader_styles_templateObject3","SearchBar","DesktopHeader_styles_templateObject4","DesktopHeader","DesktopHeader_styles_Container","StyledLink","Link","Sidebar_styles_templateObject","nav","Sidebar_styles_templateObject2","Sidebar_styles_templateObject3","HomeIcon","IoIosHome","Sidebar_styles_templateObject4","SearchIcon","IoIosSearch","Sidebar_styles_templateObject5","LibraryIcon","IoIosList","Sidebar_styles_templateObject6","Sidebar","toggleTheme","Sidebar_styles_Container","Message_styles_templateObject","Error","Message_styles_templateObject2","Success","Message_styles_templateObject3","Message","setMessage","generateSuccessMessage","generateErrorMessage","Message_styles_Container","RoomView","startAudio","libraryResults","findResult","playerReady","match","roomSuccess","roomError","RoomView_styles_Background","RoomView_styles_Container","exact","component","isHost","CurrentTrack_styles_templateObject","ImageContainer","CurrentTrack_styles_templateObject2","ImageWrapper","CurrentTrack_styles_templateObject3","Image","img","CurrentTrack_styles_templateObject4","Overlay","CurrentTrack_styles_templateObject5","SongInfoContainer","CurrentTrack_styles_templateObject6","CurrentTrack_styles_templateObject7","CurrentTrack","AudioVisualizer","nextTrack","image","CurrentTrack_styles_Container","CurrentTrack_styles_StyledChevron","Mobile_Home_styles_templateObject","Mobile_Home_styles_templateObject2","Home_styles_templateObject3","Home_styles_templateObject4","_props$roomTracks","Mobile_Home_styles_Container","styles_StyledItem","Home_styles_Spinner","SearchBar_styles_templateObject","SearchBar_styles_templateObject2","styles_Wrapper","SearchBar_styles_Container","useFind","setFindResult","getTracks","t0","getAlbumTracks","getArtistTracks","getPlaylistTracks","_x2","_findQuery$uri$split$","_findQuery$uri$split$2","_callee2","collection","_context2","_x3","_callee3","_context3","_x4","_callee4","_context4","_x5","Search_templateObject","_useFind","_useFind2","nextProps","Search_Container","SearchBar_SearchBar","Row","MobileMenu_templateObject","MobileMenu_templateObject2","Underlay","MobileMenu_templateObject3","MobileMenu_templateObject4","MobileMenu","MobileMenu_Container","MobileMenu_Body","RoomView_templateObject","RoomView_Container","Home_Home","Search_Search","Room","_useRoom","socket","io","setError","setSuccess","Controller","joinRoom","emit","updatePlaylist","destination","setRoom","on","nextRoomState","host","code","useRoom","setRoomTracks","currentSongPromise","playlistPromise","useRoomTracks","nextQueryResults","useLibrary","breakpoint","setBreakpoint","handleResize","innerWidth","useBreakpoint","pathname","viewProps","RoomView_RoomView","App","activeTheme","styled_components_browser_esm","Boolean","hostname","ReactDOM","render","src_App","getElementById","serviceWorker","registration","unregister","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.d771c173.chunk.js","sourcesContent":["export default {\n  primary: \"rgba(242, 162, 176)\",\n  secondary: \"rgba(242,182,147)\",\n  black: `rgba(20, 20, 20, 1)`,\n\n  gradient: `linear-gradient(to top left, rgba(242, 182, 147), rgba(242, 162, 176))`,\n  blackFadeGradient: `linear-gradient(\n    to top,\n    rgba(20, 20, 20, 1),\n    rgba(20, 20, 20, 0)\n  )`,\n  whiteFadeGradient: `linear-gradient(\n    to top,\n    rgba(245, 245, 245, 1),\n    rgba(242, 182, 147, 0 )\n  )`,\n  darkestGray: `rgba(30, 30, 30, 1)`,\n  darkerGray: `rgba(50, 50, 50, 1)`,\n  darkGray: `rgba(120, 120, 120, 1)`,\n  gray: `rgba(175, 175, 175, 1)`,\n  lightGray: `rgba(200, 200, 200, 1)`,\n  lighterGray: `rgba(225, 225, 225, 1)`,\n\n  green: `rgba(20, 215, 20, 0.7)`,\n  red: `rgba(242, 20, 20, 0.7)`,\n\n  transparent5: `rgba(245, 245, 245, 0.8)`,\n  transparent4: `rgba(245, 245, 245, 0.6)`,\n  transparent3: `rgba(245, 245, 245, 0.3)`,\n  transparent2: `rgba(245, 245, 245, 0.15)`,\n  transparent: `rgba(245, 245, 245, 0.07)`,\n\n  transparentBlack: `rgba(20,20,20,0.8)`,\n  transparentBlack2: `rgba(20,20,20,0.7)`,\n  transparentBlack3: `rgba(20,20,20,0.6)`,\n  transparentBlack4: `rgba(20,20,20,0.5)`,\n  transparentBlack5: `rgba(20,20,20,0.3)`,\n\n  white: `rgba(245, 245, 245, 1)`,\n\n  breakpoints: {\n    mobile: \"667px\",\n    laptop: \"768px\",\n    desktop: \"1080px\"\n  },\n\n  unit: \"8\",\n\n  mode: \"light\",\n\n  shadow: \"1px 1px 3px 1px rgba(0, 0, 0, 0.5)\"\n};\n","const anHour = 3600000; // in milliseconds\n\nconst getHashParams = () => {\n  let hashParams = {};\n  let e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q = window.location.hash.substring(1);\n  e = r.exec(q);\n  while (e) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n    e = r.exec(q);\n  }\n  return hashParams;\n};\n\nexport default {\n  accessToken: null,\n  refreshToken: null,\n  accessTokenCreationTime: null,\n  refreshTimer: null,\n\n  cacheAuthData: function() {\n    const authData = localStorage.getItem(\"authData\");\n    Object.assign(this, JSON.parse(authData));\n  },\n  refreshAccessToken: function() {\n    fetch(`/auth/refreshToken?refresh_token=${this.refreshToken}`)\n      .then(res => res.json())\n      .then(data => {\n        const nextAuthData = {\n          refreshToken: this.refreshToken,\n          accessToken: data.access_token,\n          accessTokenCreationTime: Date.now()\n        };\n        localStorage.setItem(\"authData\", JSON.stringify(nextAuthData));\n      });\n  },\n  startRefreshTimer: function() {\n    if (this.refreshTimer) {\n      clearInterval(this.refreshTimer);\n    }\n    // Make sure timer doesn't have a negative value\n    const timeSinceLastLogin = this.accessTokenCreationTime - Date.now();\n    if (timeSinceLastLogin > 2000 || this.accessTokenCreationTime === null) {\n      this.refreshTimer = setInterval(() => {\n        this.refreshAccessToken();\n        this.cacheAuthData();\n      }, this.accessTokenCreationTime - Date.now() + anHour / 2);\n    } else {\n      this.refreshAccessToken();\n      this.cacheAuthData();\n    }\n  },\n  init: function() {\n    this.cacheAuthData();\n    if (this.refreshToken) {\n      this.startRefreshTimer();\n    }\n  },\n\n  login: function() {\n    const nextAuthData = {\n      accessToken: getHashParams().access_token,\n      refreshToken: getHashParams().refresh_token,\n      accessTokenCreationTime: Date.now()\n    };\n    localStorage.setItem(\"authData\", JSON.stringify(nextAuthData));\n  },\n\n  logout: function() {\n    const url = \"https://www.spotify.com/logout/\";\n    const spotifyWindow = window.open(\n      url,\n      \"Spotify Logout\",\n      \"width=700,height=500,top=40,left=40\"\n    );\n\n    setTimeout(() => {\n      spotifyWindow.close();\n      localStorage.removeItem(\"authData\");\n      window.location.reload();\n    }, 2000);\n  }\n};\n","import styled from \"styled-components\";\n\nexport const Background = styled.div`\n  background: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.gradient};\n  height: 100vh;\n  justify-content: center;\n  justify-items: center;\n  display: grid;\n  grid-gap: ${props => 2 * props.theme.unit + \"px\"};\n  padding-top: 15vh;\n  grid-template-rows: ${props => 12 * props.theme.unit + \"px\"} 1fr;\n  color: ${props => props.theme.white};\n`;\n\nexport const Head = styled.div`\n  text-align: center;\n  & > h1 {\n    font-size: 3.9rem;\n    text-shadow: 3px 3px\n      ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent\n          : props.theme.transparentBlack5};\n    background: ${props =>\n      props.theme.mode === \"dark\" ? props.theme.gradient : \"none\"};\n    -webkit-background-clip: ${props =>\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\n    background-clip: ${props =>\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\n    -webkit-text-fill-color: ${props =>\n      props.theme.mode === \"dark\" ? \"transparent\" : \"none\"};\n  }\n\n  & > p {\n    font-size: 1rem;\n    padding-top: ${props => 1 * props.theme.unit + \"px\"};\n    color: ${props => props.theme.transparent5};\n  }\n  animation: fadeIn 1s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n`;\nexport const Body = styled.div`\n  animation: fadeIn 1s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  text-align: center;\n\n  & > p {\n    margin-top: ${props => 4 * props.theme.unit + \"px\"};\n    color: ${props => props.theme.transparent5};\n    cursor: pointer;\n  }\n\n  & > p:hover {\n    color: ${props =>\n      props.theme.mode === \"dark\" ? props.theme.primary : props.theme.black};\n  }\n`;\nexport const Submit = styled.button`\n  border: none;\n  padding: ${props => 2 * props.theme.unit + \"px\"};\n  font-size: 1rem;\n  color: ${props => props.theme.white};\n  background-color: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.transparent\n      : props.theme.transparent3};\n  & > * {\n    text-decoration: none;\n  }\n\n  & > a:visited {\n    color: inherit;\n  }\n`;\n\nexport const Input = styled.input`\n  color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.primary : props.theme.white};\n  margin: 0px;\n  background-color: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.transparent2\n      : props.theme.transparent4};\n  padding: ${props => 2 * props.theme.unit + \"px\"};\n  border: none;\n  font-size: 0.8rem;\n  text-align: center;\n  width: ${props => 26 * props.theme.unit + \"px\"};\n  height: 50px;\n`;\nexport const ShadowWrapper = styled.div`\n  box-shadow: 4px 4px\n    ${props =>\n      props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.gray};\n`;\n\nexport const Button = styled.button`\n  background: ${props => props.theme.transparent3};\n  margin: 0px;\n  padding: ${props => 1 * props.theme.unit + \"px\"};\n\n  border-radius: 90px;\n  border: none;\n  font-size: 0.9rem;\n  display: flex;\n  cursor: pointer;\n  color: ${props => props.theme.black};\n\n  &:hover {\n    background-color: ${props => props.theme.white};\n  }\n  & > * {\n    text-decoration: none;\n  }\n\n  & > a:visited {\n    color: inherit;\n  }\n\n  & > a {\n    margin-top: ${props => 1 * props.theme.unit + \"px\"};\n  }\n\n  &:focus {\n    outline: 0;\n  }\n\n  text-justify: center;\n  & > img {\n    width: 35px;\n    margin-right: 10px;\n  }\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport spotifyLogo from \"../../../images/spotifyLogo.png\";\n\nimport {\n  Background,\n  Head,\n  Body,\n  ShadowWrapper,\n  Submit,\n  Input,\n  Button\n} from \"./styles\";\n\n// process.env.NODE_ENV === \"production\"\n//         ? \"https://airplayer.herokuapp.com/auth/login\"\n//         : \"http://localhost:8888/auth/login\";\n\nexport default function Landing(props) {\n  return (\n    <Background>\n      <Head>\n        {\" \"}\n        <h1>Airplayer</h1>\n        <p>Connect to parties in your area</p>\n      </Head>\n      <Body>\n        {props.auth.accessToken ? (\n          <>\n            {/* TODO un comment when location tracking is implemented */}\n            {/* <ShadowWrapper> */}\n            {/* <Input type=\"text\" placeholder=\"Enter your location...\"></Input> */}\n            <Submit>\n              <Link to=\"/roomsearch\">Go</Link>\n            </Submit>\n            {/* </ShadowWrapper> */}\n\n            <p onClick={() => props.auth.logout()}>or click here to logout</p>\n          </>\n        ) : (\n          <Button>\n            <img src={spotifyLogo} alt=\"\" />\n            <a\n              href={\n                process.env.NODE_ENV === \"production\"\n                  ? \"https://airplayer.herokuapp.com/auth/login\"\n                  : \"http://localhost:8888/auth/login\"\n              }\n            >\n              Login With Spotify\n            </a>\n          </Button>\n        )}\n      </Body>\n    </Background>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nexport default function Callback(props) {\n  useEffect(() => {\n    console.log(props);\n    props.auth.login();\n\n    window.location.href = \"/\";\n  }, []);\n  return <div></div>;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport default function List(props) {\n  const {\n    items = [],\n    Style = styled.ul``,\n    limit = items ? items.length : 1\n  } = props;\n\n  const ItemProps = function(item, childProps) {\n    return Object.fromEntries(\n      Object.entries(childProps)\n        .filter(([propName]) => propName !== \"Style\")\n        .map(([propName, callback]) => {\n          // onClick and later other events will pass an evnet and not be fired immediately\n          // callbacks are ran immediately\n          if (callback) {\n            const handler = callback;\n            const isEvent = propName.slice(0, 2) === \"on\";\n            return isEvent\n              ? [propName, (callback = e => handler(e, item))]\n              : [propName, (callback = handler(item))];\n          } else {\n            return [propName, null];\n          }\n        })\n    );\n  };\n\n  const Items = () => (\n    <Style>\n      {items.length > 0 &&\n        props.children &&\n        items.slice(0, limit).map((item, i) => {\n          return React.cloneElement(props.children, {\n            ...ItemProps(item, props.children.props),\n            key: i\n          });\n        })}\n    </Style>\n  );\n\n  return <Items></Items>;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport default function ListItem({\n  src,\n  name,\n  labels,\n  Style = styled.li``,\n  filter = \"\",\n  onClick = () => {},\n  button = <></>\n}) {\n  const Labels = () => (\n    <ul>\n      {labels.map((label, i) => (\n        <p key={i}>{label}</p>\n      ))}\n    </ul>\n  );\n\n  return (\n    <Style filter={filter} onClick={(e, item) => onClick(e, item)}>\n      {src && <img src={src}></img>}\n      <div>\n        <h3>{name}</h3>\n        {labels && <Labels></Labels>}\n      </div>\n      {button}\n    </Style>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  background: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.gradient : props.theme.white};\n  border-radius: ${props => (props.show ? \"0\" : \"2rem\")};\n  width: ${props => (props.show ? \"100%\" : \"0%\")};\n  height: ${props => (props.show ? \"100%\" : \"0%\")};\n  bottom: ${props => (props.show ? \"0\" : \"2.5rem\")};\n  right: ${props => (props.show ? \"0\" : \"2.5rem\")};\n  position: absolute;\n  overflow: hidden;\n  box-shadow: 2px 3px ${props => props.theme.transparentBlack5};\n\n  transition: width 0.5s, height 0.5s, bottom 0.5s, right 0.5s;\n  & > * {\n    opacity: ${props => (props.show ? \"1\" : \"0\")};\n\n    transition: opacity 0.5s;\n    color: ${props => props.theme.black};\n  }\n\n  & > [type=\"icon\"] {\n    color: ${props => props.theme.transparentBlack5};\n\n    font-size: 3rem;\n    position: absolute;\n    right: 0.5rem;\n    top: 0.5rem;\n    & :hover {\n      color: ${props => props.theme.black};\n    }\n  }\n`;\n\nexport const Title = styled.p`\n  text-align: center;\n  padding: 1rem;\n  font-size: 2rem;\n  color: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.white\n      : props.theme.transparentBlack};\n`;\nexport const Body = styled.div`\n  width: 90%;\n  height: 75%;\n  margin: 0 5%;\n`;\n","import React from \"react\";\nimport { Container, Title, Body } from \"./styles\";\nimport { IoIosClose } from \"react-icons/io\";\nexport default function Modal(props) {\n  const { show, setShow, title, children } = props;\n  return (\n    <Container show={show}>\n      <IoIosClose onClick={() => setShow(false)} type=\"icon\"></IoIosClose>\n      <Title>{title}</Title>\n      <Body>{children}</Body>\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  text-align: center;\n  color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\n`;\n\nexport const SearchForm = styled.div`\n  overflow: hidden !important;\n  display: grid;\n  grid-gap: 24px;\n  height: 100%;\n\n  & [type=\"container\"] {\n    position: relative;\n\n    & input {\n      justify-self: center;\n      width: 70%;\n      max-width: 500px;\n      padding: ${props => 2 * props.theme.unit + \"px\"};\n    }\n\n    & [type=\"icon\"] {\n      position: absolute;\n      font-size: 2rem;\n      top: 8px;\n      margin-left: -40px;\n\n      color: ${props =>\n        props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\n    }\n  }\n`;\nexport const CreateForm = styled.form`\n  & > p {\n    color: ${props =>\n      props.theme.mode === \"dark\"\n        ? props.theme.white\n        : props.theme.transparentBlack};\n  }\n\n  & > input {\n    margin: ${props => 1.5 * props.theme.unit + \"px\"} 0;\n    width: 300px;\n    border: none;\n    padding: ${props => 1.5 * props.theme.unit + \"px\"};\n    box-shadow: 2px 2px\n      ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent\n          : props.theme.transparentBlack5};\n  }\n\n  & > [type=\"icon\"] {\n    position: absolute;\n    font-size: 2rem;\n    margin-left: -340px;\n    margin-top: 16px;\n    color: ${props =>\n      props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\n  }\n`;\nexport const CreateButton = styled.button`\n  display: block;\n  margin: ${props => 2 * props.theme.unit + \"px\"} auto;\n  color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.white};\n  padding: 8px 32px;\n  background: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.transparent3\n      : props.theme.primary};\n  border-radius: 1rem;\n  font-size: 1.5rem;\n  box-shadow: 2px 2px\n    ${props =>\n      props.theme.mode === \"dark\"\n        ? props.theme.transparent\n        : props.theme.transparentBlack5};\n\n  border: none;\n  cursor: pointer;\n`;\n","import styled, { css } from \"styled-components\";\nimport { IoIosAdd, IoIosCheckmark } from \"react-icons/io\";\n\nexport const TickIcon = styled(IoIosCheckmark)`\n  position: absolute;\n  font-size: 2.5rem;\n  transition: none;\n\n  &:hover {\n    color: ${props => props.theme.transparent4};\n  }\n  color: ${props => props.theme.green};\n`;\nexport const AddIcon = styled(IoIosAdd)`\n  position: absolute;\n  font-size: 2.5rem;\n  transition: none;\n\n  &:hover {\n    color: ${props => props.theme.transparent4};\n  }\n  color: ${props => props.theme.white};\n`;\n\nexport const IconUnderlay = styled.div`\n  border: 1px solid transparent;\n  border-radius: 90px;\n  background-color: ${props => props.theme.transparentBlack};\n\n  height: ${props => 6 * props.theme.unit + \"px\"};\n  width: ${props => 6 * props.theme.unit + \"px\"};\n  position: relative;\n`;\n\nexport const StyledList = styled.ul`\n  display: flex;\n  overflow-y: hidden;\n\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\n`;\n\nexport const StyledContainer = styled.div`\n  height: ${props => 28 * props.theme.unit + \"px\"};\n  overflow-x: scroll;\n  overflow-y: hidden;\n  scrollbar-width: none;\n  ::-webkit-scrollbar {\n    width: 0px; /* Remove scrollbar space */\n    background: transparent; /* Optional: just make scrollbar invisible */\n  }\n`;\nexport const StyledItem = styled.li`\n  list-style: none;\n  padding-right: ${props => 2 * props.theme.unit + \"px\"};\n  & * {\n    padding: ${props => 0.25 * props.theme.unit + \"px\"};\n  }\n  & img {\n    width: ${props => 16 * props.theme.unit + \"px\"};\n    height: ${props => 16 * props.theme.unit + \"px\"};\n  }\n  font-size: 0.8rem;\n  & p {\n    display: inline;\n    text-transform: capitalize;\n    color: ${props => props.theme.transparent4};\n\n    @media (max-width: 667px) {\n      color: ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent4\n          : props.theme.transparentBlack};\n    }\n  }\n`;\n\nexport const StyledItemContainer = styled.span`\n  position: relative;\n`;\n\nexport const StyledPlayButton = styled.div`\n  border: 1px solid transparent;\n  border-radius: 90px;\n  background-color: ${props => props.theme.transparentBlack};\n\n  height: ${props => 6 * props.theme.unit + \"px\"};\n  width: ${props => 6 * props.theme.unit + \"px\"};\n  position: relative;\n  &::after {\n    content: \"\";\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -6px;\n    margin-top: -12px;\n    width: 0;\n    height: 0;\n    border-top: 12px solid transparent;\n    border-bottom: 12px solid transparent;\n    border-left: 16px solid white;\n  }\n`;\nexport const StyledOverlay = styled.div`\n  position: absolute;\n  top: 0px;\n  height: ${props => 16 * props.theme.unit + \"px\"};\n  width: ${props => 16 * props.theme.unit + \"px\"};\n  align-items: center;\n  justify-content: center;\n  display: flex;\n\n  &:hover {\n    content: \"\";\n    cursor: pointer;\n  }\n`;\n","import React from \"react\";\nimport {\n  StyledContainer,\n  StyledItem,\n  StyledOverlay,\n  StyledItemContainer,\n  StyledList,\n  AddIcon,\n  TickIcon,\n  IconUnderlay\n} from \"./styles\";\nimport List from \"../List\";\n\nexport default function Carousel(props) {\n  const { items, height, addItem, removeItem, selectedItems } = props;\n\n  const ItemTemplate = ({ src, name, labels, uri, selected }) => {\n    return (\n      <StyledItemContainer>\n        {\" \"}\n        <StyledItem>\n          <img src={src}></img>\n          <h4>{name}</h4>\n          {labels && labels.map((label, i) => <p key={i}>{label}</p>)}\n        </StyledItem>{\" \"}\n        <StyledOverlay>\n          <IconUnderlay></IconUnderlay>\n          {selected ? (\n            <TickIcon onClick={() => removeItem(uri)}></TickIcon>\n          ) : (\n            <AddIcon onClick={() => addItem(uri)}></AddIcon>\n          )}\n        </StyledOverlay>\n      </StyledItemContainer>\n    );\n  };\n\n  return (\n    <StyledContainer height={height}>\n      <List items={items} Style={StyledList}>\n        <ItemTemplate\n          src={item => item.getImages().default.url}\n          name={item => item.name}\n          labels={item => item.getArtists().map(artist => artist.name)}\n          uri={item => item.uri}\n          selected={item =>\n            selectedItems && selectedItems.some(obj => obj.uri === item.uri)\n          }\n        ></ItemTemplate>\n      </List>\n    </StyledContainer>\n  );\n}\n","String.prototype.replaceAll = function(search, replacement) {\n  const target = this;\n  return target.split(search).join(replacement);\n};\n\nif (Object.fromEntries === undefined) {\n  Object.fromEntries = arr =>\n    Object.assign({}, ...Array.from(arr, ([k, v]) => ({ [k]: v })));\n}\n\nfunction isEmpty(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) return false;\n  }\n  return true;\n}\n\nconst Spotify = (token, send = true) => {\n  const api = \"https://api.spotify.com/v1/\";\n\n  const request = (query, type, body = \"\") => {\n    const options = {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-type\": \"application/json\"\n      },\n      method: type\n    };\n\n    if (type !== \"GET\") {\n      options.body = JSON.stringify(body);\n    }\n    if (send) {\n      return fetch(encodeURI(`${api}${query}`), options).then(res =>\n        res.json()\n      );\n    } else {\n      options.api = api;\n      options.string = encodeURI(query);\n      return options;\n    }\n  };\n\n  const put = (q, body) => request(q, \"PUT\", body);\n  const get = q => request(q, \"GET\");\n  const remove = (q, body) => request(q, \"DELETE\", body);\n\n  const merge = (obj, template) => {\n    return Object.entries(obj)\n      .map(([k, v]) => template(k, v))\n      .join(\",\");\n  };\n\n  const appendOptions = options =>\n    merge(options, (k, v) => (v === \"\" ? \"\" : `&${k}=${v}`)).replaceAll(\n      \",\",\n      \"\"\n    );\n  const appendConditions = condititions =>\n    merge(condititions, (k, v) => `${k}:${v}`).replaceAll(\",\", \" \");\n\n  const pluralize = str => (str.slice(-1) === \"s\" ? str : `${str}s`);\n  const dePluralize = str =>\n    str.slice(-1) === \"s\" ? str.slice(0, str.length - 1) : str;\n\n  const hyphenize = str => str.replace(/[A-Z]/g, m => \"-\" + m.toLowerCase());\n  const depthOf = function(object) {\n    var level = 1;\n    var key;\n    for (key in object) {\n      if (!object.hasOwnProperty(key)) continue;\n\n      if (typeof object[key] == \"object\") {\n        var depth = depthOf(object[key]) + 1;\n        level = Math.max(depth, level);\n      }\n    }\n    return level;\n  };\n\n  const innerKeys = function(o) {\n    return Object.keys(o).reduce(function(r, k) {\n      return typeof o[k] === \"object\" ? innerKeys(o[k]) : ((r[k] = o[k]), r);\n    }, {});\n  };\n\n  const multiSearch = query =>\n    Object.keys(innerKeys(query))[0] === \"0\" && depthOf(query) === 4;\n\n  const singleSearch = query =>\n    Object.keys(innerKeys(query))[0] === \"id\" && depthOf(query) === 3;\n\n  const conditionBased = query =>\n    Object.keys(innerKeys(query))[0] === \"id\" && depthOf(query) === 4;\n\n  const parseOptions = (query, target) =>\n    Object.fromEntries(\n      Object.entries(query[target]).filter(option => option[0] !== \"where\")\n    );\n  const findQuery = query => {\n    if (conditionBased(query)) {\n      const target = Object.keys(query)[0];\n      const condition = Object.keys(query[target].where)[0];\n      const id = query[target].where[condition].id;\n\n      const options = parseOptions(query, target);\n      return `${pluralize(condition)}/${id}/${hyphenize(target)}${\n        isEmpty(options) ? \"\" : `?${appendOptions(options).substring(1)}`\n      }`;\n    }\n    if (singleSearch(query)) {\n      const target = Object.keys(query)[0];\n      const id = query[target].where.id;\n      return `${pluralize(hyphenize(target))}/${id}`;\n    }\n    if (multiSearch(query)) {\n      const target = Object.keys(query)[0];\n      const ids = Object.values(innerKeys(query));\n      return `${pluralize(hyphenize(target))}?ids=${ids}`;\n    }\n  };\n  return {\n    search: ({\n      query = \"\",\n      type = \"\",\n      offset = \"\",\n      limit = \"\",\n      market = \"\",\n      wildcard = false\n    }) => {\n      const buildQuery = () =>\n        typeof query === \"string\"\n          ? wildcard\n            ? `${query}*`\n            : `${query}`\n          : typeof query === \"object\"\n          ? appendConditions(query)\n          : \"\";\n\n      const queryString = `search?q=${buildQuery()}${appendOptions({\n        type: dePluralize(type),\n        limit,\n        offset,\n        market\n      })}`;\n\n      return get(queryString);\n    },\n\n    // browse: query => (send ? get(findQuery) : findQuery(query)),\n\n    // albums,artists, tracks\n    find: query => get(findQuery(query)),\n\n    // library, follow , personalization , users profile\n    user: () => {\n      const userQuery = ({\n        id = \"\",\n        ids = \"\",\n        type,\n        suffix = \"\",\n        prefix = \"\"\n      }) =>\n        type === \"playlist\"\n          ? `playlists/${id ? id : ids}${suffix}`\n          : `${prefix}?type=${type}${id || ids ? `&ids=${id ? id : ids}` : \"\"}`;\n\n      return {\n        follows: params =>\n          get(userQuery({ ...params, prefix: \"me/following/contains\" })),\n\n        follow: params =>\n          put(\n            userQuery({\n              ...params,\n              suffix: \"/followers\",\n              prefix: \"me/following\"\n            })\n          ),\n\n        unfollow: params =>\n          remove(\n            userQuery({\n              ...params,\n              suffix: \"/followers\",\n              prefix: \"me/following\"\n            })\n          ),\n\n        getFollowed: params =>\n          get(userQuery({ ...params, prefix: \"me/following\" })),\n\n        library: () => {\n          const libraryQuery = query =>\n            `me/${typeof query === `string` ? pluralize(query) : query.type}`;\n\n          const libraryBody = ({ id, ids }) => (ids ? ids : [id]);\n\n          return {\n            contains: ({ id, type, ids }) =>\n              get(`me/${pluralize(type)}/contains?ids=${id ? id : ids}`),\n            get: query => get(libraryQuery(query)), // not libary.get, refers to function in Spotify() closure\n            delete: query => remove(libraryQuery(query), libraryBody(query)),\n            add: query => put(libraryQuery(query), libraryBody(query))\n          };\n        },\n        top: type => get(`me/top/${pluralize(type)}`),\n        me: () => get(\"me\"),\n        playlists: () => get(\"me/playlists\"),\n        artists: () => get(\"me/following?type=artist\")\n      };\n    },\n\n    playlists: () => {},\n    player: () => {}\n  };\n};\n\nexport default Spotify;\n","import React, { useState, useEffect, useRef } from \"react\";\n\nexport default function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n","import { useEffect, useState, useCallback } from \"react\";\nimport useInterval from \"./useInterval\";\n\nexport default function useDebounce(cb, delay, dependencies) {\n  const [updated, setUpdated] = useState(false);\n\n  const callback = useCallback(() => {\n    cb();\n  }, [dependencies]);\n\n  useInterval(\n    () => {\n      callback();\n      setUpdated(false);\n    },\n    updated ? delay : null\n  );\n  useEffect(() => {\n    setUpdated(true);\n  }, dependencies);\n}\n","const getKey = obj =>\n  Object.keys(obj)[0] === undefined ? {} : Object.keys(obj)[0];\n\nconst getNestedProperty = (prop, results) =>\n  Object.assign(\n    {},\n    ...Object.entries(results).map(entry => {\n      return entry[1] === null\n        ? { [entry[0]]: [] }\n        : {\n            [entry[0]]: Object.values({ ...entry[1][prop] })\n          };\n    })\n  );\n\nconst arrayToObject = (array, names) =>\n  names\n    ? names.length === array.length\n      ? Object.assign(...names.map((k, i) => ({ [k]: array[i] })), {\n          [\"default\"]: array[0]\n        })\n      : Object.assign({}, { [\"default\"]: array[0] })\n    : Object.assign({}, { ...array });\nexport { getKey, getNestedProperty, arrayToObject };\n","import {\n  getNestedProperty,\n  getKey,\n  arrayToObject\n} from \"../../helpers/ObjectUtils\";\n\nimport { msToMinutes } from \"../../helpers/TimeUtils\";\n\nconst fallbackImages = {\n  large: {\n    height: 500,\n    width: 500,\n    url: \"https://i.ibb.co/Hh9dXJQ/medium-removebg-preview.png\"\n  },\n  medium: {\n    height: 300,\n    width: 300,\n    url: \"https://i.ibb.co/vjZVL4p/large-removebg-preview.png\"\n  },\n  small: {\n    height: 64,\n    width: 64,\n    url: \"https://i.ibb.co/608nyr6/small-removebg-preview.png\"\n  },\n  default: {\n    height: 500,\n    width: 500,\n    url: \"https://i.ibb.co/Hh9dXJQ/medium-removebg-preview.png\"\n  }\n};\n\nconst ItemPrototype = () => {\n  return {\n    getArtists: function() {\n      switch (this.type) {\n        case \"track\":\n          return this.album ? this.album.artists : this.artists;\n        case \"album\":\n          return this.artists;\n        case \"artists\":\n          return this;\n        default:\n          return null;\n      }\n    },\n    getImages: function() {\n      switch (this.type) {\n        case \"track\":\n          return this.album\n            ? this.album.images.length < 1\n              ? arrayToObject(fallbackImages)\n              : arrayToObject(this.album.images, [\"large\", \"medium\", \"small\"])\n            : this.images\n            ? arrayToObject(this.images, [\"large\", \"medium\", \"small\"])\n            : arrayToObject(fallbackImages);\n        default:\n          return this.images.length < 1\n            ? arrayToObject(fallbackImages)\n            : arrayToObject(this.images, [\"large\", \"medium\", \"small\"]);\n      }\n    },\n    getLabels: function() {\n      return [\n        this.type,\n        this.type === \"playlist\"\n          ? this.owner.display_name\n          : this.getArtists()\n          ? this.getArtists()[0].name\n          : null //add duration\n      ];\n    }\n  };\n};\nexport default function SpotifyHelper(obj) {\n  return Object.assign({}, obj, {\n    getItems: function() {\n      const itemsByType = getNestedProperty(\"items\", obj);\n      Object.keys(itemsByType).forEach(type => {\n        itemsByType[type].map(item =>\n          Reflect.setPrototypeOf(item, ItemPrototype())\n        );\n      });\n      return itemsByType;\n    }\n  });\n}\n\nexport { ItemPrototype };\n","import { useState, useEffect, useCallback } from \"react\";\nimport Spotify from \"../../modules/Spotify\";\nimport useDebounce from \"../useDebounce\";\nimport { getKey } from \"../../helpers/ObjectUtils\";\nimport SpotifyHelper from \"../../modules/SpotifyHelper/SpotifyHelper\";\nimport isMobile from \"../../modules/isMobile\";\n\nexport default function useSearch(auth) {\n  // Store Access\n  // Local State\n  const [query, setQuery] = useState(\"\");\n  const [queryResults, setQueryResults] = useState({\n    tracks: {},\n    artists: {},\n    playlists: {},\n    albums: {}\n  });\n\n  // Local Variables\n  const spotify = Spotify(auth.accessToken);\n\n  const getQueries = useCallback(\n    async query => {\n      const queries = Object.keys(queryResults).map(type =>\n        spotify.search({ query, type })\n      );\n      const results = await Promise.all(queries);\n      return Object.assign(\n        {},\n        ...Object.keys(queryResults).map((query, i) => {\n          return {\n            [query]:\n              getKey(results[i]) === \"error\" ? results[i] : results[i][query]\n          };\n        })\n      );\n    },\n    [query, queryResults]\n  );\n\n  // Search handler, triggers when query updates, with 200 millisecond delay, and using the latest query to send\n  useDebounce(\n    () => {\n      if (query !== \"\" && auth.accessToken) {\n        getQueries(query).then(nextResults => {\n          setQueryResults(nextResults);\n        });\n      }\n    },\n    200,\n    [query, auth.accessToken]\n  );\n\n  // Hide input box after clicking a button\n  useEffect(() => {\n    const handler = e => {\n      if (e.key === \"Enter\") {\n        document.activeElement.blur();\n      }\n    };\n    document.addEventListener(\"keypress\", handler);\n\n    return () => document.removeEventListener(\"keypress\", handler);\n  }, []);\n\n  return {\n    query,\n    setQuery,\n    queryResults: SpotifyHelper(queryResults).getItems()\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Container, CreateForm, SearchForm, CreateButton } from \"./styles\";\nimport { IoIosKey, IoIosPeople, IoIosSearch } from \"react-icons/io\";\nimport { GoLocation } from \"react-icons/go\";\nimport { Redirect } from \"react-router-dom\";\nimport Carousel from \"../Carousel/Carousel\";\nimport useSearch from \"../../hooks/useSearch/useSearch\";\n\nexport default function CreateRoomForm(props) {\n  const initialData = {\n    name: \"\",\n    password: \"\",\n    location: \"\",\n    userId: props.user.uri,\n    playlist: []\n  };\n\n  const [data, setData] = useState(initialData);\n  const [roomState, setRoomState] = useState({\n    created: false,\n    tracksSelected: false,\n    done: false,\n    id: null\n  });\n\n  const { query, setQuery, queryResults } = useSearch(props.auth);\n\n  //                stage 1   =>   stage 2        stage 3                  stage 4\n  // Form Stages : Enter data =>   created   =>   tracksSelected    =>     done\n\n  useEffect(() => {\n    // Stage 3\n    if (roomState.tracksSelected) {\n      const { password, ...dataWithoutPassword } = data;\n      fetch(\"/api/rooms\", {\n        method: \"POST\",\n        body: JSON.stringify(dataWithoutPassword)\n      })\n        .then(res => res.json())\n        .then(json => {\n          const tokens = JSON.parse(localStorage.getItem(\"tokens\")) || {};\n          tokens[json.room.id] = json.token;\n          localStorage.setItem(\"tokens\", JSON.stringify(tokens));\n          setRoomState({\n            done: true,\n            id: json.room.id\n          });\n        });\n    }\n  }, [roomState.tracksSelected, data]);\n\n  const addTrack = uri =>\n    setData({ ...data, playlist: [...data.playlist, { uri }] });\n\n  const removeTrack = uri =>\n    setData({\n      ...data,\n      playlist: data.playlist.filter(track => track.uri !== uri)\n    });\n\n  return (\n    <>\n      {roomState.done ? (\n        // Stage 4\n        <Redirect to={`room/${roomState.id}`}></Redirect>\n      ) : (\n        <Container>\n          {roomState.created ? (\n            //Stage 2\n            <SearchForm>\n              <div>\n                <p>Choose at least 3 tracks to get started</p>\n              </div>\n\n              <div type=\"container\">\n                <IoIosSearch type=\"icon\"></IoIosSearch>\n                <input\n                  type=\"text\"\n                  value={query}\n                  onChange={e => setQuery(e.target.value)}\n                  placeholder=\"Enter a track or artist name...\"\n                />\n              </div>\n\n              {queryResults.tracks.length > 0 ? (\n                <Carousel\n                  addItem={addTrack}\n                  removeItem={removeTrack}\n                  items={queryResults.tracks}\n                  selectedItems={data.playlist}\n                ></Carousel>\n              ) : query === \"\" ? (\n                <></>\n              ) : (\n                <p>No tracks matching \"{query}\"</p>\n              )}\n\n              {data.playlist.length > 2 ? (\n                <CreateButton\n                  onClick={() =>\n                    setRoomState({ ...roomState, tracksSelected: true })\n                  }\n                >\n                  Enter Room\n                </CreateButton>\n              ) : null}\n            </SearchForm>\n          ) : (\n            <CreateForm>\n              {/* Stage 1 */}\n              <p>Name</p>\n              <input\n                type=\"text\"\n                value={data.name}\n                placeholder=\"Enter a room name\"\n                onChange={e => setData({ ...data, name: e.target.value })}\n                required\n              />\n              <IoIosPeople type=\"icon\"></IoIosPeople>\n              {/* <p>Password</p>\n              <input\n                type=\"text\"\n                placeholder=\"Enter a room password\"\n                value={data.password}\n                onChange={e => setData({ ...data, password: e.target.value })}\n              />\n              <IoIosKey type=\"icon\"></IoIosKey>\n              <p>Location</p>\n              <input\n                type=\"text\"\n                placeholder=\"Enter your location\"\n                required\n                value={data.location}\n                onChange={e => setData({ ...data, location: e.target.value })}\n              />\n              <GoLocation type=\"icon\"></GoLocation> */}\n              <CreateButton\n                type=\"submit\"\n                onClick={() => setRoomState({ ...roomState, created: true })}\n              >\n                Create\n              </CreateButton>\n            </CreateForm>\n          )}\n        </Container>\n      )}\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Spotify from \"../modules/Spotify\";\n\nexport default function useProfile(auth) {\n  const [user, setUser] = useState(null);\n\n  const spotify = Spotify(auth.accessToken);\n\n  useEffect(() => {\n    if (auth.accessToken)\n      spotify\n        .user()\n        .me()\n        .then(data => setUser(data));\n  }, [auth.accessToken]);\n\n  return user;\n}\n","import styled from \"styled-components\";\n\nexport default styled.li`\n  background-color: ${props => (props.filter ? props.theme.transparent2 : \"\")};\n  font-size: 0.8rem;\n  display: grid;\n  grid-template-columns: 48px 1fr ${props => (props.button ? \"100px\" : \"96px\")};\n  margin-bottom: 15px;\n  align-items: center;\n  width: 100%;\n\n  & img {\n    height: 48px;\n    width: 48px;\n  }\n  & div {\n    padding: 0 0 0 10px;\n    overflow: hidden;\n    & h3 {\n      font-size: 0.8rem;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n    & p {\n      display: inline;\n      color: ${props => props.theme.transparent4};\n      font-weight: 100;\n    }\n  }\n\n  & button {\n    height: 48px;\n    width: 48px;\n    background: none;\n    border: none;\n    color: whitesmoke;\n    font-size: 2rem;\n    text-align: center;\n    text-justify: center;\n  }\n\n  & li {\n    display: inline;\n    text-transform: capitalize;\n  }\n  & li:first-child::after {\n    content: \"\";\n    color: white;\n    padding: 0 3px;\n  }\n`;\n","import StyledListItem from \"../../../styles/StyledListItem\";\nimport styled from \"styled-components\";\nimport List from \"../../../components/List\";\n\nexport const Background = styled.div`\n  background: ${props =>\n    props.theme.mode == \"dark\" ? props.theme.black : props.theme.gradient};\n  height: 100vh;\n  justify-items: center;\n  display: grid;\n  grid-template-rows: 5rem 2rem 1fr;\n  color: ${props => props.theme.white};\n\n  & > h1 {\n    font-size: 3.9rem;\n    text-shadow: 3px 3px\n      ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent\n          : props.theme.transparentBlack5};\n    background: ${props =>\n      props.theme.mode === \"dark\" ? props.theme.gradient : \"none\"};\n    -webkit-background-clip: ${props =>\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\n    background-clip: ${props =>\n      props.theme.mode === \"dark\" ? \"text\" : \"none\"};\n    -webkit-text-fill-color: ${props =>\n      props.theme.mode === \"dark\" ? \"transparent\" : \"none\"};\n    padding: 8px 0;\n  }\n  & > p {\n    color: ${props => props.theme.transparent5};\n    padding-bottom: 16px;\n  }\n`;\n\nexport const Container = styled.div`\n  display: grid;\n  position: relative;\n  justify-content: center;\n  align-content: center;\n  min-width: ${props => 24 * props.theme.unit + \"px\"};\n  width: 85vw;\n  min-height: ${props => 50 * props.theme.unit + \"px\"};\n  /* height: 70vh; */\n  margin-bottom: 8vh;\n  background-color: ${props => props.theme.transparent2};\n  grid-template-rows: ${props => 6 * props.theme.unit + \"px\"} 1fr;\n  grid-template-columns: 1fr;\n  animation: fadeIn 1s;\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  @media (max-width: 440px) {\n    width: 98vw;\n  }\n`;\nexport const Head = styled.div`\n  display: grid;\n  width: 100%;\n\n  /* use this when location input is implemented*/\n  /* grid-template-columns: 2fr 1fr 1fr; */\n  grid-template-columns: 3fr 1fr;\n\n  & > input {\n    width: 100%;\n    &::placeholder {\n      color: ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent4\n          : props.theme.transparentBlack};\n    }\n    padding: ${props => 2 * props.theme.unit + \"px\"};\n    border: none;\n    border-right: 1px solid ${props => props.theme.transparentBlack4};\n    background-color: ${props => props.theme.transparent4};\n  }\n\n  & > div {\n    display: grid;\n    cursor: pointer;\n\n    grid-template-columns: 1fr 3fr;\n    align-items: center;\n    background-color: ${props => props.theme.transparentBlack4};\n\n    & :first-child {\n      justify-self: flex-end;\n      font-size: 2.3rem;\n    }\n    & :nth-child(2) {\n      justify-self: flex-start;\n      font-size: 1.2rem;\n    }\n  }\n\n  @media (max-width: 667px) {\n    /* grid-template-columns: 2fr 1fr; */\n    grid-template-columns: 1fr;\n\n    & > div {\n      display: none;\n    }\n  }\n`;\n\nexport const Body = styled.div`\n  & ${List} {\n    width: 100%;\n\n    & li:nth-child(even) {\n      background: ${props => props.theme.transparent2};\n      height: ${props => 8 * props.theme.unit + \"px\"};\n    }\n  }\n  overflow-x: hidden;\n  overflow-y: scroll;\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\n`;\n\nexport const ExtendedStyledListItem = styled(StyledListItem)`\n  & button {\n    background: ${props => props.theme.white};\n    color: ${props => props.theme.black};\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 0.8rem;\n    width: ${props => 10 * props.theme.unit + \"px\"};\n    height: ${props => 5 * props.theme.unit + \"px\"};\n  }\n\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\n  @media (max-width: 320px) {\n    width: 90%;\n  }\n`;\n\nexport const Button = styled.div`\n  & * {\n    text-decoration: none;\n    color: ${props => props.theme.transparent4};\n    margin-top: 8px;\n  }\n  font-size: 2.5rem;\n  width: 100%;\n  & :hover {\n    & * {\n      color: ${props => props.theme.transparentBlack3};\n    }\n  }\n`;\n\nexport const CreateButton = styled.div`\n  opacity: ${props => (props.show ? 1 : 0)};\n  transition: opacity 0.5s;\n  position: absolute;\n  bottom: 5rem;\n  right: 5rem;\n\n  & :hover {\n    color: ${props => props.theme.primary};\n  }\n  & > [type=\"circle\"] {\n    background-color: ${props => props.theme.transparentBlack3};\n    width: 5rem;\n    height: 5rem;\n    position: absolute;\n    border-radius: 100%;\n  }\n  & > [type=\"icon\"] {\n    font-size: 5rem;\n    position: absolute;\n  }\n  @media (min-width: 668px) {\n    display: none;\n  }\n`;\n","import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport List from \"../../../components/List\";\nimport ListItem from \"../../../components/ListItem\";\nimport { IoIosAdd, IoIosLogIn } from \"react-icons/io\";\nimport Modal from \"../../../components/Modal/Modal\";\nimport CreateRoomForm from \"../../../components/CreateRoomForm/CreateRoomForm\";\n\nimport useProfile from \"../../../hooks/useProfile\";\nimport {\n  Background,\n  Container,\n  Head,\n  Body,\n  ExtendedStyledListItem,\n  Button,\n  CreateButton\n} from \"./styles\";\n\nexport default function RoomSearch(props) {\n  const [rooms, setRooms] = useState([]);\n  const user = useProfile(props.auth);\n\n  const getMinutesSince = start =>\n    Math.round((Date.now() - new Date(start).getTime()) / 1000 / 60);\n  const getTimeSince = start => {\n    const minutesSince = getMinutesSince(start);\n\n    if (minutesSince < 2) {\n      return \"a few seconds ago\";\n    }\n    if (minutesSince > 2 && minutesSince < 60) {\n      return `${minutesSince} minutes ago`;\n    } else {\n      return `${Math.round(minutesSince / 60)} hours ago`;\n    }\n  };\n\n  useEffect(() => {\n    fetch(\"/api/rooms\")\n      .then(res => res.json())\n      .then(data => {\n        setRooms(\n          data\n            .reverse()\n            .filter(room => getMinutesSince(room.createdAt) < 60 * 48)\n        );\n      });\n  }, []);\n\n  const [resultFilter, setResultFilter] = useState(\"\");\n\n  console.log(resultFilter);\n\n  const JoinButton = item => (\n    <Button>\n      <Link to={`/room/${item.id}`}>\n        <IoIosLogIn></IoIosLogIn>\n      </Link>\n    </Button>\n  );\n\n  const [showModal, setShowModal] = useState(false);\n\n  return (\n    <Background>\n      <h1>Airplayer</h1>\n      <p>Join a room or create your own</p>\n      <Container>\n        <Head>\n          <input\n            placeholder=\"Enter a party Name\"\n            type=\"text\"\n            value={resultFilter}\n            onChange={e => setResultFilter(e.target.value)}\n          />\n          {/* <input placeholder=\"Change your location\" type=\"text\" />{\" \"} */}\n          {/* Desktop only */}\n          <div onClick={() => setShowModal(true)}>\n            <IoIosAdd></IoIosAdd>\n            <p>Create</p>\n          </div>\n        </Head>\n        <Body>\n          <List items={rooms.filter(room => room.name.includes(resultFilter))}>\n            <ListItem\n              Style={ExtendedStyledListItem}\n              name={item => item.name}\n              src={item =>\n                \"https://i.scdn.co/image/f5990a4c6059df42ae7b39b8524cd6ecce334995\"\n              }\n              labels={item => [\n                `Created ${getTimeSince(item.createdAt)} in `,\n                item.location\n              ]}\n              button={item => JoinButton(item)}\n            ></ListItem>\n          </List>\n        </Body>\n        {/* Mobile only imolement later*/}\n        {/* <CreateButton show={!showModal} onClick={() => setShowModal(true)}>\n          <div type=\"circle\"></div>\n          <IoIosAdd type=\"icon\"></IoIosAdd>\n        </CreateButton> */}\n\n        <Modal show={showModal} title=\"Create a Room\" setShow={setShowModal}>\n          {user && (\n            <CreateRoomForm user={user} auth={props.auth}></CreateRoomForm>\n          )}\n        </Modal>\n      </Container>\n    </Background>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Chevron = styled.span`\n  position: absolute;\n  &:before {\n    border-style: solid;\n    border-width: 2px 2px 0 0;\n    content: \"\";\n    display: inline-block;\n    height: 12px;\n    left: 0;\n    position: relative;\n    vertical-align: top;\n    width: 12px;\n    transform: rotate(45deg);\n    visibility: ${props => props.visibility};\n  }\n`;\n","import styled from \"styled-components\";\nimport { Chevron } from \"../../../styles/Chevron\";\n\nexport const Container = styled.div`\n  height: calc(100vh - 50px);\n  position: relative;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n\n  & > * {\n    padding: ${props => 2 * props.theme.unit + \"px\"} 0;\n  }\n  & > h2 {\n    font-size: 1.5rem;\n    padding-left: ${props => 2 * props.theme.unit + \"px\"};\n  }\n\n  & > ul {\n    padding: 0 ${props => 2 * props.theme.unit + \"px\"};\n  }\n`;\n\nexport const StyledChevron = styled(Chevron)`\n  left: 15px;\n  margin-top: 15px;\n  &:before {\n    transform: rotate(-135deg);\n  }\n`;\n","import React from \"react\";\nimport { Container } from \"./styles\";\n\n// Components\nimport Carousel from \"../../../components/Carousel/Carousel\";\nimport List from \"../../../components/List\";\nimport ListItem from \"../../../components/ListItem\";\n\nimport StyledListItem from \"../../../styles/StyledListItem\";\n\nexport default function Home({ room, roomTracks, topTracks, setStartAudio }) {\n  const play = (e, item) => {\n    room.controller.play(item.uri);\n    setStartAudio(true);\n  };\n\n  return (\n    <Container>\n      <h2>Recommended Tracks</h2>\n      <Carousel\n        items={topTracks}\n        addItem={room.controller.addTrack}\n        removeItem={room.controller.removeTrack}\n        selectedItems={roomTracks.playlist}\n      ></Carousel>\n\n      <h2>What's up Next</h2>\n      {roomTracks.playlist && (\n        <List items={roomTracks.playlist}>\n          <ListItem\n            Style={StyledListItem}\n            src={item => item.getImages().default.url}\n            name={item => item.name}\n            labels={item => item.getArtists().map(artist => artist.name)}\n            filter={item =>\n              item.uri === roomTracks.currentSong.uri ? \"1\" : \"\"\n            }\n            onClick={play}\n            button={item => (\n              <button\n                onClick={e => {\n                  e.stopPropagation();\n                  room.controller.removeTrack(item.uri);\n                }}\n              >\n                {\" \"}\n                x\n              </button>\n            )}\n          ></ListItem>\n        </List>\n      )}\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\n\n// TODO add theme to manage colors and padding\nexport const Container = styled.div`\n  position: relative;\n`;\n\nexport const NoQuery = styled.div`\n  display: grid;\n  justify-items: center;\n  position: relative;\n  margin-top: 200px;\n`;\n","import styled from \"styled-components\";\nimport { Chevron } from \"../../styles/Chevron\";\n\nexport const Container = styled.div`\n  font-size: 1rem;\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\n\n  & h2 {\n    cursor: pointer;\n  }\n`;\n\nexport const StyledList = styled.ul`\n  font-size: 1rem;\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\n  & li {\n    & button {\n      cursor: pointer;\n      display: grid;\n      justify-self: end;\n\n      @media (max-width: 667px) {\n        color: ${props =>\n          props.theme.mode === \"dark\"\n            ? props.theme.white\n            : props.theme.primary};\n      }\n    }\n    list-style: none;\n    & p {\n      text-transform: capitalize;\n      color: ${props => props.theme.transparent4};\n\n      @media (max-width: 667px) {\n        color: ${props =>\n          props.theme.mode === \"dark\"\n            ? props.theme.transparent4\n            : props.theme.transparentBlack};\n      }\n    }\n  }\n`;\n\nexport const StyledChevron = styled(Chevron)`\n  right: ${props => 3 * props.theme.unit + \"px\"};\n  margin-top: ${props =>\n    props.direction === \"right\"\n      ? -2.5 * props.theme.unit + \"px\"\n      : -3 * props.theme.unit + \"px\"};\n  transform: ${props =>\n    props.direction === \"right\" ? \"rotate(0deg)\" : \"rotate(180deg)\"};\n\n  transition: transform 0.2s, margin-top 0.2s;\n  color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\n`;\n","import React from \"react\";\nimport List from \"../List\";\nimport ListItem from \"../ListItem\";\nimport StyledListItem from \"../../styles/StyledListItem\";\nimport { Container, StyledChevron, StyledList } from \"./styles\";\n\nexport default function Result({\n  title,\n  items,\n  filter,\n  limit,\n  actions,\n  handleItemClick = () => {},\n  handleHeaderClick = () => {}\n}) {\n  const Button = ({ item }) => {\n    const action = actions.filter(action => action.type === \"ADD\")[0];\n    return action ? (\n      <button onClick={() => action.func(item.uri)}>{action.icon}</button>\n    ) : null;\n  };\n  return (\n    <Container>\n      <h2 onClick={e => handleHeaderClick(e, { title })}>\n        {filter !== \"\" && filter !== title ? \"\" : title}\n      </h2>\n      <StyledChevron\n        direction={filter !== \"\" ? \"left\" : \"right\"}\n        onClick={e => handleHeaderClick(e, { title })}\n      ></StyledChevron>\n      <List\n        items={items}\n        Style={StyledList}\n        limit={filter !== title ? limit : items.length}\n      >\n        <ListItem\n          src={item => item.getImages().default.url}\n          name={item => item.name}\n          labels={item =>\n            item.getLabels().map(label => (label ? `${label} ` : \"\"))\n          }\n          Style={StyledListItem}\n          button={actions ? item => <Button item={item}></Button> : null}\n          onClick={handleItemClick ? handleItemClick : () => {}}\n        ></ListItem>\n      </List>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { Container, NoQuery } from \"./styles\";\nimport Result from \"../Result/Result\";\n\nfunction isEmpty(obj) {\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) return false;\n  }\n  return true;\n}\nexport default function Results(props) {\n  const { query, filter, setFilter, limit = 4, results = [] } = props;\n\n  const noResults = () =>\n    results.map(result => isEmpty(result)).filter(bool => bool === false)\n      .length < 1;\n\n  return (\n    <Container>\n      {query === \"\" ? (\n        <NoQuery>\n          <p>Please enter a query</p>\n        </NoQuery>\n      ) : noResults() ? (\n        `No results matching ${query}`\n      ) : (\n        results &&\n        results.map(\n          (result, i) =>\n            (filter == \"\" || filter === result.title) &&\n            result.items.length > 1 && (\n              <Result\n                title={result.title}\n                items={result.items}\n                filter={filter}\n                limit={limit}\n                key={i}\n                actions={result.actions}\n                path={props.path}\n                handleItemClick={\n                  result.onItemClick ? result.onItemClick : () => {}\n                }\n                handleHeaderClick={\n                  result.onHeaderClick ? result.onHeaderClick : () => {}\n                }\n              ></Result>\n            )\n        )\n      )}\n    </Container>\n  );\n}\n\n//TODO remove non tracks from room\n","import React from \"react\";\n\n// Components\nimport Results from \"./Results/Results\";\nimport Result from \"./Result/Result\";\n\nexport default function SongList(props) {\n  const { albums, tracks, artists, playlists } = props.results;\n  const {\n    foundTracks,\n    setFindQuery,\n    foundTracksName,\n    addTrack,\n    removeTrack,\n    filter,\n    setFilter,\n    query\n  } = props;\n\n  const FoundTracks = () => (\n    <Result\n      {...{\n        title: foundTracksName,\n        items: foundTracks,\n        filter,\n        actions: [\n          { icon: <>+</>, func: addTrack, type: \"ADD\" },\n          { icon: <>-</>, func: removeTrack, type: \"REMOVE\" }\n        ],\n        handleHeaderClick: function(e) {\n          setFindQuery({ name: \"\", uri: \"\" });\n        }\n      }}\n    ></Result>\n  );\n\n  return (\n    <>\n      {foundTracks ? (\n        <FoundTracks></FoundTracks>\n      ) : (\n        <Results\n          {...{\n            query,\n            filter,\n            results: [\n              {\n                title: \"Tracks\",\n                items: tracks,\n                actions: [\n                  { icon: <>+</>, func: addTrack, type: \"ADD\" },\n                  { icon: <>-</>, func: removeTrack, type: \"REMOVE\" }\n                ],\n                onItemClick: (e, item) => console.log(item.id),\n                onHeaderClick: function(e, { title }) {\n                  setFilter(filter === title ? \"\" : title);\n                }\n              },\n              {\n                title: \"Albums\",\n                items: albums,\n                onItemClick: (e, item) =>\n                  setFindQuery({ uri: item.uri, name: item.name }),\n                onHeaderClick: function(e, { title }) {\n                  setFilter(filter === title ? \"\" : title);\n                }\n              },\n              {\n                title: \"Artists\",\n                items: artists,\n                onItemClick: (e, item) =>\n                  setFindQuery({ uri: item.uri, name: item.name }),\n\n                onHeaderClick: function(e, { title }) {\n                  setFilter(filter === title ? \"\" : title);\n                }\n              },\n              {\n                title: \"Playlists\",\n                items: playlists,\n                onItemClick: (e, item) =>\n                  setFindQuery({ uri: item.uri, name: item.name }),\n                onHeaderClick: function(e, { title }) {\n                  setFilter(filter === title ? \"\" : title);\n                }\n              }\n            ]\n          }}\n        ></Results>\n      )}\n    </>\n  );\n}\n","import styled, { css } from \"styled-components\";\nimport { IoIosAdd, IoIosCheckmark } from \"react-icons/io\";\n\nexport const Container = styled.div`\n  padding: ${props => 2 * props.theme.unit + \"px\"};\n`;\n\nexport const Icon = css`\n  font-size: 3rem;\n  cursor: pointer;\n  &:hover {\n    color: ${props => props.theme.transparent3};\n  }\n  transition: color 0.5s;\n`;\n\nexport const AddIcon = styled(IoIosAdd)`\n  ${Icon}\n`;\n\nexport const TickIcon = styled(IoIosCheckmark)`\n  ${Icon}\n`;\n","import React from \"react\";\nimport SongList from \"../../../components/SongList\";\nimport { Container } from \"./styles\";\nexport default function Search(props) {\n  return (\n    <Container>\n      <SongList {...props}></SongList>\n    </Container>\n  );\n}\n","export default () => {\r\n  const ua = navigator.userAgent;\r\n\r\n  if (\r\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(\r\n      ua\r\n    ) &&\r\n    /Chrome/i.test(ua)\r\n  )\r\n    return true;\r\n  else return false;\r\n};\r\n","import styled from \"styled-components\";\nimport { Chevron } from \"../../../styles/Chevron\";\nimport deviceHasHeader from \"../../../modules/deviceHasHeader\";\n\nexport const Container = styled.div`\n  height: ${props =>\n    deviceHasHeader() ? `calc(92vh - 56px)` : \"calc(100vh - 56px)\"};\n  position: relative;\n  display: grid;\n  align-content: flex-start;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n  padding-top: ${props => 2 * props.theme.unit + \"px\"};\n\n  & > h2 {\n    font-size: 1.5rem;\n    padding-left: ${props => 2 * props.theme.unit + \"px\"};\n  }\n`;\n\nexport const StyledChevron = styled(Chevron)`\n  left: 15px;\n  margin-top: 15px;\n  &:before {\n    transform: rotate(-135deg);\n  }\n`;\n","import React, { useState } from \"react\";\nimport { Container } from \"./styles\";\n\n// Components\n\nimport Carousel from \"../../../components/Carousel/Carousel\";\nimport SongList from \"../../../components/SongList\";\n\nexport default function Library(props) {\n  const { topTracks } = props.results;\n  const { selectedTracks, addTrack, removeTrack } = props;\n\n  return (\n    <Container>\n      <h2>Last Played</h2>\n      <Carousel\n        items={topTracks}\n        addItem={addTrack}\n        removeItem={removeTrack}\n        selectedItems={selectedTracks}\n      ></Carousel>\n      <SongList {...props}></SongList>\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\nimport Loader from \"react-loader-spinner\";\n\nexport const Background = styled.div`\n  background: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.gradient};\n`;\n\nexport const Spinner = styled(Loader)`\n  justify-self: center;\n  align-self: center;\n  animation: fadeIn 0.5s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  animation: fadeOut 0.5s;\n\n  @keyframes fadeOut {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0;\n    }\n  }\n`;\nexport const Container = styled.div`\n  animation: fadeIn 1s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  display: grid;\n  width: 100%;\n  color: ${props => props.theme.white};\n  grid-template-columns: minmax(96px, 160px) 1fr;\n  grid-template-rows:\n    ${props => 6 * props.theme.unit + \"px\"} calc(100vh - 128px)\n    ${props => 10 * props.theme.unit + \"px\"};\n`;\n\nexport const Main = styled.main`\n  animation: fadeIn 1s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  max-height: calc(100vh - 128px);\n  overflow: auto;\n`;\n\nexport const Footer = styled.footer`\n  grid-column: span 2;\n  color: ${props => props.theme.white};\n  height: 100%;\n`;\n","export default (state, action) => {\n  switch (action.type) {\n    case \"SET_DEVICE\":\n      return {\n        ...state,\n        id: action.payload.device_id,\n        ready: action.payload.ready\n      };\n\n    case \"UPDATE_PLAYER\": {\n      const roomState = action.payload.roomState;\n      return {\n        ...state,\n        currentSong: roomState.currentSong.uri,\n        paused: !roomState.currentSong.playing,\n        playlist: roomState.playlist.map(track => track.uri),\n        lastSeek: roomState.currentSong.lastSeek\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import React, { useState, useEffect, useRef } from \"react\";\n\nfunction useTimeout(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setTimeout(tick, delay);\n\n      return () => clearTimeout(id);\n    }\n  }, [delay]);\n}\n\nexport default useTimeout;\n","import { useEffect, useState, useReducer } from \"react\";\n\nimport reducer from \"./reducer\";\nimport usePlay from \"./usePlay\";\nimport useQue from \"./useQue\";\nimport useSeek from \"./useSeek\";\nimport useSetup from \"./useSetup\";\nimport useTogglePause from \"./useTogglePause\";\nimport useVolume from \"./useVolume\";\n\n// This webplayer will control the player by reading state from the room\nexport default function useWebplayer(auth, room, start, duration) {\n  const [deviceState, dispatch] = useReducer(reducer, {\n    id: null,\n    currentSong: null,\n    paused: false,\n    ready: false,\n    playlist: [],\n    lastSeek: 0\n  });\n\n  const [loadScript, setLoadScript] = useState(false);\n\n  //When a track finishes, que the next track and play\n  const { setRemaining, queTrack } = useQue(deviceState, room.controller);\n\n  // connect player and set up events\n  const { player } = useSetup(\n    auth.accessToken,\n    setLoadScript,\n    setRemaining,\n    dispatch\n  );\n\n  // Change volume\n  const { volume, setVolume } = useVolume(player);\n\n  // When seek position changes update player to seek to that position\n  useSeek(deviceState, duration, player);\n\n  // Play loaded track\n  usePlay(deviceState, start, room, auth.accessToken);\n\n  // Pause/Resume loaded Track\n  useTogglePause(deviceState, player);\n\n  // on room state change, reflect that state in the webplayer\n  useEffect(() => {\n    dispatch({ type: \"UPDATE_PLAYER\", payload: { roomState: room.state } });\n  }, [room.state]);\n\n  return { deviceState, loadScript, queTrack, volume, setVolume };\n}\n","import { useCallback, useState, useRef, useEffect } from \"react\";\nimport useTimeout from \"../useTimeout\";\n\nexport default function useQue(deviceState, controller) {\n  const skipAttempts = useRef(0);\n  const [trackFinished, setTrackFinished] = useState(false);\n  const [remaining, setRemaining] = useState(null);\n\n  const queTrack = useCallback(\n    pos => {\n      const nextSongIndex = deviceState.playlist.indexOf(\n        deviceState.currentSong\n      );\n      const nextSong = deviceState.playlist[nextSongIndex + pos];\n\n      if (nextSong) {\n        controller.play(nextSong);\n        setTimeout(() => (skipAttempts.current = 0), 5000);\n      }\n    },\n    [deviceState]\n  );\n\n  // 1 Second before track finishes, que the next track\n  // Workaround for spotify sdk bug\n  useTimeout(() => {\n    skipAttempts.current += 1;\n    setTrackFinished(true);\n  }, remaining);\n\n  //When a track ends, que the next track\n  useEffect(() => {\n    if (trackFinished == true && skipAttempts.current === 1) {\n      queTrack(1);\n      setTrackFinished(false);\n    }\n  });\n\n  return { setRemaining, queTrack };\n}\n","import { useState, useEffect } from \"react\";\n\nexport default function useSetup(token, setLoadScript, setRemaining, dispatch) {\n  const [player, setPlayer] = useState();\n  // Set up webplayer\n  useEffect(() => {\n    // Assign event to listen for script to load\n    if (!window.onSpotifyWebPlaybackSDKReady) {\n      window.onSpotifyWebPlaybackSDKReady = () => {\n        const player = new window.Spotify.Player({\n          name: \"Web Playback SDK Quick Start Player\",\n          getOAuthToken: cb => {\n            cb(token);\n          }\n        });\n        player.connect().then(success => {\n          success\n            ? setPlayer(player)\n            : setPlayer({ error: \"Failed to connect\" });\n        });\n      };\n      // Start loading script\n      setLoadScript(true);\n    }\n  }, [player, window.Spotify]);\n\n  useEffect(() => {\n    if (!player) {\n    }\n  }, [player]);\n\n  //Player Events\n  useEffect(() => {\n    if (player) {\n      // Error handling\n      player.addListener(\"initialization_error\", ({ message }) => {\n        console.error(message);\n      });\n      player.addListener(\"authentication_error\", ({ message }) => {\n        console.error(message);\n      });\n      player.addListener(\"account_error\", ({ message }) => {\n        console.error(message);\n      });\n      player.addListener(\"playback_error\", ({ message }) => {\n        console.error(message);\n      });\n\n      // Ready\n      player.addListener(\"ready\", ({ device_id }) => {\n        console.log(\"Ready with Device ID\", device_id);\n        dispatch({ type: \"SET_DEVICE\", payload: { device_id, ready: true } });\n      });\n\n      // Not Ready\n      player.addListener(\"not_ready\", ({ device_id }) => {\n        dispatch({\n          type: \"SET_DEVICE\",\n          payload: { device_id, ready: false }\n        });\n        console.log(\"Device ID has gone offline\", device_id);\n      });\n    }\n  }, [player]);\n\n  // When device state updates, get current position of track\n  useEffect(() => {\n    if (player) {\n      const handleStateChange = state => {\n        setRemaining(state.duration - state.position - 1000);\n      };\n      player.addListener(\"player_state_changed\", handleStateChange);\n      return () =>\n        player.removeListener(\"player_state_changed\", handleStateChange);\n    }\n  }, [player]);\n  return { player };\n}\n","import { useState } from \"react\";\nimport useDebounce from \"../useDebounce\";\n\nexport default function useVolume(player) {\n  const [volume, setVolume] = useState(80);\n\n  useDebounce(\n    () => {\n      if (player) player.setVolume(volume / 100);\n    },\n    200,\n    [volume]\n  );\n\n  return { volume, setVolume };\n}\n","import { useEffect } from \"react\";\n\nexport default function useSeek(deviceState, duration, player) {\n  useEffect(() => {\n    if (\n      deviceState.ready &&\n      deviceState.currentSong &&\n      duration &&\n      deviceState.lastSeek &&\n      player\n    ) {\n      player.seek(deviceState.lastSeek);\n    }\n  }, [\n    deviceState.ready,\n    deviceState.currentSong,\n    deviceState.lastSeek,\n    duration\n  ]);\n}\n","import { useEffect, useCallback } from \"react\";\n\nexport default function usePlay(deviceState, start, room, token) {\n  const play = useCallback(\n    async track =>\n      fetch(\n        `https://api.spotify.com/v1/me/player/play?device_id=${deviceState.id}`,\n        {\n          method: \"PUT\",\n          body: JSON.stringify({\n            uris: [track]\n          }),\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n          }\n        }\n      ),\n    [deviceState.id, token]\n  );\n\n  // Load the first track in the roomstate\n  useEffect(() => {\n    if (room.state.playlist.length > 0) {\n      room.controller.play(room.state.playlist[0].uri);\n    }\n  }, []);\n\n  // Play loaded track\n  useEffect(() => {\n    // start variable is used for toggling autoplay\n    if (start) {\n      if (deviceState.ready && deviceState.currentSong) {\n        play(deviceState.currentSong);\n      }\n    } else {\n      room.controller.pause();\n    }\n  }, [deviceState.ready, deviceState.currentSong, start]);\n}\n","import React, { useEffect } from \"react\";\n\nexport default function useTogglePause(deviceState, player) {\n  // Pause/Resume loaded Track\n  useEffect(() => {\n    if (deviceState.ready && deviceState.currentSong) {\n      if (deviceState.paused) {\n        player.pause();\n      } else {\n        player.resume();\n      }\n    }\n  }, [deviceState.ready, deviceState.currentSong, deviceState.paused]);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport { IoIosVolumeHigh } from \"react-icons/io\";\n\nimport Slider from \"react-input-slider\";\n\nimport \"../global.css\";\nimport theme from \"../theme\";\n\nconst HoverArea = styled.div`\n  align-items: center;\n  display: grid;\n  justify-items: center;\n  width: 40px;\n  height: 80px;\n  z-index: 99999;\n`;\n\nconst SliderBackground = styled.div`\n  background: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.transparentBlack\n      : props.theme.white};\n  opacity: ${props => (props.show ? 1 : 0)};\n  height: ${props => (props.show ? \"160px\" : 0)};\n  width: 40px;\n  border-top-right-radius: 15px;\n  border-top-left-radius: 15px;\n  position: absolute;\n  bottom: 70px;\n  right: 0;\n  padding: 15px;\n  transition: height 0.4s, opacity 0.4s;\n  /* hacky way of changing background color for slider*/\n  & > div {\n    & > div:first-child {\n      background: #ffd5e3 !important;\n    }\n  }\n`;\n\nexport default function VolumeSlider({ volume, setVolume }) {\n  const [show, setShow] = useState(false);\n\n  return (\n    <HoverArea\n      onMouseEnter={() => setShow(true)}\n      onMouseLeave={() => setShow(false)}\n    >\n      <IoIosVolumeHigh style={{ cursor: \"pointer\" }}></IoIosVolumeHigh>\n\n      <SliderBackground show={show}>\n        <Slider\n          axis=\"y\"\n          y={100 - volume}\n          onChange={({ y }) => setVolume(100 - y)}\n          styles={{\n            thumb: {\n              width: 30,\n              height: 6,\n              backgroundColor: theme.white,\n              borderRadius: \"5px\",\n              opacity: show ? 1 : 0,\n              transition: \"opacity 0.4s\",\n              cursor: \"pointer\",\n              boxShadow: \"1px 1px 2px 1px rgba(0, 0, 0, 0.5)\"\n            },\n            track: {\n              backgroundColor: theme.primary,\n              height: show ? \"130px\" : \"0px\",\n              transition: \"height 0.4s\",\n              cursor: \"pointer\"\n            }\n          }}\n        ></Slider>\n      </SliderBackground>\n    </HoverArea>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Slider = styled.div`\n  background: ${props =>\n    props.theme.mode === \"dark\"\n      ? props.theme.transparent2\n      : props.theme.transparentBlack5};\n  position: absolute;\n  bottom: 80px;\n  width: 100%;\n  height: 15px;\n\n  & > input {\n    position: relative;\n    width: 100%;\n    height: 15px;\n    z-index: 99;\n    cursor: pointer;\n  }\n`;\n\nexport const ProgressBar = styled.div.attrs(({ width }) => ({\n  style: {\n    width\n  }\n}))`\n  position: absolute;\n  height: 15px;\n  background: ${props => props.theme.gradient};\n`;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { ProgressBar, Slider } from \"./styles\";\nimport \"../../global.css\";\n\nimport useInterval from \"../../hooks/useInterval\";\n\nexport default function AudioSlider({\n  playing,\n  currentSong,\n  lastSeek,\n  duration,\n  seek\n}) {\n  const [trackPosition, setTrackPosition] = useState();\n\n  const prevSeek = lastSeek;\n  // TODO create new hook that takes in previous state as an argument\n  useInterval(\n    () => {\n      // Necassary due to stale closure\n\n      // If we have seeked, we move 100ms from last seek\n      // if we havent seeked we move 100ms from last trackposition\n      setTrackPosition(lastSeek =>\n        lastSeek !== prevSeek ? trackPosition + 100 : prevSeek + 100\n      );\n    },\n    playing ? 100 : null\n  );\n\n  useEffect(() => {}, [lastSeek]);\n\n  useEffect(() => {\n    setTrackPosition(lastSeek);\n  }, [lastSeek, currentSong]);\n\n  return (\n    <Slider>\n      <ProgressBar\n        width={\n          trackPosition && duration ? (trackPosition / duration) * 100 + \"%\" : 0\n        }\n      ></ProgressBar>\n      <input\n        type=\"range\"\n        min=\"0\"\n        max=\"300\"\n        className=\"slider\"\n        value={trackPosition && duration ? (trackPosition / duration) * 300 : 0}\n        onChange={e => {\n          if (duration) {\n            const seekDestinationMs = Math.round(\n              (parseInt(e.target.value) / 300) * duration\n            );\n            seek(seekDestinationMs);\n          }\n        }}\n      />\n    </Slider>\n  );\n}\n","import styled from \"styled-components\";\nimport Loader from \"react-loader-spinner\";\n\nexport const Container = styled.div`\n  background-color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.white};\n\n  height: 100%;\n  color: ${props => props.theme.black};\n  display: grid;\n  width: 100%;\n  grid-template-rows: 1fr;\n`;\n\nexport const Body = styled.div`\n  height: 100%;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n`;\n\nexport const Left = styled.div`\n  display: grid;\n  grid-template-columns: 80px 1fr;\n  align-items: center;\n\n  & > img {\n    width: 80px;\n  }\n\n  & > div {\n    padding-left: 15px;\n    font-size: 0.8rem;\n\n    & > h3 {\n      color: ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.white\n          : props.theme.darkestGray};\n    }\n\n    & > p {\n      color: ${props => props.theme.gray};\n      text-transform: capitalize;\n    }\n  }\n`;\n\nexport const Right = styled.div`\n  color: ${props => props.theme.primary};\n  font-size: 2rem;\n  margin-right: 3rem;\n\n  position: relative;\n  display: grid;\n  justify-items: flex-end;\n`;\n\nexport const Spinner = styled(Loader)`\n  padding-top: 5px;\n  text-align: center;\n  background-color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.transparent : props.theme.white};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport {\n  IoIosSkipBackward,\n  IoIosPlay,\n  IoIosSkipForward,\n  IoIosPause\n} from \"react-icons/io\";\n\nconst Container = styled.div`\n  color: ${props => props.theme.primary};\n  font-size: 1.75rem;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  align-content: space-between;\n  justify-items: center;\n  width: 240px;\n  align-self: center;\n  justify-self: center;\n  text-align: center;\n  text-justify: center;\n  & > * {\n    cursor: pointer;\n  }\n\n  & > :nth-child(odd) {\n    margin-top: 0.625rem;\n  }\n  & > :nth-child(2) {\n    font-size: 3rem;\n  }\n`;\n\nexport default function MusicController({\n  room,\n  queTrack,\n  setStart,\n  deviceState\n}) {\n  const isFirstTrack =\n    room.state.playlist\n      .map(track => track.uri)\n      .indexOf(room.state.currentSong.uri) === 0;\n\n  const isLastTrack =\n    room.state.playlist\n      .map(track => track.uri)\n      .indexOf(room.state.currentSong.uri) ===\n    room.state.playlist.length - 1;\n\n  return (\n    <Container>\n      {isFirstTrack ? (\n        <div></div>\n      ) : (\n        <IoIosSkipBackward onClick={() => queTrack(-1)}></IoIosSkipBackward>\n      )}\n\n      {deviceState.paused ? (\n        <IoIosPlay\n          onClick={() => {\n            room.controller.resume();\n            setStart(true);\n          }}\n        ></IoIosPlay>\n      ) : (\n        <IoIosPause\n          onClick={() => {\n            room.controller.pause();\n          }}\n        ></IoIosPause>\n      )}\n      {isLastTrack ? (\n        <div></div>\n      ) : (\n        <IoIosSkipForward onClick={() => queTrack(1)}></IoIosSkipForward>\n      )}\n    </Container>\n  );\n}\n","import React, { useState } from \"react\";\nimport Script from \"react-load-script\";\nimport useWebplayer from \"../../hooks/useWebplayer/\";\nimport theme from \"../../theme\";\nimport VolumeSlider from \"../VolumeSlider\";\nimport AudioSlider from \"../AudioSlider/AudioSlider\";\n\nimport { Container, Body, Left, Right, Spinner } from \"./styles\";\n\nimport MusicController from \"../MusicController\";\n\nexport default function SpotifyWebplayer({\n  auth,\n  room,\n  roomTracks,\n  start,\n  setStart\n}) {\n  const [scriptState, setScriptState] = useState({\n    error: false\n  });\n\n  const duration = roomTracks.currentSong.duration_ms;\n\n  const { loadScript, deviceState, queTrack, volume, setVolume } = useWebplayer(\n    auth,\n    room,\n    start,\n    duration\n  );\n\n  return (\n    <>\n      {loadScript && (\n        <Script\n          url=\"https://sdk.scdn.co/spotify-player.js\"\n          onError={() => setScriptState({ ...scriptState, error: true })}\n          onLoad={() => {\n            setScriptState({ ...scriptState, loaded: true });\n          }}\n        ></Script>\n      )}\n\n      {deviceState.ready ? (\n        <Container>\n          <AudioSlider\n            duration={duration}\n            playing={!deviceState.paused}\n            lastSeek={deviceState.lastSeek}\n            currentSong={deviceState.currentSong}\n            seek={room.controller.seek}\n          ></AudioSlider>\n          <Body>\n            <Left>\n              <img\n                src={roomTracks.currentSong.getImages().default.url}\n                alt=\"\"\n              />\n              <div>\n                <h3>{roomTracks.currentSong.name}</h3>\n                <p>\n                  {roomTracks.currentSong\n                    .getArtists()\n                    .map(artist => artist.name)}\n                </p>\n              </div>\n            </Left>\n            <MusicController\n              setStart={setStart}\n              room={room}\n              queTrack={queTrack}\n              deviceState={deviceState}\n            ></MusicController>\n            <Right>\n              <VolumeSlider\n                volume={volume}\n                setVolume={setVolume}\n              ></VolumeSlider>\n            </Right>\n          </Body>\n        </Container>\n      ) : (\n        <Spinner type=\"Bars\" color={theme.primary} height={70} width={50} />\n      )}\n    </>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  font-size: 0.6em;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  align-content: center;\n  align-self: center;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n`;\nexport const Button = styled.div`\n  cursor: pointer;\n  border: 1px solid ${props => props.theme.white};\n  border-radius: 90px;\n  text-align: center;\n  padding: ${props => 1 * props.theme.unit + \"px\"};\n  color: ${props => (props.active ? props.theme.black : props.theme.white)};\n  background-color: ${props =>\n    props.active ? props.theme.white : props.theme.transparent2};\n\n  &:hover {\n    cursor: pointer;\n    color: ${props => props.theme.black};\n    background-color: ${props =>\n      props.active ? props.theme.white : props.theme.transparent4};\n  }\n`;\n","import React from \"react\";\nimport { Container, Button } from \"./styles\";\n\nexport default function SeachFilter({ filter, setFilter }) {\n  const RadioButton = ({ text }) => {\n    return (\n      <Button\n        active={filter === text}\n        onClick={() => {\n          setFilter(filter === text ? \"\" : text);\n        }}\n      >\n        {text}\n      </Button>\n    );\n  };\n  return (\n    <Container>\n      <RadioButton text={\"Tracks\"}></RadioButton>\n      <RadioButton text={\"Playlists\"}></RadioButton>\n      <RadioButton text={\"Artists\"}></RadioButton>\n      <RadioButton text={\"Albums\"}></RadioButton>\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\nimport { IoIosPerson } from \"react-icons/io\";\n\nexport const ProfileIcon = styled(IoIosPerson)`\n  border: 2px solid ${props => props.theme.transparent4};\n  border-radius: 90px;\n  width: ${props => 4 * props.theme.unit + \"px\"};\n  height: ${props => 4 * props.theme.unit + \"px\"};\n\n  cursor: pointer;\n  color: ${props => props.theme.transparent4};\n\n  &:hover {\n    color: ${props => props.theme.white};\n  }\n`;\nexport const Container = styled.header`\n  padding: ${props => 2 * props.theme.unit + \"px\"};\n  grid-template-columns: 2fr 1fr;\n  display: grid;\n  justify-items: flex-end;\n  align-content: center;\n`;\n\nexport const Wrapper = styled.div`\n  grid-template-columns: 1fr 1fr;\n  display: grid;\n  justify-self: flex-start;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n`;\n\nexport const SearchBar = styled.input`\n  padding: ${props => 1 * props.theme.unit + \"px\"};\n\n  border-radius: 2px;\n  background-color: ${props => props.theme.transparent4};\n  border: none;\n  display: block;\n  justify-self: start;\n  width: ${props => 34 * props.theme.unit + \"px\"};\n`;\n","import React from \"react\";\nimport SearchFilter from \"../SearchFilter/SeachFilter\";\nimport { Container, Wrapper, SearchBar, ProfileIcon } from \"./styles\";\n\nexport default function DesktopHeader({ filter, setFilter, query, setQuery }) {\n  return (\n    <Container>\n      <Wrapper>\n        <SearchBar\n          value={query}\n          placeholder=\"Search\"\n          onChange={e => setQuery(e.target.value)}\n        ></SearchBar>\n        <SearchFilter filter={filter} setFilter={setFilter}></SearchFilter>\n      </Wrapper>\n      <ProfileIcon></ProfileIcon>\n    </Container>\n  );\n}\n","import styled, { css } from \"styled-components\";\nimport { IoIosHome, IoIosSearch, IoIosList } from \"react-icons/io\";\nimport { Link } from \"react-router-dom\";\n\nexport const StyledLink = styled(Link)`\n  color: ${props => props.theme.white};\n  text-decoration: none;\n  display: grid;\n  justify-self: flex-start;\n  grid-template-columns: 2rem 1fr;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n  cursor: pointer;\n  color: ${props => props.theme.transparent4};\n\n  &:hover {\n    color: ${props => props.theme.white};\n  }\n  transition: color 0.4s;\n`;\nexport const Container = styled.nav`\n  grid-row: span 2;\n  background-color: ${props => props.theme.transparent};\n  display: grid;\n  justify-content: center;\n  grid-gap: ${props => 1 * props.theme.unit + \"px\"};\n  padding: ${props => 4 * props.theme.unit + \"px\"};\n  grid-template-rows: 40px 40px 40px 1fr;\n\n  & p {\n    padding-top: 5px;\n    font-size: 1.2rem;\n  }\n\n  & div {\n    align-self: flex-end;\n\n    & button {\n      cursor: pointer;\n      padding: 8px;\n      border: none;\n      border-radius: 90px;\n      background: ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.gradient\n          : props.theme.transparentBlack4};\n      color: ${props =>\n        props.theme.mode === \"dark\" ? props.theme.white : props.theme.primary};\n    }\n  }\n`;\n\nconst Icon = css`\n  font-size: 2rem;\n`;\n\nexport const HomeIcon = styled(IoIosHome)`\n  ${Icon}\n`;\n\nexport const SearchIcon = styled(IoIosSearch)`\n  ${Icon}\n`;\n\nexport const LibraryIcon = styled(IoIosList)`\n  ${Icon}\n`;\n","import React from \"react\";\nimport {\n  Container,\n  HomeIcon,\n  SearchIcon,\n  LibraryIcon,\n  StyledLink\n} from \"./styles\";\nexport default function Sidebar({ path, toggleTheme }) {\n  return (\n    <Container>\n      <StyledLink to={path}>\n        <HomeIcon></HomeIcon>\n        <p>Home</p>\n      </StyledLink>\n      <StyledLink to={`${path}/search`}>\n        <SearchIcon></SearchIcon>\n        <p>Search</p>{\" \"}\n      </StyledLink>\n      <StyledLink to={`${path}/library`}>\n        <LibraryIcon></LibraryIcon>\n        <p>Library</p>\n      </StyledLink>\n      <div>\n        {\" \"}\n        <button onClick={toggleTheme}>\n          {localStorage.getItem(\"theme\") === \"dark\" ? \"Light\" : \"Dark\"} Mode\n        </button>\n      </div>\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Container = styled.div`\n  & div {\n    position: absolute;\n    bottom: ${props => 12 * props.theme.unit + \"px\"};\n    height: ${props => 6 * props.theme.unit + \"px\"};\n    width: 100%;\n    transition: opacity 0.7s;\n    text-align: center;\n    padding: ${props => 1.5 * props.theme.unit + \"px\"};\n    pointer-events: none;\n  }\n`;\n\nexport const Error = styled.div`\n  background-color: ${props => props.theme.red};\n  opacity: ${props => (props.active ? 1 : 0)};\n`;\nexport const Success = styled.div`\n  background-color: ${props => props.theme.green};\n  opacity: ${props => (props.active ? 1 : 0)};\n`;\n","import React, { useEffect, useState } from \"react\";\nimport { Container, Success, Error } from \"./styles\";\nimport useTimeout from \"../../hooks/useTimeout\";\n\nexport default function Message({ success, error }) {\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [message, setMessage] = useState({ success: \"\", error: \"\" });\n\n  const generateSuccessMessage = success => {\n    switch (success.type) {\n      case \"ADD_TRACK\":\n        return \"Added track to playlist\";\n      case \"REMOVE_TRACK\":\n        return \"Removed Track from playlist\";\n      default:\n        return \"\";\n    }\n  };\n  const generateErrorMessage = error => {\n    switch (error.type) {\n      case \"ADD_TRACK\":\n        return \"Track already in playlist\";\n      case \"REMOVE_TRACK\":\n        return \"Track not in playlist\";\n    }\n  };\n\n  // set SUccess message when successful event occurs\n  useEffect(() => {\n    if (success) {\n      setMessage({ success: generateSuccessMessage(success), error: \"\" });\n    }\n  }, [success]);\n\n  useEffect(() => {\n    if (error) {\n      setMessage({ success: \"\", error: generateErrorMessage(error) });\n    }\n  }, [error]);\n\n  // After 3 seconds remove success/error message\n  useTimeout(() => {\n    if (message.success || message.error) {\n      setMessage({ error: \"\", success: \"\" });\n    }\n  }, (message.success || message.error) && 3000);\n\n  return (\n    <Container>\n      <Error active={message.error}>{message.error}</Error>\n      <Success active={message.success}>{message.success}</Success>\n    </Container>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Route } from \"react-router-dom\";\n\n// Pages\nimport Home from \"../../Desktop/Home/Home\";\nimport Search from \"../../Agnostic/Search/Search\";\nimport Library from \"../../Agnostic/Library/Library\";\n\n// Styles\nimport { Background, Container, Footer, Main, Spinner } from \"./styles\";\nimport theme from \"../../../theme\";\n\n// Components\nimport SpotifyWebplayer from \"../../../components/SpotifyWebplayer/SpotifyWebplayer\";\nimport DesktopHeader from \"../../../components/DesktopHeader/DesktopHeader\";\nimport Sidebar from \"../../../components/Sidebar/Sidebar.js\";\nimport Message from \"../../../components/Message/Message\";\n\nexport default function RoomView(props) {\n  const [filter, setFilter] = useState(\"\");\n  const [startAudio, setStartAudio] = useState(false);\n\n  const {\n    query,\n    setQuery,\n    room,\n    roomTracks,\n    libraryResults,\n    queryResults,\n    findResult,\n    setFindQuery,\n    playerReady,\n    auth,\n    match,\n    roomSuccess,\n    roomError,\n    loaded,\n    toggleTheme\n  } = props;\n\n  return (\n    <Background>\n      <Container>\n        <Sidebar path={match.url} toggleTheme={toggleTheme}></Sidebar>\n        <DesktopHeader\n          filter={filter}\n          setFilter={setFilter}\n          query={query}\n          setQuery={setQuery}\n        ></DesktopHeader>\n        {loaded ? (\n          <Main>\n            <>\n              <Route\n                exact\n                path={`${match.path}`}\n                component={() => (\n                  <Home\n                    room={room}\n                    setStartAudio={setStartAudio}\n                    roomTracks={roomTracks}\n                    topTracks={libraryResults.topTracks}\n                  ></Home>\n                )}\n              ></Route>\n              <Route\n                path={`${match.path}/search`}\n                component={() => (\n                  <Search\n                    results={queryResults}\n                    filter={filter}\n                    setFilter={setFilter}\n                    addTrack={room.controller.addTrack}\n                    removeTrack={room.controller.removeTrack}\n                    query={query}\n                    foundTracksName={findResult.name}\n                    foundTracks={findResult.tracks}\n                    setFindQuery={setFindQuery}\n                  ></Search>\n                )}\n              ></Route>\n              <Route\n                path={`${match.path}/library`}\n                component={() => (\n                  <Library\n                    filter={filter}\n                    setFilter={setFilter}\n                    results={libraryResults}\n                    foundTracks={findResult.tracks}\n                    setFindQuery={setFindQuery}\n                    addTrack={room.controller.addTrack}\n                    removeTrack={room.controller.removeTrack}\n                    foundTracksName={findResult.name}\n                    selectedTracks={roomTracks.playlist}\n                  ></Library>\n                )}\n              ></Route>\n            </>\n          </Main>\n        ) : (\n          <Spinner type=\"Bars\" color={theme.white}></Spinner>\n        )}\n\n        <Footer>\n          <Message success={roomSuccess} error={roomError}></Message>\n          {playerReady && room && room.state.isHost && loaded && (\n            <SpotifyWebplayer\n              auth={auth}\n              room={room}\n              roomTracks={roomTracks}\n              start={startAudio}\n              setStart={setStartAudio}\n            ></SpotifyWebplayer>\n          )}\n        </Footer>\n      </Container>\n    </Background>\n  );\n}\n","import styled from \"styled-components\";\nimport { Chevron } from \"../../styles/Chevron\";\n\nexport const Container = styled.div`\n  /* background-color: \"black\"; */\n  height: calc(100vh - 48px);\n  position: relative;\n`;\nexport const ImageContainer = styled.div`\n  /* Used to position Image */\n  position: relative;\n  top: 0px;\n  height: ${props => props.height * 1.2 + \"px\"};\n  width: ${props => props.width + \"px\"};\n  margin: 0 auto;\n  padding: 32px 0;\n`;\n\nexport const ImageWrapper = styled.div`\n  /* Adds fade effect to bottom of image*/\n\n  height: 100%;\n  &::before {\n    content: \"\";\n    background-image: ${props =>\n      props.theme.mode === \"dark\"\n        ? props.theme.blackFadeGradient\n        : props.theme.whiteFadeGradient};\n    position: absolute;\n    height: 50%; /* based on image height*/\n\n    /* 1 less pixel than padding amount */\n    right: -1px;\n    bottom: 31px;\n    left: -1px;\n  }\n  &::after {\n    content: \"\";\n    display: block;\n    height: 100vh;\n  }\n`;\nexport const Image = styled.img`\n  width: 100%;\n  height: 100%;\n  object-fit: \"contain\";\n`;\n\nexport const Overlay = styled.div`\n  /* Container to position Song info*/\n\n  position: absolute;\n  min-height: ${props => 12 * props.theme.unit + \"px\"};\n  height: ${props => `calc(100vh - 24px - ${props.height}px)`};\n  width: 100%;\n  bottom: 0px;\n  display: grid;\n`;\n\nexport const SongInfoContainer = styled.div`\n  text-align: center;\n  text-justify: center;\n  align-self: center;\n\n  & > h1 {\n    font-weight: 700;\n  }\n  & > h5 {\n    font-weight: 300;\n    font-size: 1.7rem;\n    color: ${props =>\n      props.theme.mode === \"dark\"\n        ? props.theme.transparent4\n        : props.theme.transparentBlack2};\n  }\n  & > p {\n    font-weight: 100;\n    padding-top: ${props => 1 * props.theme.unit + \"px\"};\n    font-size: 1rem;\n    color: ${props =>\n      props.theme.mode === \"dark\"\n        ? props.theme.transparent3\n        : props.theme.secondary};\n  }\n`;\n\nexport const StyledChevron = styled(Chevron)`\n  bottom: ${props => 1 * props.theme.unit + \"px\"};\n  left: calc(50% - 8px);\n  &:before {\n    border-style: solid;\n    border-width: 1px 1px 0 0;\n    content: \"\";\n    display: inline-block;\n    height: ${props => 2 * props.theme.unit + \"px\"};\n    left: 0;\n    position: relative;\n    vertical-align: top;\n    width: ${props => 2 * props.theme.unit + \"px\"};\n    transform: rotate(135deg);\n  }\n`;\n","import React, { useEffect } from \"react\";\nimport {\n  Container,\n  ImageContainer,\n  ImageWrapper,\n  Image,\n  Overlay,\n  SongInfoContainer,\n  StyledChevron\n} from \"./styles\";\n\nexport default function CurrentTrack(props) {\n  const { AudioVisualizer, title, artist, nextTrack, image } = props;\n  return (\n    <Container>\n      <ImageContainer width={image.width} height={image.height}>\n        <ImageWrapper>\n          <Image src={image.url} />\n        </ImageWrapper>\n      </ImageContainer>\n      <Overlay height={image.height}>\n        <SongInfoContainer>\n          <AudioVisualizer />\n          <h1>{title}</h1>\n          <h5>{artist}</h5>\n          <p>\n            {\" \"}\n            Up next {nextTrack.artist} : {nextTrack.title}\n          </p>\n        </SongInfoContainer>\n      </Overlay>\n      <StyledChevron />\n    </Container>\n  );\n}\n","import React from \"react\";\n\nexport default function AudioVisualizer() {\n  return <div />;\n}\n","import styled from \"styled-components\";\nimport Loader from \"react-loader-spinner\";\nimport deviceHasHeader from \"../../../modules/deviceHasHeader\";\n\nexport const Container = styled.div`\n  height: ${props =>\n    deviceHasHeader() ? `calc(92vh - 56px)` : \"calc(100vh - 56px)\"};\n  position: relative;\n  display: grid;\n`;\n\nexport const StyledList = styled.ul`\n  padding: 0 ${props => 2 * props.theme.unit + \"px\"};\n`;\nexport const Spinner = styled(Loader)`\n  justify-self: center;\n  align-self: center;\n`;\nexport const StyledItem = styled.li`\n  font-size: 0.8rem;\n  display: grid;\n  grid-template-columns: 48px 1fr 48px;\n  margin-bottom: ${props => 2 * props.theme.unit + \"px\"};\n  align-items: center;\n  width: 100%;\n  background-color: ${props =>\n    props.theme.mode === \"dark\" ? \"\" : props.theme.transparent3};\n\n  & img {\n    height: ${props => 6 * props.theme.unit + \"px\"};\n    width: ${props => 6 * props.theme.unit + \"px\"};\n  }\n  & div {\n    padding: 0 0 0 ${props => 1 * props.theme.unit + \"px\"};\n    overflow: hidden;\n    & h3 {\n      font-size: 0.8rem;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n    & p {\n      display: inline;\n      color: ${props =>\n        props.theme.mode === \"dark\"\n          ? props.theme.transparent4\n          : props.theme.transparentBlack};\n      font-weight: 100;\n      text-transform: capitalize;\n    }\n  }\n\n  & button {\n    height: ${props => 6 * props.theme.unit + \"px\"};\n    width: ${props => 6 * props.theme.unit + \"px\"};\n    background: none;\n    border: none;\n    color: whitesmoke;\n    font-size: 2rem;\n    text-align: center;\n    text-justify: center;\n  }\n  & li {\n    display: inline;\n    text-transform: capitalize;\n  }\n  & li:first-child::after {\n    content: \"\";\n    color: white;\n    padding: 0 3px;\n  }\n`;\n","import React from \"react\";\nimport CurrentTrack from \"../../../components/CurrentTrack/CurrentTrack\";\nimport List from \"../../../components/List\";\nimport AudioVisualizer from \"../../../components/AudioVisualizer\";\nimport { Container, StyledItem, StyledList, Spinner } from \"./styles\";\nimport theme from \"../../../theme\";\n\n// TODO use paralax https://www.youtube.com/watch?v=P5zGTEGPpu4\nexport default function Home(props) {\n  const ItemTemplate = ({ src, name, labels }) => (\n    <StyledItem>\n      {src && <img src={src}></img>}\n      <div>\n        <h3>{name}</h3>\n        <ul>{labels && labels.map((label, i) => <p key={i}>{label}</p>)}</ul>\n      </div>\n\n      <button>{\"+\"}</button>\n    </StyledItem>\n  );\n\n  const { playlist, currentSong } = props.roomTracks;\n\n  const nextTrack = (playlist &&\n    playlist[\n      playlist.indexOf(\n        playlist.filter(track => track.uri === currentSong.uri)[0]\n      ) + 1\n    ]) || { artist: null, title: null };\n\n  return (\n    <Container>\n      {currentSong && playlist ? (\n        <>\n          {\" \"}\n          <CurrentTrack\n            AudioVisualizer={AudioVisualizer}\n            title={currentSong.name}\n            artist={currentSong.artists[0].name}\n            image={currentSong.getImages().medium}\n            nextTrack={{ artist: nextTrack.artist, title: nextTrack.name }}\n          ></CurrentTrack>{\" \"}\n          <List items={playlist} Style={StyledList}>\n            <ItemTemplate\n              src={item => item.getImages().default.url}\n              name={item => item.name}\n              labels={item =>\n                item\n                  .getLabels()\n                  .map(label => `${label} `)\n                  .slice(1, 3)\n              }\n            ></ItemTemplate>\n          </List>\n        </>\n      ) : (\n        <Spinner type=\"Bars\" color={theme.white}></Spinner>\n      )}\n    </Container>\n  );\n}\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  padding-bottom: ${props => 20 * props.theme.unit + \"px\"};\n`;\nexport const Container = styled.div`\n  width: 100%;\n  display: grid;\n  grid-gap: ${props => 2 * props.theme.unit + \"px\"};\n  border-bottom: 1px solid ${props => props.theme.white};\n  padding: ${props => 2 * props.theme.unit + \"px\"};\n  position: fixed;\n  background-color: ${props => props.theme.darkestGray};\n  background-image: ${props =>\n    props.theme.mode === \"light\" && props.theme.gradient};\n  z-index: 10;\n  & input {\n    margin: 0px;\n    background-color: ${props => props.theme.transparent};\n    border: none;\n    border-bottom: 1px solid ${props => props.theme.white};\n    width: 100%;\n    height: ${props => 8 * props.theme.unit + \"px\"};\n    color: ${props => props.theme.white};\n    font-size: 2rem;\n    padding: ${props => 2 * props.theme.unit + \"px\"};\n  }\n`;\n","import React from \"react\";\nimport { Wrapper, Container } from \"./styles\";\nimport SearchFilter from \"../SearchFilter/SeachFilter\";\n\nexport default function SearchBar({ query, setQuery, filter, setFilter }) {\n  return (\n    <Wrapper>\n      <Container>\n        <input value={query} onChange={e => setQuery(e.target.value)}></input>\n        <SearchFilter filter={filter} setFilter={setFilter}></SearchFilter>\n      </Container>\n    </Wrapper>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Spotify from \"../modules/Spotify\";\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\n\nexport default function useFind(auth) {\n  const [findQuery, setFindQuery] = useState({ uri: \"\", name: \"\" });\n  const [findResult, setFindResult] = useState({ tracks: [], name: \"\" });\n\n  const spotify = Spotify(auth.accessToken);\n\n  useEffect(() => {\n    const getTracks = async (type, uri) => {\n      switch (type) {\n        case \"album\":\n          return getAlbumTracks(uri);\n\n        case \"artist\":\n          return getArtistTracks(uri);\n\n        case \"playlist\":\n          return getPlaylistTracks(uri);\n        default:\n          return null;\n      }\n    };\n\n    if (findQuery.uri !== \"\") {\n      // e.g spotify:albums:123abc => [albums, 123abc]\n      const [type, uri] = findQuery.uri.split(\":\").slice(-2);\n      getTracks(type, uri).then(tracks => {\n        setFindResult({ tracks: tracks, name: findQuery.name });\n      });\n    } else {\n      setFindResult({ tracks: null, name: null });\n    }\n  }, [findQuery]);\n\n  const getArtistTracks = async uri => {\n    const collection = await spotify.find({\n      topTracks: {\n        where: { artist: { id: uri } },\n        market: \"AU\"\n      }\n    });\n    collection.tracks.forEach(item => {\n      Reflect.setPrototypeOf(item, ItemPrototype());\n    });\n    return collection.tracks;\n  };\n\n  const getPlaylistTracks = async uri => {\n    const collection = await spotify.find({\n      tracks: { where: { playlist: { id: uri } } }\n    });\n\n    const tracks = collection.items.map(item => item.track);\n    tracks.forEach(track => {\n      Reflect.setPrototypeOf(track, ItemPrototype());\n    });\n\n    return tracks;\n  };\n  const getAlbumTracks = async uri => {\n    const [collection, album] = await Promise.all([\n      spotify.find({\n        tracks: {\n          where: { albums: { id: uri } }\n        }\n      }),\n      spotify.find({\n        album: { where: { id: uri } }\n      })\n    ]);\n\n    collection.items.forEach(item => {\n      item.images = album.images;\n      Reflect.setPrototypeOf(item, ItemPrototype());\n    });\n    return collection.items;\n  };\n  return [findResult, setFindQuery];\n}\n","import React, { useState } from \"react\";\n\nimport SearchBar from \"../../../components/SearchBar/SearchBar\";\nimport SongList from \"../../../components/SongList\";\nimport styled from \"styled-components\";\nimport deviceHasHeader from \"../../../modules/deviceHasHeader\";\n\nimport useFind from \"../../../hooks/useFind\";\nimport useSearch from \"../../../hooks/useSearch/useSearch\";\n\nconst Container = styled.div`\n  height: ${() =>\n    deviceHasHeader() ? `calc(92vh - 56px)` : \"calc(100vh - 56px)\"};\n  position: relative;\n`;\n\nexport default function Search(props) {\n  const { query, setQuery, queryResults } = useSearch(props.auth);\n  const [findResult, setFindQuery] = useFind(props.auth);\n\n  const nextProps = {\n    ...props,\n    results: queryResults,\n    foundTracks: findResult.tracks,\n    foundTracksName: findResult.name,\n    setFindQuery\n  };\n  return (\n    <Container>\n      <SearchBar\n        query={query}\n        setQuery={setQuery}\n        filter={props.filter}\n        setFilter={props.setFilter}\n      ></SearchBar>\n\n      <SongList {...nextProps}></SongList>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\nimport { Link } from \"react-router-dom\";\n\nconst Row = css`\n  width: 100%;\n  height: 100%;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  align-content: center;\n`;\n\nconst Body = styled.div`\n  ${Row}\n  border-top: 1px solid ${props => props.theme.white};\n  justify-items: center;\n`;\nconst Underlay = styled.div`\n  ${Row}\n  position:absolute;\n  top: 0px;\n  right: 5px;\n  pointer-events: none;\n`;\n\nconst Container = styled.div`\n  height: ${props => 7 * props.theme.unit + \"px\"};\n  width: 100%;\n  position: fixed;\n  background-color: ${props => props.theme.darkestGray};\n  background-image: ${props =>\n    props.theme.mode === \"light\" && props.theme.gradient};\n  & i {\n    color: ${props => props.theme.white};\n  }\n`;\n\nexport default function MobileMenu({ path }) {\n  return (\n    <Container>\n      <Body>\n        <Underlay>\n          <span>|</span>\n          <span>|</span>\n          <span>|</span>\n        </Underlay>\n        <Link to={path}>\n          <i className=\"fas fa-music\" />\n        </Link>\n        <Link to={`${path}/search`}>\n          <i className=\"fas fa-search\" />\n        </Link>\n        <Link to={`${path}/library`}>\n          <i className=\"fas fa-heart\" />\n        </Link>\n      </Body>\n    </Container>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Route } from \"react-router-dom\";\n\nimport Home from \"../Home/Home\";\nimport Search from \"../Search/Search\";\nimport Library from \"../../Agnostic/Library/Library\";\nimport Footer from \"../../../components/MobileMenu\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  animation: fadeIn 1s;\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n  color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.white : props.theme.black};\n\n  background-color: ${props =>\n    props.theme.mode === \"dark\" ? props.theme.black : props.theme.white};\n\n  font-size: 1.5rem;\n  overflow: scroll;\n`;\n\nexport default function RoomView(props) {\n  const [filter, setFilter] = useState(\"\");\n\n  const {\n    query,\n    setQuery,\n    room,\n    roomTracks,\n    libraryResults,\n    queryResults,\n    findResult,\n    setFindQuery,\n    playerReady,\n    auth,\n    match\n  } = props;\n\n  return (\n    <Container>\n      <Route\n        exact\n        path={`${match.path}`}\n        component={() => <Home roomTracks={roomTracks}></Home>}\n      ></Route>\n      <Route\n        path={`${match.path}/search`}\n        component={() => (\n          <Search\n            style={{ height: \"90vh\" }}\n            results={queryResults}\n            filter={filter}\n            setFilter={setFilter}\n            addTrack={room.controller.addTrack}\n            removeTrack={room.controller.removeTrack}\n            auth={auth}\n          ></Search>\n        )}\n      ></Route>\n      <Route\n        path={`${match.path}/library`}\n        component={() => (\n          <Library\n            filter={filter}\n            setFilter={setFilter}\n            results={libraryResults}\n            foundTracks={findResult.tracks}\n            setFindQuery={setFindQuery}\n            addTrack={room.controller.addTrack}\n            removeTrack={room.controller.removeTrack}\n            foundTracksName={findResult.name}\n            selectedTracks={roomTracks.playlist}\n          ></Library>\n        )}\n      ></Route>\n      <Footer path={match.url} />\n    </Container>\n  );\n}\n","// Deps\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nimport DesktopView from \"../../Desktop/RoomView/RoomView\";\r\nimport MobileView from \"../../Mobile/RoomView/RoomView\";\r\n\r\n// Hooks\r\nimport useRoomTracks from \"../../../hooks/useRoomTracks\";\r\nimport useSearch from \"../../../hooks/useSearch/useSearch\";\r\nimport useLibrary from \"../../../hooks/useLibrary\";\r\nimport useFind from \"../../../hooks/useFind\";\r\nimport useBreakpoint from \"../../../hooks/useBreakpoint\";\r\nimport useRoom from \"../../../hooks/useRoom\";\r\nimport useProfile from \"../../../hooks/useProfile\";\r\nimport { Background } from \"../../Desktop/RoomView/styles\";\r\n\r\nexport default function Room(props) {\r\n  const { room, roomSuccess, roomError } = useRoom();\r\n  const { roomTracks } = useRoomTracks(props.auth, room);\r\n\r\n  const { libraryResults } = useLibrary(props.auth);\r\n  // TODO change to searchQuery\r\n  const { query, setQuery, queryResults } = useSearch(props.auth);\r\n  const [findResult, setFindQuery] = useFind(props.auth);\r\n  const user = useProfile(props.auth);\r\n\r\n  const playerReady =\r\n    props.auth.accessToken &&\r\n    room.state &&\r\n    room.state.currentSong &&\r\n    roomTracks &&\r\n    roomTracks.currentSong &&\r\n    user;\r\n\r\n  const { breakpoint } = useBreakpoint();\r\n\r\n  // TODO pass user Id\r\n  useEffect(() => {\r\n    if (user) {\r\n      const id = window.location.pathname.split(\"/\")[2];\r\n      const tokens = JSON.parse(localStorage.getItem(\"tokens\")) || {};\r\n      const token = tokens[id];\r\n      room.controller.joinRoom(id, user.uri, \"\", token ? token : null);\r\n    }\r\n  }, [user]);\r\n  const loaded =\r\n    room &&\r\n    room.state &&\r\n    room.state.currentSong &&\r\n    room.state.currentSong.uri &&\r\n    roomTracks &&\r\n    roomTracks.currentSong &&\r\n    roomTracks.currentSong.uri &&\r\n    libraryResults &&\r\n    (libraryResults.tracks ||\r\n      libraryResults.artists ||\r\n      libraryResults.albums ||\r\n      libraryResults.playlists);\r\n\r\n  const viewProps = {\r\n    loaded,\r\n    playerReady,\r\n    room,\r\n    roomTracks,\r\n    findResult,\r\n    setFindQuery,\r\n    query,\r\n    setQuery,\r\n    queryResults,\r\n    libraryResults,\r\n    auth: props.auth,\r\n    roomSuccess,\r\n    roomError,\r\n    ...props\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {breakpoint === \"mobile\" ? (\r\n        <MobileView {...viewProps}></MobileView>\r\n      ) : (\r\n        <>\r\n          <DesktopView {...viewProps}></DesktopView>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\n\nexport default function useRoom() {\n  const socket = io.connect(\n    process.env.NODE_ENV === \"production\"\n      ? \"https://airplayer.herokuapp.com\"\n      : \"http://localhost:8888\"\n  );\n\n  const [error, setError] = useState(\"\");\n  const [success, setSuccess] = useState({ type: \"\", payload: \"\" });\n\n  const Controller = socket => {\n    // This function is used to create a new controller to manage the room.\n    // It has to recreated to inherit the socket closure after a room as been joined\n    return {\n      joinRoom: (id, userId, password = null, token) =>\n        socket.emit(\"JOIN_ROOM\", { id, userId, password: null, token }),\n      addTrack: id => socket.emit(\"ADD_TRACK\", { uri: id }),\n      removeTrack: id => socket.emit(\"REMOVE_TRACK\", { uri: id }),\n      updatePlaylist: playlist => socket.emit(\"UPDATE_PLAYLIST\", playlist),\n      play: id => socket.emit(\"PLAY\", { uri: id }),\n      pause: () => socket.emit(\"PAUSE\", null),\n      resume: () => socket.emit(\"RESUME\", null),\n      seek: destination => socket.emit(\"SEEK\", destination)\n    };\n  };\n\n  const [room, setRoom] = useState({\n    state: {},\n    controller: Controller(socket),\n    error: \"\"\n  });\n\n  useEffect(() => {\n    socket.on(\"ROOM_CREATED\", payload =>\n      setSuccess({ type: \"ROOM_CREATED\", payload, message: \"Room Created\" })\n    );\n    socket.on(\"ROOM_UPDATED\", nextRoomState => {\n      setRoom({\n        ...room,\n        state: { ...nextRoomState, isHost: socket.id === nextRoomState.host },\n        controller: Controller(socket)\n      });\n    });\n    socket.on(\"ERROR\", ({ type, payload, message, code }) =>\n      setError({ type, payload, message, code })\n    );\n    socket.on(\"SUCCESS\", ({ type, payload, message }) =>\n      setSuccess({ type, payload, message })\n    );\n  }, [room]);\n\n  return { room, roomError: error, roomSuccess: success };\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Spotify from \"../modules/Spotify\";\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\n\nexport default function useRoomTracks(auth, room) {\n  // Store Access\n  // Local State\n\n  // Local Variables\n  const [roomTracks, setRoomTracks] = useState({\n    currentSong: null,\n    playlist: null\n  });\n  const spotify = Spotify(auth.accessToken);\n\n  useEffect(() => {\n    if (room && room.state && room.state.currentSong && room.state.playlist) {\n      const currentSongPromise = spotify.find({\n        track: { where: { id: room.state.currentSong.uri.split(\":\")[2] } }\n      });\n      const playlistPromise = Promise.all(\n        room.state.playlist.map(track =>\n          spotify.find({\n            track: { where: { id: track.uri.split(\":\")[2] } }\n          })\n        )\n      );\n      Promise.all([currentSongPromise, playlistPromise]).then(\n        ([currentSong, playlist]) => {\n          Reflect.setPrototypeOf(currentSong, ItemPrototype());\n\n          playlist.map(track => Reflect.setPrototypeOf(track, ItemPrototype()));\n          setRoomTracks({\n            currentSong,\n            playlist\n          });\n        }\n      );\n    }\n  }, [room.state]);\n\n  return { roomTracks };\n}\n","import { useState, useEffect } from \"react\";\nimport Spotify from \"../modules/Spotify\";\nimport { ItemPrototype } from \"../modules/SpotifyHelper/SpotifyHelper\";\n\nexport default function useLibrary(auth) {\n  // Store Access\n\n  const [libraryResults, setQueryResults] = useState({\n    tracks: {},\n    artists: {},\n    playlists: {},\n    albums: {},\n    topTracks: {}\n  });\n\n  // Local Variables\n  const spotify = Spotify(auth.accessToken);\n\n  // Search Handler\n  useEffect(() => {\n    const getQueries = async () => {\n      const queries = Object.keys(libraryResults).map(type => {\n        switch (type) {\n          case \"tracks\":\n            return spotify\n              .user()\n              .library()\n              .get(type);\n          case \"albums\":\n            return spotify\n              .user()\n              .library()\n              .get(type);\n          case \"artists\":\n            return spotify.user().artists();\n          case \"playlists\":\n            return spotify.user().playlists();\n          case \"topTracks\":\n            return spotify.user().top(\"tracks\");\n        }\n      });\n\n      const results = await Promise.all(queries);\n\n      const tracks = results[0].error\n        ? []\n        : results[0].items.map(item => item.track);\n\n      const artists = results[1].error ? [] : results[1].artists.items;\n      const playlists = results[2].error ? [] : results[2].items;\n      const albums = results[3].error\n        ? []\n        : results[3].items.map(item => item.album);\n\n      const topTracks = results[4].error ? [] : results[4].items;\n\n      const nextQueryResults = [tracks, artists, playlists, albums, topTracks];\n      nextQueryResults.forEach(results =>\n        results.forEach(item => Reflect.setPrototypeOf(item, ItemPrototype()))\n      );\n      return Object.assign(\n        {},\n        ...Object.keys(libraryResults).map((query, i) => {\n          return {\n            [query]: nextQueryResults[i]\n          };\n        })\n      );\n    };\n    if (auth.accessToken) {\n      getQueries().then(nextResults => {\n        setQueryResults(nextResults);\n      });\n    }\n  }, [auth.accessToken]);\n\n  return {\n    libraryResults\n  };\n}\n","import React, { useState, useEffect } from \"react\";\nimport theme from \"../theme\";\n\nexport default function useBreakpoint() {\n  const [breakpoint, setBreakpoint] = useState(\"desktop\");\n\n  const handleResize = () => {\n    const mobile = theme.breakpoints.mobile.substring(\n      0,\n      theme.breakpoints.mobile.length - 2\n    );\n    if (window.innerWidth < mobile) {\n      setBreakpoint(\"mobile\");\n    } else {\n      setBreakpoint(\"tablet\");\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  });\n\n  useEffect(() => handleResize(), []);\n\n  return { breakpoint };\n}\n","// Dependencies\nimport React, { useState } from \"react\";\nimport { hot } from \"react-hot-loader\"; // used to fix hot reload issues with styled components during development\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { ThemeProvider } from \"styled-components\";\nimport theme from \"./theme\";\nimport auth from \"./modules/Auth\";\n\n//Routes\nimport Landing from \"./pages/Agnostic/Landing/Landing\";\nimport Callback from \"./pages/Agnostic/Callback\";\nimport RoomSearch from \"./pages/Agnostic/RoomSearch/RoomSearch\";\n\n//Reducers\n\nimport Room from \"./pages/Agnostic/Room/Room\";\n\nimport useAuth from \"./hooks/useAuth\";\n//Styles\nimport \"./global.css\";\nconst prevAuthData = JSON.parse(localStorage.getItem(\"authData\"));\n\nauth.init();\n// const App = hot(module)(() => { // For development, effects styled components\nconst App = () => {\n  const activeTheme = localStorage.getItem(\"theme\");\n  const toggleTheme = () => {\n    localStorage.setItem(\n      \"theme\",\n      activeTheme === \"light\" || activeTheme === null ? \"dark\" : \"light\"\n    );\n    window.location.reload();\n  };\n\n  return (\n    <ThemeProvider\n      theme={\n        activeTheme === \"light\" || activeTheme === null\n          ? theme\n          : { ...theme, mode: \"dark\" }\n      }\n    >\n      <Router>\n        <Route\n          exact\n          path=\"/\"\n          component={props => <Landing {...props} auth={auth}></Landing>}\n        />\n\n        <Route\n          path=\"/roomsearch\"\n          component={() => <RoomSearch auth={auth}></RoomSearch>}\n        />\n\n        <Route\n          path=\"/room/:roomid\"\n          component={props => (\n            <Room {...props} auth={auth} toggleTheme={toggleTheme}></Room>\n          )}\n        />\n\n        <Route\n          path=\"/auth/callback\"\n          component={props => <Callback {...props} auth={auth}></Callback>}\n        />\n      </Router>\n    </ThemeProvider>\n  );\n};\n//   );\n// });\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/spotifyLogo.ddd851ef.png\";"],"sourceRoot":""}